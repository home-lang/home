var PK=Object.create;var{getPrototypeOf:MK,defineProperty:LJ,getOwnPropertyNames:R4,getOwnPropertyDescriptor:IK}=Object,y4=Object.prototype.hasOwnProperty;var d$=($,Z,J)=>{J=$!=null?PK(MK($)):{};let Y=Z||!$||!$.__esModule?LJ(J,"default",{value:$,enumerable:!0}):J;for(let Q of R4($))if(!y4.call(Y,Q))LJ(Y,Q,{get:()=>$[Q],enumerable:!0});return Y},b4=new WeakMap,TK=($)=>{var Z=b4.get($),J;if(Z)return Z;if(Z=LJ({},"__esModule",{value:!0}),$&&typeof $==="object"||typeof $==="function")R4($).map((Y)=>!y4.call(Z,Y)&&LJ(Z,Y,{get:()=>$[Y],enumerable:!(J=IK($,Y))||J.enumerable}));return b4.set($,Z),Z},D=($,Z)=>()=>(Z||$((Z={exports:{}}).exports,Z),Z.exports);var qK=($,Z)=>{for(var J in Z)LJ($,J,{get:Z[J],enumerable:!0,configurable:!0,set:(Y)=>Z[J]=()=>Y})};var XZ=D((t$)=>{Object.defineProperty(t$,"__esModule",{value:!0});t$.asPromise=t$.thenable=t$.typedArray=t$.stringArray=t$.array=t$.func=t$.error=t$.number=t$.string=t$.boolean=void 0;function CK($){return $===!0||$===!1}t$.boolean=CK;function _4($){return typeof $==="string"||$ instanceof String}t$.string=_4;function SK($){return typeof $==="number"||$ instanceof Number}t$.number=SK;function DK($){return $ instanceof Error}t$.error=DK;function x4($){return typeof $==="function"}t$.func=x4;function h4($){return Array.isArray($)}t$.array=h4;function bK($){return h4($)&&$.every((Z)=>_4(Z))}t$.stringArray=bK;function RK($,Z){return Array.isArray($)&&$.every(Z)}t$.typedArray=RK;function f4($){return $&&x4($.then)}t$.thenable=f4;function yK($){if($ instanceof Promise)return $;else if(f4($))return new Promise((Z,J)=>{$.then((Y)=>Z(Y),(Y)=>J(Y))});else return Promise.resolve($)}t$.asPromise=yK});var g9=D((F0)=>{Object.defineProperty(F0,"__esModule",{value:!0});F0.stringArray=F0.array=F0.func=F0.error=F0.number=F0.string=F0.boolean=void 0;function _K($){return $===!0||$===!1}F0.boolean=_K;function k4($){return typeof $==="string"||$ instanceof String}F0.string=k4;function xK($){return typeof $==="number"||$ instanceof Number}F0.number=xK;function hK($){return $ instanceof Error}F0.error=hK;function fK($){return typeof $==="function"}F0.func=fK;function v4($){return Array.isArray($)}F0.array=v4;function kK($){return v4($)&&$.every((Z)=>k4(Z))}F0.stringArray=kK});var n8=D((r)=>{Object.defineProperty(r,"__esModule",{value:!0});r.Message=r.NotificationType9=r.NotificationType8=r.NotificationType7=r.NotificationType6=r.NotificationType5=r.NotificationType4=r.NotificationType3=r.NotificationType2=r.NotificationType1=r.NotificationType0=r.NotificationType=r.RequestType9=r.RequestType8=r.RequestType7=r.RequestType6=r.RequestType5=r.RequestType4=r.RequestType3=r.RequestType2=r.RequestType1=r.RequestType=r.RequestType0=r.AbstractMessageSignature=r.ParameterStructures=r.ResponseError=r.ErrorCodes=void 0;var F9=g9(),c8;(function($){$.ParseError=-32700,$.InvalidRequest=-32600,$.MethodNotFound=-32601,$.InvalidParams=-32602,$.InternalError=-32603,$.jsonrpcReservedErrorRangeStart=-32099,$.serverErrorStart=-32099,$.MessageWriteError=-32099,$.MessageReadError=-32098,$.PendingResponseRejected=-32097,$.ConnectionInactive=-32096,$.ServerNotInitialized=-32002,$.UnknownErrorCode=-32001,$.jsonrpcReservedErrorRangeEnd=-32000,$.serverErrorEnd=-32000})(c8||(r.ErrorCodes=c8={}));class i8 extends Error{constructor($,Z,J){super(Z);this.code=F9.number($)?$:c8.UnknownErrorCode,this.data=J,Object.setPrototypeOf(this,i8.prototype)}toJson(){let $={code:this.code,message:this.message};if(this.data!==void 0)$.data=this.data;return $}}r.ResponseError=i8;class P0{constructor($){this.kind=$}static is($){return $===P0.auto||$===P0.byName||$===P0.byPosition}toString(){return this.kind}}r.ParameterStructures=P0;P0.auto=new P0("auto");P0.byPosition=new P0("byPosition");P0.byName=new P0("byName");class m${constructor($,Z){this.method=$,this.numberOfParams=Z}get parameterStructures(){return P0.auto}}r.AbstractMessageSignature=m$;class p4 extends m${constructor($){super($,0)}}r.RequestType0=p4;class d4 extends m${constructor($,Z=P0.auto){super($,1);this._parameterStructures=Z}get parameterStructures(){return this._parameterStructures}}r.RequestType=d4;class m4 extends m${constructor($,Z=P0.auto){super($,1);this._parameterStructures=Z}get parameterStructures(){return this._parameterStructures}}r.RequestType1=m4;class u4 extends m${constructor($){super($,2)}}r.RequestType2=u4;class l4 extends m${constructor($){super($,3)}}r.RequestType3=l4;class c4 extends m${constructor($){super($,4)}}r.RequestType4=c4;class i4 extends m${constructor($){super($,5)}}r.RequestType5=i4;class n4 extends m${constructor($){super($,6)}}r.RequestType6=n4;class a4 extends m${constructor($){super($,7)}}r.RequestType7=a4;class s4 extends m${constructor($){super($,8)}}r.RequestType8=s4;class r4 extends m${constructor($){super($,9)}}r.RequestType9=r4;class o4 extends m${constructor($,Z=P0.auto){super($,1);this._parameterStructures=Z}get parameterStructures(){return this._parameterStructures}}r.NotificationType=o4;class t4 extends m${constructor($){super($,0)}}r.NotificationType0=t4;class e4 extends m${constructor($,Z=P0.auto){super($,1);this._parameterStructures=Z}get parameterStructures(){return this._parameterStructures}}r.NotificationType1=e4;class $Q extends m${constructor($){super($,2)}}r.NotificationType2=$Q;class ZQ extends m${constructor($){super($,3)}}r.NotificationType3=ZQ;class JQ extends m${constructor($){super($,4)}}r.NotificationType4=JQ;class YQ extends m${constructor($){super($,5)}}r.NotificationType5=YQ;class QQ extends m${constructor($){super($,6)}}r.NotificationType6=QQ;class XQ extends m${constructor($){super($,7)}}r.NotificationType7=XQ;class zQ extends m${constructor($){super($,8)}}r.NotificationType8=zQ;class GQ extends m${constructor($){super($,9)}}r.NotificationType9=GQ;var g4;(function($){function Z(Q){let X=Q;return X&&F9.string(X.method)&&(F9.string(X.id)||F9.number(X.id))}$.isRequest=Z;function J(Q){let X=Q;return X&&F9.string(X.method)&&Q.id===void 0}$.isNotification=J;function Y(Q){let X=Q;return X&&(X.result!==void 0||!!X.error)&&(F9.string(X.id)||F9.number(X.id)||X.id===null)}$.isResponse=Y})(g4||(r.Message=g4={}))});var s8=D((Y9)=>{var BQ;Object.defineProperty(Y9,"__esModule",{value:!0});Y9.LRUCache=Y9.LinkedMap=Y9.Touch=void 0;var M0;(function($){$.None=0,$.First=1,$.AsOld=$.First,$.Last=2,$.AsNew=$.Last})(M0||(Y9.Touch=M0={}));class a8{constructor(){this[BQ]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has($){return this._map.has($)}get($,Z=M0.None){let J=this._map.get($);if(!J)return;if(Z!==M0.None)this.touch(J,Z);return J.value}set($,Z,J=M0.None){let Y=this._map.get($);if(Y){if(Y.value=Z,J!==M0.None)this.touch(Y,J)}else{switch(Y={key:$,value:Z,next:void 0,previous:void 0},J){case M0.None:this.addItemLast(Y);break;case M0.First:this.addItemFirst(Y);break;case M0.Last:this.addItemLast(Y);break;default:this.addItemLast(Y);break}this._map.set($,Y),this._size++}return this}delete($){return!!this.remove($)}remove($){let Z=this._map.get($);if(!Z)return;return this._map.delete($),this.removeItem(Z),this._size--,Z.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw Error("Invalid list");let $=this._head;return this._map.delete($.key),this.removeItem($),this._size--,$.value}forEach($,Z){let J=this._state,Y=this._head;while(Y){if(Z)$.bind(Z)(Y.value,Y.key,this);else $(Y.value,Y.key,this);if(this._state!==J)throw Error("LinkedMap got modified during iteration.");Y=Y.next}}keys(){let $=this._state,Z=this._head,J={[Symbol.iterator]:()=>{return J},next:()=>{if(this._state!==$)throw Error("LinkedMap got modified during iteration.");if(Z){let Y={value:Z.key,done:!1};return Z=Z.next,Y}else return{value:void 0,done:!0}}};return J}values(){let $=this._state,Z=this._head,J={[Symbol.iterator]:()=>{return J},next:()=>{if(this._state!==$)throw Error("LinkedMap got modified during iteration.");if(Z){let Y={value:Z.value,done:!1};return Z=Z.next,Y}else return{value:void 0,done:!0}}};return J}entries(){let $=this._state,Z=this._head,J={[Symbol.iterator]:()=>{return J},next:()=>{if(this._state!==$)throw Error("LinkedMap got modified during iteration.");if(Z){let Y={value:[Z.key,Z.value],done:!1};return Z=Z.next,Y}else return{value:void 0,done:!0}}};return J}[(BQ=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld($){if($>=this.size)return;if($===0){this.clear();return}let Z=this._head,J=this.size;while(Z&&J>$)this._map.delete(Z.key),Z=Z.next,J--;if(this._head=Z,this._size=J,Z)Z.previous=void 0;this._state++}addItemFirst($){if(!this._head&&!this._tail)this._tail=$;else if(!this._head)throw Error("Invalid list");else $.next=this._head,this._head.previous=$;this._head=$,this._state++}addItemLast($){if(!this._head&&!this._tail)this._head=$;else if(!this._tail)throw Error("Invalid list");else $.previous=this._tail,this._tail.next=$;this._tail=$,this._state++}removeItem($){if($===this._head&&$===this._tail)this._head=void 0,this._tail=void 0;else if($===this._head){if(!$.next)throw Error("Invalid list");$.next.previous=void 0,this._head=$.next}else if($===this._tail){if(!$.previous)throw Error("Invalid list");$.previous.next=void 0,this._tail=$.previous}else{let{next:Z,previous:J}=$;if(!Z||!J)throw Error("Invalid list");Z.previous=J,J.next=Z}$.next=void 0,$.previous=void 0,this._state++}touch($,Z){if(!this._head||!this._tail)throw Error("Invalid list");if(Z!==M0.First&&Z!==M0.Last)return;if(Z===M0.First){if($===this._head)return;let{next:J,previous:Y}=$;if($===this._tail)Y.next=void 0,this._tail=Y;else J.previous=Y,Y.next=J;$.previous=void 0,$.next=this._head,this._head.previous=$,this._head=$,this._state++}else if(Z===M0.Last){if($===this._tail)return;let{next:J,previous:Y}=$;if($===this._head)J.previous=void 0,this._head=J;else J.previous=Y,Y.next=J;$.next=void 0,$.previous=this._tail,this._tail.next=$,this._tail=$,this._state++}}toJSON(){let $=[];return this.forEach((Z,J)=>{$.push([J,Z])}),$}fromJSON($){this.clear();for(let[Z,J]of $)this.set(Z,J)}}Y9.LinkedMap=a8;class jQ extends a8{constructor($,Z=1){super();this._limit=$,this._ratio=Math.min(Math.max(0,Z),1)}get limit(){return this._limit}set limit($){this._limit=$,this.checkTrim()}get ratio(){return this._ratio}set ratio($){this._ratio=Math.min(Math.max(0,$),1),this.checkTrim()}get($,Z=M0.AsNew){return super.get($,Z)}peek($){return super.get($,M0.None)}set($,Z){return super.set($,Z,M0.Last),this.checkTrim(),this}checkTrim(){if(this.size>this._limit)this.trimOld(Math.round(this._limit*this._ratio))}}Y9.LRUCache=jQ});var VQ=D((JY)=>{Object.defineProperty(JY,"__esModule",{value:!0});JY.Disposable=void 0;var KQ;(function($){function Z(J){return{dispose:J}}$.create=Z})(KQ||(JY.Disposable=KQ={}))});var Q9=D((t8)=>{Object.defineProperty(t8,"__esModule",{value:!0});var r8;function o8(){if(r8===void 0)throw Error("No runtime abstraction layer installed");return r8}(function($){function Z(J){if(J===void 0)throw Error("No runtime abstraction layer provided");r8=J}$.install=Z})(o8||(o8={}));t8.default=o8});var d9=D((p9)=>{Object.defineProperty(p9,"__esModule",{value:!0});p9.Emitter=p9.Event=void 0;var vK=Q9(),WQ;(function($){let Z={dispose(){}};$.None=function(){return Z}})(WQ||(p9.Event=WQ={}));class HQ{add($,Z=null,J){if(!this._callbacks)this._callbacks=[],this._contexts=[];if(this._callbacks.push($),this._contexts.push(Z),Array.isArray(J))J.push({dispose:()=>this.remove($,Z)})}remove($,Z=null){if(!this._callbacks)return;let J=!1;for(let Y=0,Q=this._callbacks.length;Y<Q;Y++)if(this._callbacks[Y]===$)if(this._contexts[Y]===Z){this._callbacks.splice(Y,1),this._contexts.splice(Y,1);return}else J=!0;if(J)throw Error("When adding a listener with a context, you should remove it with the same context")}invoke(...$){if(!this._callbacks)return[];let Z=[],J=this._callbacks.slice(0),Y=this._contexts.slice(0);for(let Q=0,X=J.length;Q<X;Q++)try{Z.push(J[Q].apply(Y[Q],$))}catch(z){(0,vK.default)().console.error(z)}return Z}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class YY{constructor($){this._options=$}get event(){if(!this._event)this._event=($,Z,J)=>{if(!this._callbacks)this._callbacks=new HQ;if(this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty())this._options.onFirstListenerAdd(this);this._callbacks.add($,Z);let Y={dispose:()=>{if(!this._callbacks)return;if(this._callbacks.remove($,Z),Y.dispose=YY._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty())this._options.onLastListenerRemove(this)}};if(Array.isArray(J))J.push(Y);return Y};return this._event}fire($){if(this._callbacks)this._callbacks.invoke.call(this._callbacks,$)}dispose(){if(this._callbacks)this._callbacks.dispose(),this._callbacks=void 0}}p9.Emitter=YY;YY._noop=function(){}});var XY=D((m9)=>{Object.defineProperty(m9,"__esModule",{value:!0});m9.CancellationTokenSource=m9.CancellationToken=void 0;var gK=Q9(),pK=g9(),e8=d9(),QY;(function($){$.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:e8.Event.None}),$.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:e8.Event.None});function Z(J){let Y=J;return Y&&(Y===$.None||Y===$.Cancelled||pK.boolean(Y.isCancellationRequested)&&!!Y.onCancellationRequested)}$.is=Z})(QY||(m9.CancellationToken=QY={}));var dK=Object.freeze(function($,Z){let J=(0,gK.default)().timer.setTimeout($.bind(Z),0);return{dispose(){J.dispose()}}});class $6{constructor(){this._isCancelled=!1}cancel(){if(!this._isCancelled){if(this._isCancelled=!0,this._emitter)this._emitter.fire(void 0),this.dispose()}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled)return dK;if(!this._emitter)this._emitter=new e8.Emitter;return this._emitter.event}dispose(){if(this._emitter)this._emitter.dispose(),this._emitter=void 0}}class AQ{get token(){if(!this._token)this._token=new $6;return this._token}cancel(){if(!this._token)this._token=QY.Cancelled;else this._token.cancel()}dispose(){if(!this._token)this._token=QY.None;else if(this._token instanceof $6)this._token.dispose()}}m9.CancellationTokenSource=AQ});var NQ=D((u9)=>{Object.defineProperty(u9,"__esModule",{value:!0});u9.SharedArrayReceiverStrategy=u9.SharedArraySenderStrategy=void 0;var mK=XY(),FJ;(function($){$.Continue=0,$.Cancelled=1})(FJ||(FJ={}));class OQ{constructor(){this.buffers=new Map}enableCancellation($){if($.id===null)return;let Z=new SharedArrayBuffer(4),J=new Int32Array(Z,0,1);J[0]=FJ.Continue,this.buffers.set($.id,Z),$.$cancellationData=Z}async sendCancellation($,Z){let J=this.buffers.get(Z);if(J===void 0)return;let Y=new Int32Array(J,0,1);Atomics.store(Y,0,FJ.Cancelled)}cleanup($){this.buffers.delete($)}dispose(){this.buffers.clear()}}u9.SharedArraySenderStrategy=OQ;class EQ{constructor($){this.data=new Int32Array($,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===FJ.Cancelled}get onCancellationRequested(){throw Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class UQ{constructor($){this.token=new EQ($)}cancel(){}dispose(){}}class wQ{constructor(){this.kind="request"}createCancellationTokenSource($){let Z=$.$cancellationData;if(Z===void 0)return new mK.CancellationTokenSource;return new UQ(Z)}}u9.SharedArrayReceiverStrategy=wQ});var Z6=D((zY)=>{Object.defineProperty(zY,"__esModule",{value:!0});zY.Semaphore=void 0;var uK=Q9();class LQ{constructor($=1){if($<=0)throw Error("Capacity must be greater than 0");this._capacity=$,this._active=0,this._waiting=[]}lock($){return new Promise((Z,J)=>{this._waiting.push({thunk:$,resolve:Z,reject:J}),this.runNext()})}get active(){return this._active}runNext(){if(this._waiting.length===0||this._active===this._capacity)return;(0,uK.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let $=this._waiting.shift();if(this._active++,this._active>this._capacity)throw Error("To many thunks active");try{let Z=$.thunk();if(Z instanceof Promise)Z.then((J)=>{this._active--,$.resolve(J),this.runNext()},(J)=>{this._active--,$.reject(J),this.runNext()});else this._active--,$.resolve(Z),this.runNext()}catch(Z){this._active--,$.reject(Z),this.runNext()}}}zY.Semaphore=LQ});var MQ=D((X9)=>{Object.defineProperty(X9,"__esModule",{value:!0});X9.ReadableStreamMessageReader=X9.AbstractMessageReader=X9.MessageReader=void 0;var Y6=Q9(),l9=g9(),J6=d9(),lK=Z6(),FQ;(function($){function Z(J){let Y=J;return Y&&l9.func(Y.listen)&&l9.func(Y.dispose)&&l9.func(Y.onError)&&l9.func(Y.onClose)&&l9.func(Y.onPartialMessage)}$.is=Z})(FQ||(X9.MessageReader=FQ={}));class X6{constructor(){this.errorEmitter=new J6.Emitter,this.closeEmitter=new J6.Emitter,this.partialMessageEmitter=new J6.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError($){this.errorEmitter.fire(this.asError($))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage($){this.partialMessageEmitter.fire($)}asError($){if($ instanceof Error)return $;else return Error(`Reader received error. Reason: ${l9.string($.message)?$.message:"unknown"}`)}}X9.AbstractMessageReader=X6;var Q6;(function($){function Z(J){let Y,Q,X,z=new Map,B,j=new Map;if(J===void 0||typeof J==="string")Y=J??"utf-8";else{if(Y=J.charset??"utf-8",J.contentDecoder!==void 0)X=J.contentDecoder,z.set(X.name,X);if(J.contentDecoders!==void 0)for(let H of J.contentDecoders)z.set(H.name,H);if(J.contentTypeDecoder!==void 0)B=J.contentTypeDecoder,j.set(B.name,B);if(J.contentTypeDecoders!==void 0)for(let H of J.contentTypeDecoders)j.set(H.name,H)}if(B===void 0)B=(0,Y6.default)().applicationJson.decoder,j.set(B.name,B);return{charset:Y,contentDecoder:X,contentDecoders:z,contentTypeDecoder:B,contentTypeDecoders:j}}$.fromOptions=Z})(Q6||(Q6={}));class PQ extends X6{constructor($,Z){super();this.readable=$,this.options=Q6.fromOptions(Z),this.buffer=(0,Y6.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new lK.Semaphore(1)}set partialMessageTimeout($){this._partialMessageTimeout=$}get partialMessageTimeout(){return this._partialMessageTimeout}listen($){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=$;let Z=this.readable.onData((J)=>{this.onData(J)});return this.readable.onError((J)=>this.fireError(J)),this.readable.onClose(()=>this.fireClose()),Z}onData($){try{this.buffer.append($);while(!0){if(this.nextMessageLength===-1){let J=this.buffer.tryReadHeaders(!0);if(!J)return;let Y=J.get("content-length");if(!Y){this.fireError(Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(J))}`));return}let Q=parseInt(Y);if(isNaN(Q)){this.fireError(Error(`Content-Length value must be a number. Got ${Y}`));return}this.nextMessageLength=Q}let Z=this.buffer.tryReadBody(this.nextMessageLength);if(Z===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let J=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(Z):Z,Y=await this.options.contentTypeDecoder.decode(J,this.options);this.callback(Y)}).catch((J)=>{this.fireError(J)})}}catch(Z){this.fireError(Z)}}clearPartialMessageTimer(){if(this.partialMessageTimer)this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0}setPartialMessageTimer(){if(this.clearPartialMessageTimer(),this._partialMessageTimeout<=0)return;this.partialMessageTimer=(0,Y6.default)().timer.setTimeout(($,Z)=>{if(this.partialMessageTimer=void 0,$===this.messageToken)this.firePartialMessage({messageToken:$,waitingTime:Z}),this.setPartialMessageTimer()},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout)}}X9.ReadableStreamMessageReader=PQ});var DQ=D((z9)=>{Object.defineProperty(z9,"__esModule",{value:!0});z9.WriteableStreamMessageWriter=z9.AbstractMessageWriter=z9.MessageWriter=void 0;var IQ=Q9(),PJ=g9(),cK=Z6(),TQ=d9(),iK="Content-Length: ",qQ=`\r
`,CQ;(function($){function Z(J){let Y=J;return Y&&PJ.func(Y.dispose)&&PJ.func(Y.onClose)&&PJ.func(Y.onError)&&PJ.func(Y.write)}$.is=Z})(CQ||(z9.MessageWriter=CQ={}));class G6{constructor(){this.errorEmitter=new TQ.Emitter,this.closeEmitter=new TQ.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError($,Z,J){this.errorEmitter.fire([this.asError($),Z,J])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError($){if($ instanceof Error)return $;else return Error(`Writer received error. Reason: ${PJ.string($.message)?$.message:"unknown"}`)}}z9.AbstractMessageWriter=G6;var z6;(function($){function Z(J){if(J===void 0||typeof J==="string")return{charset:J??"utf-8",contentTypeEncoder:(0,IQ.default)().applicationJson.encoder};else return{charset:J.charset??"utf-8",contentEncoder:J.contentEncoder,contentTypeEncoder:J.contentTypeEncoder??(0,IQ.default)().applicationJson.encoder}}$.fromOptions=Z})(z6||(z6={}));class SQ extends G6{constructor($,Z){super();this.writable=$,this.options=z6.fromOptions(Z),this.errorCount=0,this.writeSemaphore=new cK.Semaphore(1),this.writable.onError((J)=>this.fireError(J)),this.writable.onClose(()=>this.fireClose())}async write($){return this.writeSemaphore.lock(async()=>{return this.options.contentTypeEncoder.encode($,this.options).then((J)=>{if(this.options.contentEncoder!==void 0)return this.options.contentEncoder.encode(J);else return J}).then((J)=>{let Y=[];return Y.push(iK,J.byteLength.toString(),qQ),Y.push(qQ),this.doWrite($,Y,J)},(J)=>{throw this.fireError(J),J})})}async doWrite($,Z,J){try{return await this.writable.write(Z.join(""),"ascii"),this.writable.write(J)}catch(Y){return this.handleError(Y,$),Promise.reject(Y)}}handleError($,Z){this.errorCount++,this.fireError($,Z,this.errorCount)}end(){this.writable.end()}}z9.WriteableStreamMessageWriter=SQ});var RQ=D((GY)=>{Object.defineProperty(GY,"__esModule",{value:!0});GY.AbstractMessageBuffer=void 0;var nK=13,aK=10,sK=`\r
`;class bQ{constructor($="utf-8"){this._encoding=$,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append($){let Z=typeof $==="string"?this.fromString($,this._encoding):$;this._chunks.push(Z),this._totalLength+=Z.byteLength}tryReadHeaders($=!1){if(this._chunks.length===0)return;let Z=0,J=0,Y=0,Q=0;$:while(J<this._chunks.length){let j=this._chunks[J];Y=0;Z:while(Y<j.length){switch(j[Y]){case nK:switch(Z){case 0:Z=1;break;case 2:Z=3;break;default:Z=0}break;case aK:switch(Z){case 1:Z=2;break;case 3:Z=4,Y++;break $;default:Z=0}break;default:Z=0}Y++}Q+=j.byteLength,J++}if(Z!==4)return;let X=this._read(Q+Y),z=new Map,B=this.toString(X,"ascii").split(sK);if(B.length<2)return z;for(let j=0;j<B.length-2;j++){let H=B[j],O=H.indexOf(":");if(O===-1)throw Error(`Message header must separate key and value using ':'
${H}`);let N=H.substr(0,O),U=H.substr(O+1).trim();z.set($?N.toLowerCase():N,U)}return z}tryReadBody($){if(this._totalLength<$)return;return this._read($)}get numberOfBytes(){return this._totalLength}_read($){if($===0)return this.emptyBuffer();if($>this._totalLength)throw Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===$){let Q=this._chunks[0];return this._chunks.shift(),this._totalLength-=$,this.asNative(Q)}if(this._chunks[0].byteLength>$){let Q=this._chunks[0],X=this.asNative(Q,$);return this._chunks[0]=Q.slice($),this._totalLength-=$,X}let Z=this.allocNative($),J=0,Y=0;while($>0){let Q=this._chunks[Y];if(Q.byteLength>$){let X=Q.slice(0,$);Z.set(X,J),J+=$,this._chunks[Y]=Q.slice($),this._totalLength-=$,$-=$}else Z.set(Q,J),J+=Q.byteLength,this._chunks.shift(),this._totalLength-=Q.byteLength,$-=Q.byteLength}return Z}}GY.AbstractMessageBuffer=bQ});var kQ=D((Y$)=>{Object.defineProperty(Y$,"__esModule",{value:!0});Y$.createMessageConnection=Y$.ConnectionOptions=Y$.MessageStrategy=Y$.CancellationStrategy=Y$.CancellationSenderStrategy=Y$.CancellationReceiverStrategy=Y$.RequestCancellationReceiverStrategy=Y$.IdCancellationReceiverStrategy=Y$.ConnectionStrategy=Y$.ConnectionError=Y$.ConnectionErrors=Y$.LogTraceNotification=Y$.SetTraceNotification=Y$.TraceFormat=Y$.TraceValues=Y$.Trace=Y$.NullLogger=Y$.ProgressType=Y$.ProgressToken=void 0;var yQ=Q9(),n$=g9(),o=n8(),_Q=s8(),MJ=d9(),B6=XY(),qJ;(function($){$.type=new o.NotificationType("$/cancelRequest")})(qJ||(qJ={}));var j6;(function($){function Z(J){return typeof J==="string"||typeof J==="number"}$.is=Z})(j6||(Y$.ProgressToken=j6={}));var IJ;(function($){$.type=new o.NotificationType("$/progress")})(IJ||(IJ={}));class fQ{constructor(){}}Y$.ProgressType=fQ;var K6;(function($){function Z(J){return n$.func(J)}$.is=Z})(K6||(K6={}));Y$.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var I$;(function($){$[$.Off=0]="Off",$[$.Messages=1]="Messages",$[$.Compact=2]="Compact",$[$.Verbose=3]="Verbose"})(I$||(Y$.Trace=I$={}));var xQ;(function($){$.Off="off",$.Messages="messages",$.Compact="compact",$.Verbose="verbose"})(xQ||(Y$.TraceValues=xQ={}));(function($){function Z(Y){if(!n$.string(Y))return $.Off;switch(Y=Y.toLowerCase(),Y){case"off":return $.Off;case"messages":return $.Messages;case"compact":return $.Compact;case"verbose":return $.Verbose;default:return $.Off}}$.fromString=Z;function J(Y){switch(Y){case $.Off:return"off";case $.Messages:return"messages";case $.Compact:return"compact";case $.Verbose:return"verbose";default:return"off"}}$.toString=J})(I$||(Y$.Trace=I$={}));var a0;(function($){$.Text="text",$.JSON="json"})(a0||(Y$.TraceFormat=a0={}));(function($){function Z(J){if(!n$.string(J))return $.Text;if(J=J.toLowerCase(),J==="json")return $.JSON;else return $.Text}$.fromString=Z})(a0||(Y$.TraceFormat=a0={}));var V6;(function($){$.type=new o.NotificationType("$/setTrace")})(V6||(Y$.SetTraceNotification=V6={}));var BY;(function($){$.type=new o.NotificationType("$/logTrace")})(BY||(Y$.LogTraceNotification=BY={}));var TJ;(function($){$[$.Closed=1]="Closed",$[$.Disposed=2]="Disposed",$[$.AlreadyListening=3]="AlreadyListening"})(TJ||(Y$.ConnectionErrors=TJ={}));class c9 extends Error{constructor($,Z){super(Z);this.code=$,Object.setPrototypeOf(this,c9.prototype)}}Y$.ConnectionError=c9;var W6;(function($){function Z(J){let Y=J;return Y&&n$.func(Y.cancelUndispatched)}$.is=Z})(W6||(Y$.ConnectionStrategy=W6={}));var jY;(function($){function Z(J){let Y=J;return Y&&(Y.kind===void 0||Y.kind==="id")&&n$.func(Y.createCancellationTokenSource)&&(Y.dispose===void 0||n$.func(Y.dispose))}$.is=Z})(jY||(Y$.IdCancellationReceiverStrategy=jY={}));var H6;(function($){function Z(J){let Y=J;return Y&&Y.kind==="request"&&n$.func(Y.createCancellationTokenSource)&&(Y.dispose===void 0||n$.func(Y.dispose))}$.is=Z})(H6||(Y$.RequestCancellationReceiverStrategy=H6={}));var KY;(function($){$.Message=Object.freeze({createCancellationTokenSource(J){return new B6.CancellationTokenSource}});function Z(J){return jY.is(J)||H6.is(J)}$.is=Z})(KY||(Y$.CancellationReceiverStrategy=KY={}));var VY;(function($){$.Message=Object.freeze({sendCancellation(J,Y){return J.sendNotification(qJ.type,{id:Y})},cleanup(J){}});function Z(J){let Y=J;return Y&&n$.func(Y.sendCancellation)&&n$.func(Y.cleanup)}$.is=Z})(VY||(Y$.CancellationSenderStrategy=VY={}));var WY;(function($){$.Message=Object.freeze({receiver:KY.Message,sender:VY.Message});function Z(J){let Y=J;return Y&&KY.is(Y.receiver)&&VY.is(Y.sender)}$.is=Z})(WY||(Y$.CancellationStrategy=WY={}));var HY;(function($){function Z(J){let Y=J;return Y&&n$.func(Y.handleMessage)}$.is=Z})(HY||(Y$.MessageStrategy=HY={}));var hQ;(function($){function Z(J){let Y=J;return Y&&(WY.is(Y.cancellationStrategy)||W6.is(Y.connectionStrategy)||HY.is(Y.messageStrategy))}$.is=Z})(hQ||(Y$.ConnectionOptions=hQ={}));var UZ;(function($){$[$.New=1]="New",$[$.Listening=2]="Listening",$[$.Closed=3]="Closed",$[$.Disposed=4]="Disposed"})(UZ||(UZ={}));function rK($,Z,J,Y){let Q=J!==void 0?J:Y$.NullLogger,X=0,z=0,B=0,j="2.0",H=void 0,O=new Map,N=void 0,U=new Map,E=new Map,T,C=new _Q.LinkedMap,x=new Map,h=new Set,d=new Map,k=I$.Off,V$=a0.Text,e,l=UZ.New,s=new MJ.Emitter,W$=new MJ.Emitter,g$=new MJ.Emitter,h$=new MJ.Emitter,f0=new MJ.Emitter,J0=Y&&Y.cancellationStrategy?Y.cancellationStrategy:WY.Message;function JZ(L){if(L===null)throw Error("Can't send requests with id null since the response can't be correlated.");return"req-"+L.toString()}function O0(L){if(L===null)return"res-unknown-"+(++B).toString();else return"res-"+L.toString()}function b0(){return"not-"+(++z).toString()}function B0(L,R){if(o.Message.isRequest(R))L.set(JZ(R.id),R);else if(o.Message.isResponse(R))L.set(O0(R.id),R);else L.set(b0(),R)}function gZ(L){return}function TZ(){return l===UZ.Listening}function f$(){return l===UZ.Closed}function k0(){return l===UZ.Disposed}function R0(){if(l===UZ.New||l===UZ.Listening)l=UZ.Closed,W$.fire(void 0)}function E0(L){s.fire([L,void 0,void 0])}function tZ(L){s.fire(L)}$.onClose(R0),$.onError(E0),Z.onClose(R0),Z.onError(tZ);function qZ(){if(T||C.size===0)return;T=(0,yQ.default)().timer.setImmediate(()=>{T=void 0,pZ()})}function CZ(L){if(o.Message.isRequest(L))SZ(L);else if(o.Message.isNotification(L))HZ(L);else if(o.Message.isResponse(L))WZ(L);else DZ(L)}function pZ(){if(C.size===0)return;let L=C.shift();try{let R=Y?.messageStrategy;if(HY.is(R))R.handleMessage(L,CZ);else CZ(L)}finally{qZ()}}let eZ=(L)=>{try{if(o.Message.isNotification(L)&&L.method===qJ.type.method){let R=L.params.id,p=JZ(R),u=C.get(p);if(o.Message.isRequest(u)){let w$=Y?.connectionStrategy,q$=w$&&w$.cancelUndispatched?w$.cancelUndispatched(u,gZ):gZ(u);if(q$&&(q$.error!==void 0||q$.result!==void 0)){C.delete(p),d.delete(R),q$.id=u.id,YZ(q$,L.method,Date.now()),Z.write(q$).catch(()=>Q.error("Sending response for canceled message failed."));return}}let L$=d.get(R);if(L$!==void 0){L$.cancel(),QZ(L);return}else h.add(R)}B0(C,L)}finally{qZ()}};function SZ(L){if(k0())return;function R(z$,P$,A$){let R$={jsonrpc:j,id:L.id};if(z$ instanceof o.ResponseError)R$.error=z$.toJson();else R$.result=z$===void 0?null:z$;YZ(R$,P$,A$),Z.write(R$).catch(()=>Q.error("Sending response failed."))}function p(z$,P$,A$){let R$={jsonrpc:j,id:L.id,error:z$.toJson()};YZ(R$,P$,A$),Z.write(R$).catch(()=>Q.error("Sending response failed."))}function u(z$,P$,A$){if(z$===void 0)z$=null;let R$={jsonrpc:j,id:L.id,result:z$};YZ(R$,P$,A$),Z.write(R$).catch(()=>Q.error("Sending response failed."))}$9(L);let L$=O.get(L.method),w$,q$;if(L$)w$=L$.type,q$=L$.handler;let b$=Date.now();if(q$||H){let z$=L.id??String(Date.now()),P$=jY.is(J0.receiver)?J0.receiver.createCancellationTokenSource(z$):J0.receiver.createCancellationTokenSource(L);if(L.id!==null&&h.has(L.id))P$.cancel();if(L.id!==null)d.set(z$,P$);try{let A$;if(q$)if(L.params===void 0){if(w$!==void 0&&w$.numberOfParams!==0){p(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${L.method} defines ${w$.numberOfParams} params but received none.`),L.method,b$);return}A$=q$(P$.token)}else if(Array.isArray(L.params)){if(w$!==void 0&&w$.parameterStructures===o.ParameterStructures.byName){p(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${L.method} defines parameters by name but received parameters by position`),L.method,b$);return}A$=q$(...L.params,P$.token)}else{if(w$!==void 0&&w$.parameterStructures===o.ParameterStructures.byPosition){p(new o.ResponseError(o.ErrorCodes.InvalidParams,`Request ${L.method} defines parameters by position but received parameters by name`),L.method,b$);return}A$=q$(L.params,P$.token)}else if(H)A$=H(L.method,L.params,P$.token);let R$=A$;if(!A$)d.delete(z$),u(A$,L.method,b$);else if(R$.then)R$.then((o$)=>{d.delete(z$),R(o$,L.method,b$)},(o$)=>{if(d.delete(z$),o$ instanceof o.ResponseError)p(o$,L.method,b$);else if(o$&&n$.string(o$.message))p(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${L.method} failed with message: ${o$.message}`),L.method,b$);else p(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${L.method} failed unexpectedly without providing any details.`),L.method,b$)});else d.delete(z$),R(A$,L.method,b$)}catch(A$){if(d.delete(z$),A$ instanceof o.ResponseError)R(A$,L.method,b$);else if(A$&&n$.string(A$.message))p(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${L.method} failed with message: ${A$.message}`),L.method,b$);else p(new o.ResponseError(o.ErrorCodes.InternalError,`Request ${L.method} failed unexpectedly without providing any details.`),L.method,b$)}}else p(new o.ResponseError(o.ErrorCodes.MethodNotFound,`Unhandled method ${L.method}`),L.method,b$)}function WZ(L){if(k0())return;if(L.id===null)if(L.error)Q.error(`Received response message without id: Error is: 
${JSON.stringify(L.error,void 0,4)}`);else Q.error("Received response message without id. No further error information provided.");else{let R=L.id,p=x.get(R);if(bZ(L,p),p!==void 0){x.delete(R);try{if(L.error){let u=L.error;p.reject(new o.ResponseError(u.code,u.message,u.data))}else if(L.result!==void 0)p.resolve(L.result);else throw Error("Should never happen.")}catch(u){if(u.message)Q.error(`Response handler '${p.method}' failed with message: ${u.message}`);else Q.error(`Response handler '${p.method}' failed unexpectedly.`)}}}}function HZ(L){if(k0())return;let R=void 0,p;if(L.method===qJ.type.method){let u=L.params.id;h.delete(u),QZ(L);return}else{let u=U.get(L.method);if(u)p=u.handler,R=u.type}if(p||N)try{if(QZ(L),p)if(L.params===void 0){if(R!==void 0){if(R.numberOfParams!==0&&R.parameterStructures!==o.ParameterStructures.byName)Q.error(`Notification ${L.method} defines ${R.numberOfParams} params but received none.`)}p()}else if(Array.isArray(L.params)){let u=L.params;if(L.method===IJ.type.method&&u.length===2&&j6.is(u[0]))p({token:u[0],value:u[1]});else{if(R!==void 0){if(R.parameterStructures===o.ParameterStructures.byName)Q.error(`Notification ${L.method} defines parameters by name but received parameters by position`);if(R.numberOfParams!==L.params.length)Q.error(`Notification ${L.method} defines ${R.numberOfParams} params but received ${u.length} arguments`)}p(...u)}}else{if(R!==void 0&&R.parameterStructures===o.ParameterStructures.byPosition)Q.error(`Notification ${L.method} defines parameters by position but received parameters by name`);p(L.params)}else if(N)N(L.method,L.params)}catch(u){if(u.message)Q.error(`Notification handler '${L.method}' failed with message: ${u.message}`);else Q.error(`Notification handler '${L.method}' failed unexpectedly.`)}else g$.fire(L)}function DZ(L){if(!L){Q.error("Received empty message.");return}Q.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(L,null,4)}`);let R=L;if(n$.string(R.id)||n$.number(R.id)){let p=R.id,u=x.get(p);if(u)u.reject(Error("The received response has neither a result nor an error property."))}}function Y0(L){if(L===void 0||L===null)return;switch(k){case I$.Verbose:return JSON.stringify(L,null,4);case I$.Compact:return JSON.stringify(L);default:return}}function dZ(L){if(k===I$.Off||!e)return;if(V$===a0.Text){let R=void 0;if((k===I$.Verbose||k===I$.Compact)&&L.params)R=`Params: ${Y0(L.params)}

`;e.log(`Sending request '${L.method} - (${L.id})'.`,R)}else Z0("send-request",L)}function AZ(L){if(k===I$.Off||!e)return;if(V$===a0.Text){let R=void 0;if(k===I$.Verbose||k===I$.Compact)if(L.params)R=`Params: ${Y0(L.params)}

`;else R=`No parameters provided.

`;e.log(`Sending notification '${L.method}'.`,R)}else Z0("send-notification",L)}function YZ(L,R,p){if(k===I$.Off||!e)return;if(V$===a0.Text){let u=void 0;if(k===I$.Verbose||k===I$.Compact){if(L.error&&L.error.data)u=`Error data: ${Y0(L.error.data)}

`;else if(L.result)u=`Result: ${Y0(L.result)}

`;else if(L.error===void 0)u=`No result returned.

`}e.log(`Sending response '${R} - (${L.id})'. Processing request took ${Date.now()-p}ms`,u)}else Z0("send-response",L)}function $9(L){if(k===I$.Off||!e)return;if(V$===a0.Text){let R=void 0;if((k===I$.Verbose||k===I$.Compact)&&L.params)R=`Params: ${Y0(L.params)}

`;e.log(`Received request '${L.method} - (${L.id})'.`,R)}else Z0("receive-request",L)}function QZ(L){if(k===I$.Off||!e||L.method===BY.type.method)return;if(V$===a0.Text){let R=void 0;if(k===I$.Verbose||k===I$.Compact)if(L.params)R=`Params: ${Y0(L.params)}

`;else R=`No parameters provided.

`;e.log(`Received notification '${L.method}'.`,R)}else Z0("receive-notification",L)}function bZ(L,R){if(k===I$.Off||!e)return;if(V$===a0.Text){let p=void 0;if(k===I$.Verbose||k===I$.Compact){if(L.error&&L.error.data)p=`Error data: ${Y0(L.error.data)}

`;else if(L.result)p=`Result: ${Y0(L.result)}

`;else if(L.error===void 0)p=`No result returned.

`}if(R){let u=L.error?` Request failed: ${L.error.message} (${L.error.code}).`:"";e.log(`Received response '${R.method} - (${L.id})' in ${Date.now()-R.timerStart}ms.${u}`,p)}else e.log(`Received response ${L.id} without active response promise.`,p)}else Z0("receive-response",L)}function Z0(L,R){if(!e||k===I$.Off)return;let p={isLSPMessage:!0,type:L,message:R,timestamp:Date.now()};e.log(p)}function L0(){if(f$())throw new c9(TJ.Closed,"Connection is closed.");if(k0())throw new c9(TJ.Disposed,"Connection is disposed.")}function U0(){if(TZ())throw new c9(TJ.AlreadyListening,"Connection is already listening")}function i0(){if(!TZ())throw Error("Call listen() first.")}function v0(L){if(L===void 0)return null;else return L}function RZ(L){if(L===null)return;else return L}function mZ(L){return L!==void 0&&L!==null&&!Array.isArray(L)&&typeof L==="object"}function OZ(L,R){switch(L){case o.ParameterStructures.auto:if(mZ(R))return RZ(R);else return[v0(R)];case o.ParameterStructures.byName:if(!mZ(R))throw Error("Received parameters by name but param is not an object literal.");return RZ(R);case o.ParameterStructures.byPosition:return[v0(R)];default:throw Error(`Unknown parameter structure ${L.toString()}`)}}function uZ(L,R){let p,u=L.numberOfParams;switch(u){case 0:p=void 0;break;case 1:p=OZ(L.parameterStructures,R[0]);break;default:p=[];for(let L$=0;L$<R.length&&L$<u;L$++)p.push(v0(R[L$]));if(R.length<u)for(let L$=R.length;L$<u;L$++)p.push(null);break}return p}let y0={sendNotification:(L,...R)=>{L0();let p,u;if(n$.string(L)){p=L;let w$=R[0],q$=0,b$=o.ParameterStructures.auto;if(o.ParameterStructures.is(w$))q$=1,b$=w$;let z$=R.length,P$=z$-q$;switch(P$){case 0:u=void 0;break;case 1:u=OZ(b$,R[q$]);break;default:if(b$===o.ParameterStructures.byName)throw Error(`Received ${P$} parameters for 'by Name' notification parameter structure.`);u=R.slice(q$,z$).map((A$)=>v0(A$));break}}else{let w$=R;p=L.method,u=uZ(L,w$)}let L$={jsonrpc:j,method:p,params:u};return AZ(L$),Z.write(L$).catch((w$)=>{throw Q.error("Sending notification failed."),w$})},onNotification:(L,R)=>{L0();let p;if(n$.func(L))N=L;else if(R)if(n$.string(L))p=L,U.set(L,{type:void 0,handler:R});else p=L.method,U.set(L.method,{type:L,handler:R});return{dispose:()=>{if(p!==void 0)U.delete(p);else N=void 0}}},onProgress:(L,R,p)=>{if(E.has(R))throw Error(`Progress handler for token ${R} already registered`);return E.set(R,p),{dispose:()=>{E.delete(R)}}},sendProgress:(L,R,p)=>{return y0.sendNotification(IJ.type,{token:R,value:p})},onUnhandledProgress:h$.event,sendRequest:(L,...R)=>{L0(),i0();let p,u,L$=void 0;if(n$.string(L)){p=L;let z$=R[0],P$=R[R.length-1],A$=0,R$=o.ParameterStructures.auto;if(o.ParameterStructures.is(z$))A$=1,R$=z$;let o$=R.length;if(B6.CancellationToken.is(P$))o$=o$-1,L$=P$;let j0=o$-A$;switch(j0){case 0:u=void 0;break;case 1:u=OZ(R$,R[A$]);break;default:if(R$===o.ParameterStructures.byName)throw Error(`Received ${j0} parameters for 'by Name' request parameter structure.`);u=R.slice(A$,o$).map((Z9)=>v0(Z9));break}}else{let z$=R;p=L.method,u=uZ(L,z$);let P$=L.numberOfParams;L$=B6.CancellationToken.is(z$[P$])?z$[P$]:void 0}let w$=X++,q$;if(L$)q$=L$.onCancellationRequested(()=>{let z$=J0.sender.sendCancellation(y0,w$);if(z$===void 0)return Q.log(`Received no promise from cancellation strategy when cancelling id ${w$}`),Promise.resolve();else return z$.catch(()=>{Q.log(`Sending cancellation messages for id ${w$} failed`)})});let b$={jsonrpc:j,id:w$,method:p,params:u};if(dZ(b$),typeof J0.sender.enableCancellation==="function")J0.sender.enableCancellation(b$);return new Promise(async(z$,P$)=>{let A$=(j0)=>{z$(j0),J0.sender.cleanup(w$),q$?.dispose()},R$=(j0)=>{P$(j0),J0.sender.cleanup(w$),q$?.dispose()},o$={method:p,timerStart:Date.now(),resolve:A$,reject:R$};try{await Z.write(b$),x.set(w$,o$)}catch(j0){throw Q.error("Sending request failed."),o$.reject(new o.ResponseError(o.ErrorCodes.MessageWriteError,j0.message?j0.message:"Unknown reason")),j0}})},onRequest:(L,R)=>{L0();let p=null;if(K6.is(L))p=void 0,H=L;else if(n$.string(L)){if(p=null,R!==void 0)p=L,O.set(L,{handler:R,type:void 0})}else if(R!==void 0)p=L.method,O.set(L.method,{type:L,handler:R});return{dispose:()=>{if(p===null)return;if(p!==void 0)O.delete(p);else H=void 0}}},hasPendingResponse:()=>{return x.size>0},trace:async(L,R,p)=>{let u=!1,L$=a0.Text;if(p!==void 0)if(n$.boolean(p))u=p;else u=p.sendNotification||!1,L$=p.traceFormat||a0.Text;if(k=L,V$=L$,k===I$.Off)e=void 0;else e=R;if(u&&!f$()&&!k0())await y0.sendNotification(V6.type,{value:I$.toString(L)})},onError:s.event,onClose:W$.event,onUnhandledNotification:g$.event,onDispose:f0.event,end:()=>{Z.end()},dispose:()=>{if(k0())return;l=UZ.Disposed,f0.fire(void 0);let L=new o.ResponseError(o.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let R of x.values())R.reject(L);if(x=new Map,d=new Map,h=new Set,C=new _Q.LinkedMap,n$.func(Z.dispose))Z.dispose();if(n$.func($.dispose))$.dispose()},listen:()=>{L0(),U0(),l=UZ.Listening,$.listen(eZ)},inspect:()=>{(0,yQ.default)().console.log("inspect")}};return y0.onNotification(BY.type,(L)=>{if(k===I$.Off||!e)return;let R=k===I$.Verbose||k===I$.Compact;e.log(L.message,R?L.verbose:void 0)}),y0.onNotification(IJ.type,(L)=>{let R=E.get(L.token);if(R)R(L.value);else h$.fire(L)}),y0}Y$.createMessageConnection=rK});var AY=D((b)=>{Object.defineProperty(b,"__esModule",{value:!0});b.ProgressType=b.ProgressToken=b.createMessageConnection=b.NullLogger=b.ConnectionOptions=b.ConnectionStrategy=b.AbstractMessageBuffer=b.WriteableStreamMessageWriter=b.AbstractMessageWriter=b.MessageWriter=b.ReadableStreamMessageReader=b.AbstractMessageReader=b.MessageReader=b.SharedArrayReceiverStrategy=b.SharedArraySenderStrategy=b.CancellationToken=b.CancellationTokenSource=b.Emitter=b.Event=b.Disposable=b.LRUCache=b.Touch=b.LinkedMap=b.ParameterStructures=b.NotificationType9=b.NotificationType8=b.NotificationType7=b.NotificationType6=b.NotificationType5=b.NotificationType4=b.NotificationType3=b.NotificationType2=b.NotificationType1=b.NotificationType0=b.NotificationType=b.ErrorCodes=b.ResponseError=b.RequestType9=b.RequestType8=b.RequestType7=b.RequestType6=b.RequestType5=b.RequestType4=b.RequestType3=b.RequestType2=b.RequestType1=b.RequestType0=b.RequestType=b.Message=b.RAL=void 0;b.MessageStrategy=b.CancellationStrategy=b.CancellationSenderStrategy=b.CancellationReceiverStrategy=b.ConnectionError=b.ConnectionErrors=b.LogTraceNotification=b.SetTraceNotification=b.TraceFormat=b.TraceValues=b.Trace=void 0;var k$=n8();Object.defineProperty(b,"Message",{enumerable:!0,get:function(){return k$.Message}});Object.defineProperty(b,"RequestType",{enumerable:!0,get:function(){return k$.RequestType}});Object.defineProperty(b,"RequestType0",{enumerable:!0,get:function(){return k$.RequestType0}});Object.defineProperty(b,"RequestType1",{enumerable:!0,get:function(){return k$.RequestType1}});Object.defineProperty(b,"RequestType2",{enumerable:!0,get:function(){return k$.RequestType2}});Object.defineProperty(b,"RequestType3",{enumerable:!0,get:function(){return k$.RequestType3}});Object.defineProperty(b,"RequestType4",{enumerable:!0,get:function(){return k$.RequestType4}});Object.defineProperty(b,"RequestType5",{enumerable:!0,get:function(){return k$.RequestType5}});Object.defineProperty(b,"RequestType6",{enumerable:!0,get:function(){return k$.RequestType6}});Object.defineProperty(b,"RequestType7",{enumerable:!0,get:function(){return k$.RequestType7}});Object.defineProperty(b,"RequestType8",{enumerable:!0,get:function(){return k$.RequestType8}});Object.defineProperty(b,"RequestType9",{enumerable:!0,get:function(){return k$.RequestType9}});Object.defineProperty(b,"ResponseError",{enumerable:!0,get:function(){return k$.ResponseError}});Object.defineProperty(b,"ErrorCodes",{enumerable:!0,get:function(){return k$.ErrorCodes}});Object.defineProperty(b,"NotificationType",{enumerable:!0,get:function(){return k$.NotificationType}});Object.defineProperty(b,"NotificationType0",{enumerable:!0,get:function(){return k$.NotificationType0}});Object.defineProperty(b,"NotificationType1",{enumerable:!0,get:function(){return k$.NotificationType1}});Object.defineProperty(b,"NotificationType2",{enumerable:!0,get:function(){return k$.NotificationType2}});Object.defineProperty(b,"NotificationType3",{enumerable:!0,get:function(){return k$.NotificationType3}});Object.defineProperty(b,"NotificationType4",{enumerable:!0,get:function(){return k$.NotificationType4}});Object.defineProperty(b,"NotificationType5",{enumerable:!0,get:function(){return k$.NotificationType5}});Object.defineProperty(b,"NotificationType6",{enumerable:!0,get:function(){return k$.NotificationType6}});Object.defineProperty(b,"NotificationType7",{enumerable:!0,get:function(){return k$.NotificationType7}});Object.defineProperty(b,"NotificationType8",{enumerable:!0,get:function(){return k$.NotificationType8}});Object.defineProperty(b,"NotificationType9",{enumerable:!0,get:function(){return k$.NotificationType9}});Object.defineProperty(b,"ParameterStructures",{enumerable:!0,get:function(){return k$.ParameterStructures}});var A6=s8();Object.defineProperty(b,"LinkedMap",{enumerable:!0,get:function(){return A6.LinkedMap}});Object.defineProperty(b,"LRUCache",{enumerable:!0,get:function(){return A6.LRUCache}});Object.defineProperty(b,"Touch",{enumerable:!0,get:function(){return A6.Touch}});var oK=VQ();Object.defineProperty(b,"Disposable",{enumerable:!0,get:function(){return oK.Disposable}});var vQ=d9();Object.defineProperty(b,"Event",{enumerable:!0,get:function(){return vQ.Event}});Object.defineProperty(b,"Emitter",{enumerable:!0,get:function(){return vQ.Emitter}});var gQ=XY();Object.defineProperty(b,"CancellationTokenSource",{enumerable:!0,get:function(){return gQ.CancellationTokenSource}});Object.defineProperty(b,"CancellationToken",{enumerable:!0,get:function(){return gQ.CancellationToken}});var pQ=NQ();Object.defineProperty(b,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return pQ.SharedArraySenderStrategy}});Object.defineProperty(b,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return pQ.SharedArrayReceiverStrategy}});var O6=MQ();Object.defineProperty(b,"MessageReader",{enumerable:!0,get:function(){return O6.MessageReader}});Object.defineProperty(b,"AbstractMessageReader",{enumerable:!0,get:function(){return O6.AbstractMessageReader}});Object.defineProperty(b,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return O6.ReadableStreamMessageReader}});var E6=DQ();Object.defineProperty(b,"MessageWriter",{enumerable:!0,get:function(){return E6.MessageWriter}});Object.defineProperty(b,"AbstractMessageWriter",{enumerable:!0,get:function(){return E6.AbstractMessageWriter}});Object.defineProperty(b,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return E6.WriteableStreamMessageWriter}});var tK=RQ();Object.defineProperty(b,"AbstractMessageBuffer",{enumerable:!0,get:function(){return tK.AbstractMessageBuffer}});var N0=kQ();Object.defineProperty(b,"ConnectionStrategy",{enumerable:!0,get:function(){return N0.ConnectionStrategy}});Object.defineProperty(b,"ConnectionOptions",{enumerable:!0,get:function(){return N0.ConnectionOptions}});Object.defineProperty(b,"NullLogger",{enumerable:!0,get:function(){return N0.NullLogger}});Object.defineProperty(b,"createMessageConnection",{enumerable:!0,get:function(){return N0.createMessageConnection}});Object.defineProperty(b,"ProgressToken",{enumerable:!0,get:function(){return N0.ProgressToken}});Object.defineProperty(b,"ProgressType",{enumerable:!0,get:function(){return N0.ProgressType}});Object.defineProperty(b,"Trace",{enumerable:!0,get:function(){return N0.Trace}});Object.defineProperty(b,"TraceValues",{enumerable:!0,get:function(){return N0.TraceValues}});Object.defineProperty(b,"TraceFormat",{enumerable:!0,get:function(){return N0.TraceFormat}});Object.defineProperty(b,"SetTraceNotification",{enumerable:!0,get:function(){return N0.SetTraceNotification}});Object.defineProperty(b,"LogTraceNotification",{enumerable:!0,get:function(){return N0.LogTraceNotification}});Object.defineProperty(b,"ConnectionErrors",{enumerable:!0,get:function(){return N0.ConnectionErrors}});Object.defineProperty(b,"ConnectionError",{enumerable:!0,get:function(){return N0.ConnectionError}});Object.defineProperty(b,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return N0.CancellationReceiverStrategy}});Object.defineProperty(b,"CancellationSenderStrategy",{enumerable:!0,get:function(){return N0.CancellationSenderStrategy}});Object.defineProperty(b,"CancellationStrategy",{enumerable:!0,get:function(){return N0.CancellationStrategy}});Object.defineProperty(b,"MessageStrategy",{enumerable:!0,get:function(){return N0.MessageStrategy}});var eK=Q9();b.RAL=eK.default});var cQ=D((w6)=>{Object.defineProperty(w6,"__esModule",{value:!0});var dQ=require("util"),lZ=AY();class OY extends lZ.AbstractMessageBuffer{constructor($="utf-8"){super($)}emptyBuffer(){return OY.emptyBuffer}fromString($,Z){return Buffer.from($,Z)}toString($,Z){if($ instanceof Buffer)return $.toString(Z);else return new dQ.TextDecoder(Z).decode($)}asNative($,Z){if(Z===void 0)return $ instanceof Buffer?$:Buffer.from($);else return $ instanceof Buffer?$.slice(0,Z):Buffer.from($,0,Z)}allocNative($){return Buffer.allocUnsafe($)}}OY.emptyBuffer=Buffer.allocUnsafe(0);class mQ{constructor($){this.stream=$}onClose($){return this.stream.on("close",$),lZ.Disposable.create(()=>this.stream.off("close",$))}onError($){return this.stream.on("error",$),lZ.Disposable.create(()=>this.stream.off("error",$))}onEnd($){return this.stream.on("end",$),lZ.Disposable.create(()=>this.stream.off("end",$))}onData($){return this.stream.on("data",$),lZ.Disposable.create(()=>this.stream.off("data",$))}}class uQ{constructor($){this.stream=$}onClose($){return this.stream.on("close",$),lZ.Disposable.create(()=>this.stream.off("close",$))}onError($){return this.stream.on("error",$),lZ.Disposable.create(()=>this.stream.off("error",$))}onEnd($){return this.stream.on("end",$),lZ.Disposable.create(()=>this.stream.off("end",$))}write($,Z){return new Promise((J,Y)=>{let Q=(X)=>{if(X===void 0||X===null)J();else Y(X)};if(typeof $==="string")this.stream.write($,Z,Q);else this.stream.write($,Q)})}end(){this.stream.end()}}var lQ=Object.freeze({messageBuffer:Object.freeze({create:($)=>new OY($)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:($,Z)=>{try{return Promise.resolve(Buffer.from(JSON.stringify($,void 0,0),Z.charset))}catch(J){return Promise.reject(J)}}}),decoder:Object.freeze({name:"application/json",decode:($,Z)=>{try{if($ instanceof Buffer)return Promise.resolve(JSON.parse($.toString(Z.charset)));else return Promise.resolve(JSON.parse(new dQ.TextDecoder(Z.charset).decode($)))}catch(J){return Promise.reject(J)}}})}),stream:Object.freeze({asReadableStream:($)=>new mQ($),asWritableStream:($)=>new uQ($)}),console,timer:Object.freeze({setTimeout($,Z,...J){let Y=setTimeout($,Z,...J);return{dispose:()=>clearTimeout(Y)}},setImmediate($,...Z){let J=setImmediate($,...Z);return{dispose:()=>clearImmediate(J)}},setInterval($,Z,...J){let Y=setInterval($,Z,...J);return{dispose:()=>clearInterval(Y)}}})});function U6(){return lQ}(function($){function Z(){lZ.RAL.install(lQ)}$.install=Z})(U6||(U6={}));w6.default=U6});var P9=D((U$)=>{var $V=U$&&U$.__createBinding||(Object.create?function($,Z,J,Y){if(Y===void 0)Y=J;var Q=Object.getOwnPropertyDescriptor(Z,J);if(!Q||("get"in Q?!Z.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return Z[J]}};Object.defineProperty($,Y,Q)}:function($,Z,J,Y){if(Y===void 0)Y=J;$[Y]=Z[J]}),ZV=U$&&U$.__exportStar||function($,Z){for(var J in $)if(J!=="default"&&!Object.prototype.hasOwnProperty.call(Z,J))$V(Z,$,J)};Object.defineProperty(U$,"__esModule",{value:!0});U$.createMessageConnection=U$.createServerSocketTransport=U$.createClientSocketTransport=U$.createServerPipeTransport=U$.createClientPipeTransport=U$.generateRandomPipeName=U$.StreamMessageWriter=U$.StreamMessageReader=U$.SocketMessageWriter=U$.SocketMessageReader=U$.PortMessageWriter=U$.PortMessageReader=U$.IPCMessageWriter=U$.IPCMessageReader=void 0;var i9=cQ();i9.default.install();var iQ=require("path"),JV=require("os"),YV=require("crypto"),EY=require("net"),s0=AY();ZV(AY(),U$);class aQ extends s0.AbstractMessageReader{constructor($){super();this.process=$;let Z=this.process;Z.on("error",(J)=>this.fireError(J)),Z.on("close",()=>this.fireClose())}listen($){return this.process.on("message",$),s0.Disposable.create(()=>this.process.off("message",$))}}U$.IPCMessageReader=aQ;class sQ extends s0.AbstractMessageWriter{constructor($){super();this.process=$,this.errorCount=0;let Z=this.process;Z.on("error",(J)=>this.fireError(J)),Z.on("close",()=>this.fireClose)}write($){try{if(typeof this.process.send==="function")this.process.send($,void 0,void 0,(Z)=>{if(Z)this.errorCount++,this.handleError(Z,$);else this.errorCount=0});return Promise.resolve()}catch(Z){return this.handleError(Z,$),Promise.reject(Z)}}handleError($,Z){this.errorCount++,this.fireError($,Z,this.errorCount)}end(){}}U$.IPCMessageWriter=sQ;class rQ extends s0.AbstractMessageReader{constructor($){super();this.onData=new s0.Emitter,$.on("close",()=>this.fireClose),$.on("error",(Z)=>this.fireError(Z)),$.on("message",(Z)=>{this.onData.fire(Z)})}listen($){return this.onData.event($)}}U$.PortMessageReader=rQ;class oQ extends s0.AbstractMessageWriter{constructor($){super();this.port=$,this.errorCount=0,$.on("close",()=>this.fireClose()),$.on("error",(Z)=>this.fireError(Z))}write($){try{return this.port.postMessage($),Promise.resolve()}catch(Z){return this.handleError(Z,$),Promise.reject(Z)}}handleError($,Z){this.errorCount++,this.fireError($,Z,this.errorCount)}end(){}}U$.PortMessageWriter=oQ;class n9 extends s0.ReadableStreamMessageReader{constructor($,Z="utf-8"){super((0,i9.default)().stream.asReadableStream($),Z)}}U$.SocketMessageReader=n9;class a9 extends s0.WriteableStreamMessageWriter{constructor($,Z){super((0,i9.default)().stream.asWritableStream($),Z);this.socket=$}dispose(){super.dispose(),this.socket.destroy()}}U$.SocketMessageWriter=a9;class N6 extends s0.ReadableStreamMessageReader{constructor($,Z){super((0,i9.default)().stream.asReadableStream($),Z)}}U$.StreamMessageReader=N6;class L6 extends s0.WriteableStreamMessageWriter{constructor($,Z){super((0,i9.default)().stream.asWritableStream($),Z)}}U$.StreamMessageWriter=L6;var nQ=process.env.XDG_RUNTIME_DIR,QV=new Map([["linux",107],["darwin",103]]);function XV(){let $=(0,YV.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${$}-sock`;let Z;if(nQ)Z=iQ.join(nQ,`vscode-ipc-${$}.sock`);else Z=iQ.join(JV.tmpdir(),`vscode-${$}.sock`);let J=QV.get(process.platform);if(J!==void 0&&Z.length>J)(0,i9.default)().console.warn(`WARNING: IPC handle "${Z}" is longer than ${J} characters.`);return Z}U$.generateRandomPipeName=XV;function zV($,Z="utf-8"){let J,Y=new Promise((Q,X)=>{J=Q});return new Promise((Q,X)=>{let z=(0,EY.createServer)((B)=>{z.close(),J([new n9(B,Z),new a9(B,Z)])});z.on("error",X),z.listen($,()=>{z.removeListener("error",X),Q({onConnected:()=>{return Y}})})})}U$.createClientPipeTransport=zV;function GV($,Z="utf-8"){let J=(0,EY.createConnection)($);return[new n9(J,Z),new a9(J,Z)]}U$.createServerPipeTransport=GV;function BV($,Z="utf-8"){let J,Y=new Promise((Q,X)=>{J=Q});return new Promise((Q,X)=>{let z=(0,EY.createServer)((B)=>{z.close(),J([new n9(B,Z),new a9(B,Z)])});z.on("error",X),z.listen($,"127.0.0.1",()=>{z.removeListener("error",X),Q({onConnected:()=>{return Y}})})})}U$.createClientSocketTransport=BV;function jV($,Z="utf-8"){let J=(0,EY.createConnection)($,"127.0.0.1");return[new n9(J,Z),new a9(J,Z)]}U$.createServerSocketTransport=jV;function KV($){let Z=$;return Z.read!==void 0&&Z.addListener!==void 0}function VV($){let Z=$;return Z.write!==void 0&&Z.addListener!==void 0}function WV($,Z,J,Y){if(!J)J=s0.NullLogger;let Q=KV($)?new N6($):$,X=VV(Z)?new L6(Z):Z;if(s0.ConnectionStrategy.is(Y))Y={connectionStrategy:Y};return(0,s0.createMessageConnection)(Q,X,J,Y)}U$.createMessageConnection=WV});var F6=D((tO,tQ)=>{tQ.exports=P9()});var wY=D((eQ,UY)=>{(function($){if(typeof UY==="object"&&typeof UY.exports==="object"){var Z=$(require,eQ);if(Z!==void 0)UY.exports=Z}else if(typeof define==="function"&&define.amd)define(["require","exports"],$)})(function($,Z){Object.defineProperty(Z,"__esModule",{value:!0}),Z.TextDocument=Z.EOL=Z.WorkspaceFolder=Z.InlineCompletionContext=Z.SelectedCompletionInfo=Z.InlineCompletionTriggerKind=Z.InlineCompletionList=Z.InlineCompletionItem=Z.StringValue=Z.InlayHint=Z.InlayHintLabelPart=Z.InlayHintKind=Z.InlineValueContext=Z.InlineValueEvaluatableExpression=Z.InlineValueVariableLookup=Z.InlineValueText=Z.SemanticTokens=Z.SemanticTokenModifiers=Z.SemanticTokenTypes=Z.SelectionRange=Z.DocumentLink=Z.FormattingOptions=Z.CodeLens=Z.CodeAction=Z.CodeActionContext=Z.CodeActionTriggerKind=Z.CodeActionKind=Z.DocumentSymbol=Z.WorkspaceSymbol=Z.SymbolInformation=Z.SymbolTag=Z.SymbolKind=Z.DocumentHighlight=Z.DocumentHighlightKind=Z.SignatureInformation=Z.ParameterInformation=Z.Hover=Z.MarkedString=Z.CompletionList=Z.CompletionItem=Z.CompletionItemLabelDetails=Z.InsertTextMode=Z.InsertReplaceEdit=Z.CompletionItemTag=Z.InsertTextFormat=Z.CompletionItemKind=Z.MarkupContent=Z.MarkupKind=Z.TextDocumentItem=Z.OptionalVersionedTextDocumentIdentifier=Z.VersionedTextDocumentIdentifier=Z.TextDocumentIdentifier=Z.WorkspaceChange=Z.WorkspaceEdit=Z.DeleteFile=Z.RenameFile=Z.CreateFile=Z.TextDocumentEdit=Z.AnnotatedTextEdit=Z.ChangeAnnotationIdentifier=Z.ChangeAnnotation=Z.TextEdit=Z.Command=Z.Diagnostic=Z.CodeDescription=Z.DiagnosticTag=Z.DiagnosticSeverity=Z.DiagnosticRelatedInformation=Z.FoldingRange=Z.FoldingRangeKind=Z.ColorPresentation=Z.ColorInformation=Z.Color=Z.LocationLink=Z.Location=Z.Range=Z.Position=Z.uinteger=Z.integer=Z.URI=Z.DocumentUri=void 0;var J;(function(W){function F(P){return typeof P==="string"}W.is=F})(J||(Z.DocumentUri=J={}));var Y;(function(W){function F(P){return typeof P==="string"}W.is=F})(Y||(Z.URI=Y={}));var Q;(function(W){W.MIN_VALUE=-2147483648,W.MAX_VALUE=2147483647;function F(P){return typeof P==="number"&&W.MIN_VALUE<=P&&P<=W.MAX_VALUE}W.is=F})(Q||(Z.integer=Q={}));var X;(function(W){W.MIN_VALUE=0,W.MAX_VALUE=2147483647;function F(P){return typeof P==="number"&&W.MIN_VALUE<=P&&P<=W.MAX_VALUE}W.is=F})(X||(Z.uinteger=X={}));var z;(function(W){function F(A,K){if(A===Number.MAX_VALUE)A=X.MAX_VALUE;if(K===Number.MAX_VALUE)K=X.MAX_VALUE;return{line:A,character:K}}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&I.uinteger(K.line)&&I.uinteger(K.character)}W.is=P})(z||(Z.Position=z={}));var B;(function(W){function F(A,K,q,y){if(I.uinteger(A)&&I.uinteger(K)&&I.uinteger(q)&&I.uinteger(y))return{start:z.create(A,K),end:z.create(q,y)};else if(z.is(A)&&z.is(K))return{start:A,end:K};else throw Error("Range#create called with invalid arguments[".concat(A,", ").concat(K,", ").concat(q,", ").concat(y,"]"))}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&z.is(K.start)&&z.is(K.end)}W.is=P})(B||(Z.Range=B={}));var j;(function(W){function F(A,K){return{uri:A,range:K}}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&B.is(K.range)&&(I.string(K.uri)||I.undefined(K.uri))}W.is=P})(j||(Z.Location=j={}));var H;(function(W){function F(A,K,q,y){return{targetUri:A,targetRange:K,targetSelectionRange:q,originSelectionRange:y}}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&B.is(K.targetRange)&&I.string(K.targetUri)&&B.is(K.targetSelectionRange)&&(B.is(K.originSelectionRange)||I.undefined(K.originSelectionRange))}W.is=P})(H||(Z.LocationLink=H={}));var O;(function(W){function F(A,K,q,y){return{red:A,green:K,blue:q,alpha:y}}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&I.numberRange(K.red,0,1)&&I.numberRange(K.green,0,1)&&I.numberRange(K.blue,0,1)&&I.numberRange(K.alpha,0,1)}W.is=P})(O||(Z.Color=O={}));var N;(function(W){function F(A,K){return{range:A,color:K}}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&B.is(K.range)&&O.is(K.color)}W.is=P})(N||(Z.ColorInformation=N={}));var U;(function(W){function F(A,K,q){return{label:A,textEdit:K,additionalTextEdits:q}}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&I.string(K.label)&&(I.undefined(K.textEdit)||e.is(K))&&(I.undefined(K.additionalTextEdits)||I.typedArray(K.additionalTextEdits,e.is))}W.is=P})(U||(Z.ColorPresentation=U={}));var E;(function(W){W.Comment="comment",W.Imports="imports",W.Region="region"})(E||(Z.FoldingRangeKind=E={}));var T;(function(W){function F(A,K,q,y,$$,p$){var y$={startLine:A,endLine:K};if(I.defined(q))y$.startCharacter=q;if(I.defined(y))y$.endCharacter=y;if(I.defined($$))y$.kind=$$;if(I.defined(p$))y$.collapsedText=p$;return y$}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&I.uinteger(K.startLine)&&I.uinteger(K.startLine)&&(I.undefined(K.startCharacter)||I.uinteger(K.startCharacter))&&(I.undefined(K.endCharacter)||I.uinteger(K.endCharacter))&&(I.undefined(K.kind)||I.string(K.kind))}W.is=P})(T||(Z.FoldingRange=T={}));var C;(function(W){function F(A,K){return{location:A,message:K}}W.create=F;function P(A){var K=A;return I.defined(K)&&j.is(K.location)&&I.string(K.message)}W.is=P})(C||(Z.DiagnosticRelatedInformation=C={}));var x;(function(W){W.Error=1,W.Warning=2,W.Information=3,W.Hint=4})(x||(Z.DiagnosticSeverity=x={}));var h;(function(W){W.Unnecessary=1,W.Deprecated=2})(h||(Z.DiagnosticTag=h={}));var d;(function(W){function F(P){var A=P;return I.objectLiteral(A)&&I.string(A.href)}W.is=F})(d||(Z.CodeDescription=d={}));var k;(function(W){function F(A,K,q,y,$$,p$){var y$={range:A,message:K};if(I.defined(q))y$.severity=q;if(I.defined(y))y$.code=y;if(I.defined($$))y$.source=$$;if(I.defined(p$))y$.relatedInformation=p$;return y$}W.create=F;function P(A){var K,q=A;return I.defined(q)&&B.is(q.range)&&I.string(q.message)&&(I.number(q.severity)||I.undefined(q.severity))&&(I.integer(q.code)||I.string(q.code)||I.undefined(q.code))&&(I.undefined(q.codeDescription)||I.string((K=q.codeDescription)===null||K===void 0?void 0:K.href))&&(I.string(q.source)||I.undefined(q.source))&&(I.undefined(q.relatedInformation)||I.typedArray(q.relatedInformation,C.is))}W.is=P})(k||(Z.Diagnostic=k={}));var V$;(function(W){function F(A,K){var q=[];for(var y=2;y<arguments.length;y++)q[y-2]=arguments[y];var $$={title:A,command:K};if(I.defined(q)&&q.length>0)$$.arguments=q;return $$}W.create=F;function P(A){var K=A;return I.defined(K)&&I.string(K.title)&&I.string(K.command)}W.is=P})(V$||(Z.Command=V$={}));var e;(function(W){function F(q,y){return{range:q,newText:y}}W.replace=F;function P(q,y){return{range:{start:q,end:q},newText:y}}W.insert=P;function A(q){return{range:q,newText:""}}W.del=A;function K(q){var y=q;return I.objectLiteral(y)&&I.string(y.newText)&&B.is(y.range)}W.is=K})(e||(Z.TextEdit=e={}));var l;(function(W){function F(A,K,q){var y={label:A};if(K!==void 0)y.needsConfirmation=K;if(q!==void 0)y.description=q;return y}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&I.string(K.label)&&(I.boolean(K.needsConfirmation)||K.needsConfirmation===void 0)&&(I.string(K.description)||K.description===void 0)}W.is=P})(l||(Z.ChangeAnnotation=l={}));var s;(function(W){function F(P){var A=P;return I.string(A)}W.is=F})(s||(Z.ChangeAnnotationIdentifier=s={}));var W$;(function(W){function F(q,y,$$){return{range:q,newText:y,annotationId:$$}}W.replace=F;function P(q,y,$$){return{range:{start:q,end:q},newText:y,annotationId:$$}}W.insert=P;function A(q,y){return{range:q,newText:"",annotationId:y}}W.del=A;function K(q){var y=q;return e.is(y)&&(l.is(y.annotationId)||s.is(y.annotationId))}W.is=K})(W$||(Z.AnnotatedTextEdit=W$={}));var g$;(function(W){function F(A,K){return{textDocument:A,edits:K}}W.create=F;function P(A){var K=A;return I.defined(K)&&f$.is(K.textDocument)&&Array.isArray(K.edits)}W.is=P})(g$||(Z.TextDocumentEdit=g$={}));var h$;(function(W){function F(A,K,q){var y={kind:"create",uri:A};if(K!==void 0&&(K.overwrite!==void 0||K.ignoreIfExists!==void 0))y.options=K;if(q!==void 0)y.annotationId=q;return y}W.create=F;function P(A){var K=A;return K&&K.kind==="create"&&I.string(K.uri)&&(K.options===void 0||(K.options.overwrite===void 0||I.boolean(K.options.overwrite))&&(K.options.ignoreIfExists===void 0||I.boolean(K.options.ignoreIfExists)))&&(K.annotationId===void 0||s.is(K.annotationId))}W.is=P})(h$||(Z.CreateFile=h$={}));var f0;(function(W){function F(A,K,q,y){var $$={kind:"rename",oldUri:A,newUri:K};if(q!==void 0&&(q.overwrite!==void 0||q.ignoreIfExists!==void 0))$$.options=q;if(y!==void 0)$$.annotationId=y;return $$}W.create=F;function P(A){var K=A;return K&&K.kind==="rename"&&I.string(K.oldUri)&&I.string(K.newUri)&&(K.options===void 0||(K.options.overwrite===void 0||I.boolean(K.options.overwrite))&&(K.options.ignoreIfExists===void 0||I.boolean(K.options.ignoreIfExists)))&&(K.annotationId===void 0||s.is(K.annotationId))}W.is=P})(f0||(Z.RenameFile=f0={}));var J0;(function(W){function F(A,K,q){var y={kind:"delete",uri:A};if(K!==void 0&&(K.recursive!==void 0||K.ignoreIfNotExists!==void 0))y.options=K;if(q!==void 0)y.annotationId=q;return y}W.create=F;function P(A){var K=A;return K&&K.kind==="delete"&&I.string(K.uri)&&(K.options===void 0||(K.options.recursive===void 0||I.boolean(K.options.recursive))&&(K.options.ignoreIfNotExists===void 0||I.boolean(K.options.ignoreIfNotExists)))&&(K.annotationId===void 0||s.is(K.annotationId))}W.is=P})(J0||(Z.DeleteFile=J0={}));var JZ;(function(W){function F(P){var A=P;return A&&(A.changes!==void 0||A.documentChanges!==void 0)&&(A.documentChanges===void 0||A.documentChanges.every(function(K){if(I.string(K.kind))return h$.is(K)||f0.is(K)||J0.is(K);else return g$.is(K)}))}W.is=F})(JZ||(Z.WorkspaceEdit=JZ={}));var O0=function(){function W(F,P){this.edits=F,this.changeAnnotations=P}return W.prototype.insert=function(F,P,A){var K,q;if(A===void 0)K=e.insert(F,P);else if(s.is(A))q=A,K=W$.insert(F,P,A);else this.assertChangeAnnotations(this.changeAnnotations),q=this.changeAnnotations.manage(A),K=W$.insert(F,P,q);if(this.edits.push(K),q!==void 0)return q},W.prototype.replace=function(F,P,A){var K,q;if(A===void 0)K=e.replace(F,P);else if(s.is(A))q=A,K=W$.replace(F,P,A);else this.assertChangeAnnotations(this.changeAnnotations),q=this.changeAnnotations.manage(A),K=W$.replace(F,P,q);if(this.edits.push(K),q!==void 0)return q},W.prototype.delete=function(F,P){var A,K;if(P===void 0)A=e.del(F);else if(s.is(P))K=P,A=W$.del(F,P);else this.assertChangeAnnotations(this.changeAnnotations),K=this.changeAnnotations.manage(P),A=W$.del(F,K);if(this.edits.push(A),K!==void 0)return K},W.prototype.add=function(F){this.edits.push(F)},W.prototype.all=function(){return this.edits},W.prototype.clear=function(){this.edits.splice(0,this.edits.length)},W.prototype.assertChangeAnnotations=function(F){if(F===void 0)throw Error("Text edit change is not configured to manage change annotations.")},W}(),b0=function(){function W(F){this._annotations=F===void 0?Object.create(null):F,this._counter=0,this._size=0}return W.prototype.all=function(){return this._annotations},Object.defineProperty(W.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),W.prototype.manage=function(F,P){var A;if(s.is(F))A=F;else A=this.nextId(),P=F;if(this._annotations[A]!==void 0)throw Error("Id ".concat(A," is already in use."));if(P===void 0)throw Error("No annotation provided for id ".concat(A));return this._annotations[A]=P,this._size++,A},W.prototype.nextId=function(){return this._counter++,this._counter.toString()},W}(),B0=function(){function W(F){var P=this;if(this._textEditChanges=Object.create(null),F!==void 0){if(this._workspaceEdit=F,F.documentChanges)this._changeAnnotations=new b0(F.changeAnnotations),F.changeAnnotations=this._changeAnnotations.all(),F.documentChanges.forEach(function(A){if(g$.is(A)){var K=new O0(A.edits,P._changeAnnotations);P._textEditChanges[A.textDocument.uri]=K}});else if(F.changes)Object.keys(F.changes).forEach(function(A){var K=new O0(F.changes[A]);P._textEditChanges[A]=K})}else this._workspaceEdit={}}return Object.defineProperty(W.prototype,"edit",{get:function(){if(this.initDocumentChanges(),this._changeAnnotations!==void 0)if(this._changeAnnotations.size===0)this._workspaceEdit.changeAnnotations=void 0;else this._workspaceEdit.changeAnnotations=this._changeAnnotations.all();return this._workspaceEdit},enumerable:!1,configurable:!0}),W.prototype.getTextEditChange=function(F){if(f$.is(F)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var P={uri:F.uri,version:F.version},A=this._textEditChanges[P.uri];if(!A){var K=[],q={textDocument:P,edits:K};this._workspaceEdit.documentChanges.push(q),A=new O0(K,this._changeAnnotations),this._textEditChanges[P.uri]=A}return A}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw Error("Workspace edit is not configured for normal text edit changes.");var A=this._textEditChanges[F];if(!A){var K=[];this._workspaceEdit.changes[F]=K,A=new O0(K),this._textEditChanges[F]=A}return A}},W.prototype.initDocumentChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0)this._changeAnnotations=new b0,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()},W.prototype.initChanges=function(){if(this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0)this._workspaceEdit.changes=Object.create(null)},W.prototype.createFile=function(F,P,A){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var K;if(l.is(P)||s.is(P))K=P;else A=P;var q,y;if(K===void 0)q=h$.create(F,A);else y=s.is(K)?K:this._changeAnnotations.manage(K),q=h$.create(F,A,y);if(this._workspaceEdit.documentChanges.push(q),y!==void 0)return y},W.prototype.renameFile=function(F,P,A,K){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var q;if(l.is(A)||s.is(A))q=A;else K=A;var y,$$;if(q===void 0)y=f0.create(F,P,K);else $$=s.is(q)?q:this._changeAnnotations.manage(q),y=f0.create(F,P,K,$$);if(this._workspaceEdit.documentChanges.push(y),$$!==void 0)return $$},W.prototype.deleteFile=function(F,P,A){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw Error("Workspace edit is not configured for document changes.");var K;if(l.is(P)||s.is(P))K=P;else A=P;var q,y;if(K===void 0)q=J0.create(F,A);else y=s.is(K)?K:this._changeAnnotations.manage(K),q=J0.create(F,A,y);if(this._workspaceEdit.documentChanges.push(q),y!==void 0)return y},W}();Z.WorkspaceChange=B0;var gZ;(function(W){function F(A){return{uri:A}}W.create=F;function P(A){var K=A;return I.defined(K)&&I.string(K.uri)}W.is=P})(gZ||(Z.TextDocumentIdentifier=gZ={}));var TZ;(function(W){function F(A,K){return{uri:A,version:K}}W.create=F;function P(A){var K=A;return I.defined(K)&&I.string(K.uri)&&I.integer(K.version)}W.is=P})(TZ||(Z.VersionedTextDocumentIdentifier=TZ={}));var f$;(function(W){function F(A,K){return{uri:A,version:K}}W.create=F;function P(A){var K=A;return I.defined(K)&&I.string(K.uri)&&(K.version===null||I.integer(K.version))}W.is=P})(f$||(Z.OptionalVersionedTextDocumentIdentifier=f$={}));var k0;(function(W){function F(A,K,q,y){return{uri:A,languageId:K,version:q,text:y}}W.create=F;function P(A){var K=A;return I.defined(K)&&I.string(K.uri)&&I.string(K.languageId)&&I.integer(K.version)&&I.string(K.text)}W.is=P})(k0||(Z.TextDocumentItem=k0={}));var R0;(function(W){W.PlainText="plaintext",W.Markdown="markdown";function F(P){var A=P;return A===W.PlainText||A===W.Markdown}W.is=F})(R0||(Z.MarkupKind=R0={}));var E0;(function(W){function F(P){var A=P;return I.objectLiteral(P)&&R0.is(A.kind)&&I.string(A.value)}W.is=F})(E0||(Z.MarkupContent=E0={}));var tZ;(function(W){W.Text=1,W.Method=2,W.Function=3,W.Constructor=4,W.Field=5,W.Variable=6,W.Class=7,W.Interface=8,W.Module=9,W.Property=10,W.Unit=11,W.Value=12,W.Enum=13,W.Keyword=14,W.Snippet=15,W.Color=16,W.File=17,W.Reference=18,W.Folder=19,W.EnumMember=20,W.Constant=21,W.Struct=22,W.Event=23,W.Operator=24,W.TypeParameter=25})(tZ||(Z.CompletionItemKind=tZ={}));var qZ;(function(W){W.PlainText=1,W.Snippet=2})(qZ||(Z.InsertTextFormat=qZ={}));var CZ;(function(W){W.Deprecated=1})(CZ||(Z.CompletionItemTag=CZ={}));var pZ;(function(W){function F(A,K,q){return{newText:A,insert:K,replace:q}}W.create=F;function P(A){var K=A;return K&&I.string(K.newText)&&B.is(K.insert)&&B.is(K.replace)}W.is=P})(pZ||(Z.InsertReplaceEdit=pZ={}));var eZ;(function(W){W.asIs=1,W.adjustIndentation=2})(eZ||(Z.InsertTextMode=eZ={}));var SZ;(function(W){function F(P){var A=P;return A&&(I.string(A.detail)||A.detail===void 0)&&(I.string(A.description)||A.description===void 0)}W.is=F})(SZ||(Z.CompletionItemLabelDetails=SZ={}));var WZ;(function(W){function F(P){return{label:P}}W.create=F})(WZ||(Z.CompletionItem=WZ={}));var HZ;(function(W){function F(P,A){return{items:P?P:[],isIncomplete:!!A}}W.create=F})(HZ||(Z.CompletionList=HZ={}));var DZ;(function(W){function F(A){return A.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}W.fromPlainText=F;function P(A){var K=A;return I.string(K)||I.objectLiteral(K)&&I.string(K.language)&&I.string(K.value)}W.is=P})(DZ||(Z.MarkedString=DZ={}));var Y0;(function(W){function F(P){var A=P;return!!A&&I.objectLiteral(A)&&(E0.is(A.contents)||DZ.is(A.contents)||I.typedArray(A.contents,DZ.is))&&(P.range===void 0||B.is(P.range))}W.is=F})(Y0||(Z.Hover=Y0={}));var dZ;(function(W){function F(P,A){return A?{label:P,documentation:A}:{label:P}}W.create=F})(dZ||(Z.ParameterInformation=dZ={}));var AZ;(function(W){function F(P,A){var K=[];for(var q=2;q<arguments.length;q++)K[q-2]=arguments[q];var y={label:P};if(I.defined(A))y.documentation=A;if(I.defined(K))y.parameters=K;else y.parameters=[];return y}W.create=F})(AZ||(Z.SignatureInformation=AZ={}));var YZ;(function(W){W.Text=1,W.Read=2,W.Write=3})(YZ||(Z.DocumentHighlightKind=YZ={}));var $9;(function(W){function F(P,A){var K={range:P};if(I.number(A))K.kind=A;return K}W.create=F})($9||(Z.DocumentHighlight=$9={}));var QZ;(function(W){W.File=1,W.Module=2,W.Namespace=3,W.Package=4,W.Class=5,W.Method=6,W.Property=7,W.Field=8,W.Constructor=9,W.Enum=10,W.Interface=11,W.Function=12,W.Variable=13,W.Constant=14,W.String=15,W.Number=16,W.Boolean=17,W.Array=18,W.Object=19,W.Key=20,W.Null=21,W.EnumMember=22,W.Struct=23,W.Event=24,W.Operator=25,W.TypeParameter=26})(QZ||(Z.SymbolKind=QZ={}));var bZ;(function(W){W.Deprecated=1})(bZ||(Z.SymbolTag=bZ={}));var Z0;(function(W){function F(P,A,K,q,y){var $$={name:P,kind:A,location:{uri:q,range:K}};if(y)$$.containerName=y;return $$}W.create=F})(Z0||(Z.SymbolInformation=Z0={}));var L0;(function(W){function F(P,A,K,q){return q!==void 0?{name:P,kind:A,location:{uri:K,range:q}}:{name:P,kind:A,location:{uri:K}}}W.create=F})(L0||(Z.WorkspaceSymbol=L0={}));var U0;(function(W){function F(A,K,q,y,$$,p$){var y$={name:A,detail:K,kind:q,range:y,selectionRange:$$};if(p$!==void 0)y$.children=p$;return y$}W.create=F;function P(A){var K=A;return K&&I.string(K.name)&&I.number(K.kind)&&B.is(K.range)&&B.is(K.selectionRange)&&(K.detail===void 0||I.string(K.detail))&&(K.deprecated===void 0||I.boolean(K.deprecated))&&(K.children===void 0||Array.isArray(K.children))&&(K.tags===void 0||Array.isArray(K.tags))}W.is=P})(U0||(Z.DocumentSymbol=U0={}));var i0;(function(W){W.Empty="",W.QuickFix="quickfix",W.Refactor="refactor",W.RefactorExtract="refactor.extract",W.RefactorInline="refactor.inline",W.RefactorRewrite="refactor.rewrite",W.Source="source",W.SourceOrganizeImports="source.organizeImports",W.SourceFixAll="source.fixAll"})(i0||(Z.CodeActionKind=i0={}));var v0;(function(W){W.Invoked=1,W.Automatic=2})(v0||(Z.CodeActionTriggerKind=v0={}));var RZ;(function(W){function F(A,K,q){var y={diagnostics:A};if(K!==void 0&&K!==null)y.only=K;if(q!==void 0&&q!==null)y.triggerKind=q;return y}W.create=F;function P(A){var K=A;return I.defined(K)&&I.typedArray(K.diagnostics,k.is)&&(K.only===void 0||I.typedArray(K.only,I.string))&&(K.triggerKind===void 0||K.triggerKind===v0.Invoked||K.triggerKind===v0.Automatic)}W.is=P})(RZ||(Z.CodeActionContext=RZ={}));var mZ;(function(W){function F(A,K,q){var y={title:A},$$=!0;if(typeof K==="string")$$=!1,y.kind=K;else if(V$.is(K))y.command=K;else y.edit=K;if($$&&q!==void 0)y.kind=q;return y}W.create=F;function P(A){var K=A;return K&&I.string(K.title)&&(K.diagnostics===void 0||I.typedArray(K.diagnostics,k.is))&&(K.kind===void 0||I.string(K.kind))&&(K.edit!==void 0||K.command!==void 0)&&(K.command===void 0||V$.is(K.command))&&(K.isPreferred===void 0||I.boolean(K.isPreferred))&&(K.edit===void 0||JZ.is(K.edit))}W.is=P})(mZ||(Z.CodeAction=mZ={}));var OZ;(function(W){function F(A,K){var q={range:A};if(I.defined(K))q.data=K;return q}W.create=F;function P(A){var K=A;return I.defined(K)&&B.is(K.range)&&(I.undefined(K.command)||V$.is(K.command))}W.is=P})(OZ||(Z.CodeLens=OZ={}));var uZ;(function(W){function F(A,K){return{tabSize:A,insertSpaces:K}}W.create=F;function P(A){var K=A;return I.defined(K)&&I.uinteger(K.tabSize)&&I.boolean(K.insertSpaces)}W.is=P})(uZ||(Z.FormattingOptions=uZ={}));var y0;(function(W){function F(A,K,q){return{range:A,target:K,data:q}}W.create=F;function P(A){var K=A;return I.defined(K)&&B.is(K.range)&&(I.undefined(K.target)||I.string(K.target))}W.is=P})(y0||(Z.DocumentLink=y0={}));var L;(function(W){function F(A,K){return{range:A,parent:K}}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&B.is(K.range)&&(K.parent===void 0||W.is(K.parent))}W.is=P})(L||(Z.SelectionRange=L={}));var R;(function(W){W.namespace="namespace",W.type="type",W.class="class",W.enum="enum",W.interface="interface",W.struct="struct",W.typeParameter="typeParameter",W.parameter="parameter",W.variable="variable",W.property="property",W.enumMember="enumMember",W.event="event",W.function="function",W.method="method",W.macro="macro",W.keyword="keyword",W.modifier="modifier",W.comment="comment",W.string="string",W.number="number",W.regexp="regexp",W.operator="operator",W.decorator="decorator"})(R||(Z.SemanticTokenTypes=R={}));var p;(function(W){W.declaration="declaration",W.definition="definition",W.readonly="readonly",W.static="static",W.deprecated="deprecated",W.abstract="abstract",W.async="async",W.modification="modification",W.documentation="documentation",W.defaultLibrary="defaultLibrary"})(p||(Z.SemanticTokenModifiers=p={}));var u;(function(W){function F(P){var A=P;return I.objectLiteral(A)&&(A.resultId===void 0||typeof A.resultId==="string")&&Array.isArray(A.data)&&(A.data.length===0||typeof A.data[0]==="number")}W.is=F})(u||(Z.SemanticTokens=u={}));var L$;(function(W){function F(A,K){return{range:A,text:K}}W.create=F;function P(A){var K=A;return K!==void 0&&K!==null&&B.is(K.range)&&I.string(K.text)}W.is=P})(L$||(Z.InlineValueText=L$={}));var w$;(function(W){function F(A,K,q){return{range:A,variableName:K,caseSensitiveLookup:q}}W.create=F;function P(A){var K=A;return K!==void 0&&K!==null&&B.is(K.range)&&I.boolean(K.caseSensitiveLookup)&&(I.string(K.variableName)||K.variableName===void 0)}W.is=P})(w$||(Z.InlineValueVariableLookup=w$={}));var q$;(function(W){function F(A,K){return{range:A,expression:K}}W.create=F;function P(A){var K=A;return K!==void 0&&K!==null&&B.is(K.range)&&(I.string(K.expression)||K.expression===void 0)}W.is=P})(q$||(Z.InlineValueEvaluatableExpression=q$={}));var b$;(function(W){function F(A,K){return{frameId:A,stoppedLocation:K}}W.create=F;function P(A){var K=A;return I.defined(K)&&B.is(A.stoppedLocation)}W.is=P})(b$||(Z.InlineValueContext=b$={}));var z$;(function(W){W.Type=1,W.Parameter=2;function F(P){return P===1||P===2}W.is=F})(z$||(Z.InlayHintKind=z$={}));var P$;(function(W){function F(A){return{value:A}}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&(K.tooltip===void 0||I.string(K.tooltip)||E0.is(K.tooltip))&&(K.location===void 0||j.is(K.location))&&(K.command===void 0||V$.is(K.command))}W.is=P})(P$||(Z.InlayHintLabelPart=P$={}));var A$;(function(W){function F(A,K,q){var y={position:A,label:K};if(q!==void 0)y.kind=q;return y}W.create=F;function P(A){var K=A;return I.objectLiteral(K)&&z.is(K.position)&&(I.string(K.label)||I.typedArray(K.label,P$.is))&&(K.kind===void 0||z$.is(K.kind))&&K.textEdits===void 0||I.typedArray(K.textEdits,e.is)&&(K.tooltip===void 0||I.string(K.tooltip)||E0.is(K.tooltip))&&(K.paddingLeft===void 0||I.boolean(K.paddingLeft))&&(K.paddingRight===void 0||I.boolean(K.paddingRight))}W.is=P})(A$||(Z.InlayHint=A$={}));var R$;(function(W){function F(P){return{kind:"snippet",value:P}}W.createSnippet=F})(R$||(Z.StringValue=R$={}));var o$;(function(W){function F(P,A,K,q){return{insertText:P,filterText:A,range:K,command:q}}W.create=F})(o$||(Z.InlineCompletionItem=o$={}));var j0;(function(W){function F(P){return{items:P}}W.create=F})(j0||(Z.InlineCompletionList=j0={}));var Z9;(function(W){W.Invoked=0,W.Automatic=1})(Z9||(Z.InlineCompletionTriggerKind=Z9={}));var J9;(function(W){function F(P,A){return{range:P,text:A}}W.create=F})(J9||(Z.SelectedCompletionInfo=J9={}));var V;(function(W){function F(P,A){return{triggerKind:P,selectedCompletionInfo:A}}W.create=F})(V||(Z.InlineCompletionContext=V={}));var S;(function(W){function F(P){var A=P;return I.objectLiteral(A)&&Y.is(A.uri)&&I.string(A.name)}W.is=F})(S||(Z.WorkspaceFolder=S={})),Z.EOL=[`
`,`\r
`,"\r"];var n;(function(W){function F(q,y,$$,p$){return new M$(q,y,$$,p$)}W.create=F;function P(q){var y=q;return I.defined(y)&&I.string(y.uri)&&(I.undefined(y.languageId)||I.string(y.languageId))&&I.uinteger(y.lineCount)&&I.func(y.getText)&&I.func(y.positionAt)&&I.func(y.offsetAt)?!0:!1}W.is=P;function A(q,y){var $$=q.getText(),p$=K(y,function(yZ,G){var M=yZ.range.start.line-G.range.start.line;if(M===0)return yZ.range.start.character-G.range.start.character;return M}),y$=$$.length;for(var g0=p$.length-1;g0>=0;g0--){var n0=p$[g0],EZ=q.offsetAt(n0.range.start),H$=q.offsetAt(n0.range.end);if(H$<=y$)$$=$$.substring(0,EZ)+n0.newText+$$.substring(H$,$$.length);else throw Error("Overlapping edit");y$=EZ}return $$}W.applyEdits=A;function K(q,y){if(q.length<=1)return q;var $$=q.length/2|0,p$=q.slice(0,$$),y$=q.slice($$);K(p$,y),K(y$,y);var g0=0,n0=0,EZ=0;while(g0<p$.length&&n0<y$.length){var H$=y(p$[g0],y$[n0]);if(H$<=0)q[EZ++]=p$[g0++];else q[EZ++]=y$[n0++]}while(g0<p$.length)q[EZ++]=p$[g0++];while(n0<y$.length)q[EZ++]=y$[n0++];return q}})(n||(Z.TextDocument=n={}));var M$=function(){function W(F,P,A,K){this._uri=F,this._languageId=P,this._version=A,this._content=K,this._lineOffsets=void 0}return Object.defineProperty(W.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(W.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),W.prototype.getText=function(F){if(F){var P=this.offsetAt(F.start),A=this.offsetAt(F.end);return this._content.substring(P,A)}return this._content},W.prototype.update=function(F,P){this._content=F.text,this._version=P,this._lineOffsets=void 0},W.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){var F=[],P=this._content,A=!0;for(var K=0;K<P.length;K++){if(A)F.push(K),A=!1;var q=P.charAt(K);if(A=q==="\r"||q===`
`,q==="\r"&&K+1<P.length&&P.charAt(K+1)===`
`)K++}if(A&&P.length>0)F.push(P.length);this._lineOffsets=F}return this._lineOffsets},W.prototype.positionAt=function(F){F=Math.max(Math.min(F,this._content.length),0);var P=this.getLineOffsets(),A=0,K=P.length;if(K===0)return z.create(0,F);while(A<K){var q=Math.floor((A+K)/2);if(P[q]>F)K=q;else A=q+1}var y=A-1;return z.create(y,F-P[y])},W.prototype.offsetAt=function(F){var P=this.getLineOffsets();if(F.line>=P.length)return this._content.length;else if(F.line<0)return 0;var A=P[F.line],K=F.line+1<P.length?P[F.line+1]:this._content.length;return Math.max(Math.min(A+F.character,K),A)},Object.defineProperty(W.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),W}(),I;(function(W){var F=Object.prototype.toString;function P(H$){return typeof H$<"u"}W.defined=P;function A(H$){return typeof H$>"u"}W.undefined=A;function K(H$){return H$===!0||H$===!1}W.boolean=K;function q(H$){return F.call(H$)==="[object String]"}W.string=q;function y(H$){return F.call(H$)==="[object Number]"}W.number=y;function $$(H$,yZ,G){return F.call(H$)==="[object Number]"&&yZ<=H$&&H$<=G}W.numberRange=$$;function p$(H$){return F.call(H$)==="[object Number]"&&-2147483648<=H$&&H$<=2147483647}W.integer=p$;function y$(H$){return F.call(H$)==="[object Number]"&&0<=H$&&H$<=2147483647}W.uinteger=y$;function g0(H$){return F.call(H$)==="[object Function]"}W.func=g0;function n0(H$){return H$!==null&&typeof H$==="object"}W.objectLiteral=n0;function EZ(H$,yZ){return Array.isArray(H$)&&H$.every(yZ)}W.typedArray=EZ})(I||(I={}))})});var u$=D((p0)=>{Object.defineProperty(p0,"__esModule",{value:!0});p0.ProtocolNotificationType=p0.ProtocolNotificationType0=p0.ProtocolRequestType=p0.ProtocolRequestType0=p0.RegistrationType=p0.MessageDirection=void 0;var s9=P9(),$X;(function($){$.clientToServer="clientToServer",$.serverToClient="serverToClient",$.both="both"})($X||(p0.MessageDirection=$X={}));class ZX{constructor($){this.method=$}}p0.RegistrationType=ZX;class JX extends s9.RequestType0{constructor($){super($)}}p0.ProtocolRequestType0=JX;class YX extends s9.RequestType{constructor($){super($,s9.ParameterStructures.byName)}}p0.ProtocolRequestType=YX;class QX extends s9.NotificationType0{constructor($){super($)}}p0.ProtocolNotificationType0=QX;class XX extends s9.NotificationType{constructor($){super($,s9.ParameterStructures.byName)}}p0.ProtocolNotificationType=XX});var NY=D((Q0)=>{Object.defineProperty(Q0,"__esModule",{value:!0});Q0.objectLiteral=Q0.typedArray=Q0.stringArray=Q0.array=Q0.func=Q0.error=Q0.number=Q0.string=Q0.boolean=void 0;function HV($){return $===!0||$===!1}Q0.boolean=HV;function zX($){return typeof $==="string"||$ instanceof String}Q0.string=zX;function AV($){return typeof $==="number"||$ instanceof Number}Q0.number=AV;function OV($){return $ instanceof Error}Q0.error=OV;function EV($){return typeof $==="function"}Q0.func=EV;function GX($){return Array.isArray($)}Q0.array=GX;function UV($){return GX($)&&$.every((Z)=>zX(Z))}Q0.stringArray=UV;function wV($,Z){return Array.isArray($)&&$.every(Z)}Q0.typedArray=wV;function NV($){return $!==null&&typeof $==="object"}Q0.objectLiteral=NV});var KX=D((LY)=>{Object.defineProperty(LY,"__esModule",{value:!0});LY.ImplementationRequest=void 0;var BX=u$(),jX;(function($){$.method="textDocument/implementation",$.messageDirection=BX.MessageDirection.clientToServer,$.type=new BX.ProtocolRequestType($.method)})(jX||(LY.ImplementationRequest=jX={}))});var HX=D((FY)=>{Object.defineProperty(FY,"__esModule",{value:!0});FY.TypeDefinitionRequest=void 0;var VX=u$(),WX;(function($){$.method="textDocument/typeDefinition",$.messageDirection=VX.MessageDirection.clientToServer,$.type=new VX.ProtocolRequestType($.method)})(WX||(FY.TypeDefinitionRequest=WX={}))});var EX=D((r9)=>{Object.defineProperty(r9,"__esModule",{value:!0});r9.DidChangeWorkspaceFoldersNotification=r9.WorkspaceFoldersRequest=void 0;var PY=u$(),AX;(function($){$.method="workspace/workspaceFolders",$.messageDirection=PY.MessageDirection.serverToClient,$.type=new PY.ProtocolRequestType0($.method)})(AX||(r9.WorkspaceFoldersRequest=AX={}));var OX;(function($){$.method="workspace/didChangeWorkspaceFolders",$.messageDirection=PY.MessageDirection.clientToServer,$.type=new PY.ProtocolNotificationType($.method)})(OX||(r9.DidChangeWorkspaceFoldersNotification=OX={}))});var NX=D((MY)=>{Object.defineProperty(MY,"__esModule",{value:!0});MY.ConfigurationRequest=void 0;var UX=u$(),wX;(function($){$.method="workspace/configuration",$.messageDirection=UX.MessageDirection.serverToClient,$.type=new UX.ProtocolRequestType($.method)})(wX||(MY.ConfigurationRequest=wX={}))});var PX=D((o9)=>{Object.defineProperty(o9,"__esModule",{value:!0});o9.ColorPresentationRequest=o9.DocumentColorRequest=void 0;var IY=u$(),LX;(function($){$.method="textDocument/documentColor",$.messageDirection=IY.MessageDirection.clientToServer,$.type=new IY.ProtocolRequestType($.method)})(LX||(o9.DocumentColorRequest=LX={}));var FX;(function($){$.method="textDocument/colorPresentation",$.messageDirection=IY.MessageDirection.clientToServer,$.type=new IY.ProtocolRequestType($.method)})(FX||(o9.ColorPresentationRequest=FX={}))});var TX=D((t9)=>{Object.defineProperty(t9,"__esModule",{value:!0});t9.FoldingRangeRefreshRequest=t9.FoldingRangeRequest=void 0;var TY=u$(),MX;(function($){$.method="textDocument/foldingRange",$.messageDirection=TY.MessageDirection.clientToServer,$.type=new TY.ProtocolRequestType($.method)})(MX||(t9.FoldingRangeRequest=MX={}));var IX;(function($){$.method="workspace/foldingRange/refresh",$.messageDirection=TY.MessageDirection.serverToClient,$.type=new TY.ProtocolRequestType0($.method)})(IX||(t9.FoldingRangeRefreshRequest=IX={}))});var SX=D((qY)=>{Object.defineProperty(qY,"__esModule",{value:!0});qY.DeclarationRequest=void 0;var qX=u$(),CX;(function($){$.method="textDocument/declaration",$.messageDirection=qX.MessageDirection.clientToServer,$.type=new qX.ProtocolRequestType($.method)})(CX||(qY.DeclarationRequest=CX={}))});var RX=D((CY)=>{Object.defineProperty(CY,"__esModule",{value:!0});CY.SelectionRangeRequest=void 0;var DX=u$(),bX;(function($){$.method="textDocument/selectionRange",$.messageDirection=DX.MessageDirection.clientToServer,$.type=new DX.ProtocolRequestType($.method)})(bX||(CY.SelectionRangeRequest=bX={}))});var hX=D((G9)=>{Object.defineProperty(G9,"__esModule",{value:!0});G9.WorkDoneProgressCancelNotification=G9.WorkDoneProgressCreateRequest=G9.WorkDoneProgress=void 0;var LV=P9(),SY=u$(),yX;(function($){$.type=new LV.ProgressType;function Z(J){return J===$.type}$.is=Z})(yX||(G9.WorkDoneProgress=yX={}));var _X;(function($){$.method="window/workDoneProgress/create",$.messageDirection=SY.MessageDirection.serverToClient,$.type=new SY.ProtocolRequestType($.method)})(_X||(G9.WorkDoneProgressCreateRequest=_X={}));var xX;(function($){$.method="window/workDoneProgress/cancel",$.messageDirection=SY.MessageDirection.clientToServer,$.type=new SY.ProtocolNotificationType($.method)})(xX||(G9.WorkDoneProgressCancelNotification=xX={}))});var gX=D((B9)=>{Object.defineProperty(B9,"__esModule",{value:!0});B9.CallHierarchyOutgoingCallsRequest=B9.CallHierarchyIncomingCallsRequest=B9.CallHierarchyPrepareRequest=void 0;var e9=u$(),fX;(function($){$.method="textDocument/prepareCallHierarchy",$.messageDirection=e9.MessageDirection.clientToServer,$.type=new e9.ProtocolRequestType($.method)})(fX||(B9.CallHierarchyPrepareRequest=fX={}));var kX;(function($){$.method="callHierarchy/incomingCalls",$.messageDirection=e9.MessageDirection.clientToServer,$.type=new e9.ProtocolRequestType($.method)})(kX||(B9.CallHierarchyIncomingCallsRequest=kX={}));var vX;(function($){$.method="callHierarchy/outgoingCalls",$.messageDirection=e9.MessageDirection.clientToServer,$.type=new e9.ProtocolRequestType($.method)})(vX||(B9.CallHierarchyOutgoingCallsRequest=vX={}))});var cX=D((d0)=>{Object.defineProperty(d0,"__esModule",{value:!0});d0.SemanticTokensRefreshRequest=d0.SemanticTokensRangeRequest=d0.SemanticTokensDeltaRequest=d0.SemanticTokensRequest=d0.SemanticTokensRegistrationType=d0.TokenFormat=void 0;var cZ=u$(),pX;(function($){$.Relative="relative"})(pX||(d0.TokenFormat=pX={}));var CJ;(function($){$.method="textDocument/semanticTokens",$.type=new cZ.RegistrationType($.method)})(CJ||(d0.SemanticTokensRegistrationType=CJ={}));var dX;(function($){$.method="textDocument/semanticTokens/full",$.messageDirection=cZ.MessageDirection.clientToServer,$.type=new cZ.ProtocolRequestType($.method),$.registrationMethod=CJ.method})(dX||(d0.SemanticTokensRequest=dX={}));var mX;(function($){$.method="textDocument/semanticTokens/full/delta",$.messageDirection=cZ.MessageDirection.clientToServer,$.type=new cZ.ProtocolRequestType($.method),$.registrationMethod=CJ.method})(mX||(d0.SemanticTokensDeltaRequest=mX={}));var uX;(function($){$.method="textDocument/semanticTokens/range",$.messageDirection=cZ.MessageDirection.clientToServer,$.type=new cZ.ProtocolRequestType($.method),$.registrationMethod=CJ.method})(uX||(d0.SemanticTokensRangeRequest=uX={}));var lX;(function($){$.method="workspace/semanticTokens/refresh",$.messageDirection=cZ.MessageDirection.serverToClient,$.type=new cZ.ProtocolRequestType0($.method)})(lX||(d0.SemanticTokensRefreshRequest=lX={}))});var aX=D((DY)=>{Object.defineProperty(DY,"__esModule",{value:!0});DY.ShowDocumentRequest=void 0;var iX=u$(),nX;(function($){$.method="window/showDocument",$.messageDirection=iX.MessageDirection.serverToClient,$.type=new iX.ProtocolRequestType($.method)})(nX||(DY.ShowDocumentRequest=nX={}))});var oX=D((bY)=>{Object.defineProperty(bY,"__esModule",{value:!0});bY.LinkedEditingRangeRequest=void 0;var sX=u$(),rX;(function($){$.method="textDocument/linkedEditingRange",$.messageDirection=sX.MessageDirection.clientToServer,$.type=new sX.ProtocolRequestType($.method)})(rX||(bY.LinkedEditingRangeRequest=rX={}))});var Xz=D((I0)=>{Object.defineProperty(I0,"__esModule",{value:!0});I0.WillDeleteFilesRequest=I0.DidDeleteFilesNotification=I0.DidRenameFilesNotification=I0.WillRenameFilesRequest=I0.DidCreateFilesNotification=I0.WillCreateFilesRequest=I0.FileOperationPatternKind=void 0;var zZ=u$(),tX;(function($){$.file="file",$.folder="folder"})(tX||(I0.FileOperationPatternKind=tX={}));var eX;(function($){$.method="workspace/willCreateFiles",$.messageDirection=zZ.MessageDirection.clientToServer,$.type=new zZ.ProtocolRequestType($.method)})(eX||(I0.WillCreateFilesRequest=eX={}));var $z;(function($){$.method="workspace/didCreateFiles",$.messageDirection=zZ.MessageDirection.clientToServer,$.type=new zZ.ProtocolNotificationType($.method)})($z||(I0.DidCreateFilesNotification=$z={}));var Zz;(function($){$.method="workspace/willRenameFiles",$.messageDirection=zZ.MessageDirection.clientToServer,$.type=new zZ.ProtocolRequestType($.method)})(Zz||(I0.WillRenameFilesRequest=Zz={}));var Jz;(function($){$.method="workspace/didRenameFiles",$.messageDirection=zZ.MessageDirection.clientToServer,$.type=new zZ.ProtocolNotificationType($.method)})(Jz||(I0.DidRenameFilesNotification=Jz={}));var Yz;(function($){$.method="workspace/didDeleteFiles",$.messageDirection=zZ.MessageDirection.clientToServer,$.type=new zZ.ProtocolNotificationType($.method)})(Yz||(I0.DidDeleteFilesNotification=Yz={}));var Qz;(function($){$.method="workspace/willDeleteFiles",$.messageDirection=zZ.MessageDirection.clientToServer,$.type=new zZ.ProtocolRequestType($.method)})(Qz||(I0.WillDeleteFilesRequest=Qz={}))});var Kz=D((j9)=>{Object.defineProperty(j9,"__esModule",{value:!0});j9.MonikerRequest=j9.MonikerKind=j9.UniquenessLevel=void 0;var zz=u$(),Gz;(function($){$.document="document",$.project="project",$.group="group",$.scheme="scheme",$.global="global"})(Gz||(j9.UniquenessLevel=Gz={}));var Bz;(function($){$.$import="import",$.$export="export",$.local="local"})(Bz||(j9.MonikerKind=Bz={}));var jz;(function($){$.method="textDocument/moniker",$.messageDirection=zz.MessageDirection.clientToServer,$.type=new zz.ProtocolRequestType($.method)})(jz||(j9.MonikerRequest=jz={}))});var Az=D((K9)=>{Object.defineProperty(K9,"__esModule",{value:!0});K9.TypeHierarchySubtypesRequest=K9.TypeHierarchySupertypesRequest=K9.TypeHierarchyPrepareRequest=void 0;var $J=u$(),Vz;(function($){$.method="textDocument/prepareTypeHierarchy",$.messageDirection=$J.MessageDirection.clientToServer,$.type=new $J.ProtocolRequestType($.method)})(Vz||(K9.TypeHierarchyPrepareRequest=Vz={}));var Wz;(function($){$.method="typeHierarchy/supertypes",$.messageDirection=$J.MessageDirection.clientToServer,$.type=new $J.ProtocolRequestType($.method)})(Wz||(K9.TypeHierarchySupertypesRequest=Wz={}));var Hz;(function($){$.method="typeHierarchy/subtypes",$.messageDirection=$J.MessageDirection.clientToServer,$.type=new $J.ProtocolRequestType($.method)})(Hz||(K9.TypeHierarchySubtypesRequest=Hz={}))});var Uz=D((ZJ)=>{Object.defineProperty(ZJ,"__esModule",{value:!0});ZJ.InlineValueRefreshRequest=ZJ.InlineValueRequest=void 0;var RY=u$(),Oz;(function($){$.method="textDocument/inlineValue",$.messageDirection=RY.MessageDirection.clientToServer,$.type=new RY.ProtocolRequestType($.method)})(Oz||(ZJ.InlineValueRequest=Oz={}));var Ez;(function($){$.method="workspace/inlineValue/refresh",$.messageDirection=RY.MessageDirection.serverToClient,$.type=new RY.ProtocolRequestType0($.method)})(Ez||(ZJ.InlineValueRefreshRequest=Ez={}))});var Fz=D((V9)=>{Object.defineProperty(V9,"__esModule",{value:!0});V9.InlayHintRefreshRequest=V9.InlayHintResolveRequest=V9.InlayHintRequest=void 0;var JJ=u$(),wz;(function($){$.method="textDocument/inlayHint",$.messageDirection=JJ.MessageDirection.clientToServer,$.type=new JJ.ProtocolRequestType($.method)})(wz||(V9.InlayHintRequest=wz={}));var Nz;(function($){$.method="inlayHint/resolve",$.messageDirection=JJ.MessageDirection.clientToServer,$.type=new JJ.ProtocolRequestType($.method)})(Nz||(V9.InlayHintResolveRequest=Nz={}));var Lz;(function($){$.method="workspace/inlayHint/refresh",$.messageDirection=JJ.MessageDirection.serverToClient,$.type=new JJ.ProtocolRequestType0($.method)})(Lz||(V9.InlayHintRefreshRequest=Lz={}))});var Sz=D((GZ)=>{Object.defineProperty(GZ,"__esModule",{value:!0});GZ.DiagnosticRefreshRequest=GZ.WorkspaceDiagnosticRequest=GZ.DocumentDiagnosticRequest=GZ.DocumentDiagnosticReportKind=GZ.DiagnosticServerCancellationData=void 0;var Cz=P9(),FV=NY(),YJ=u$(),Pz;(function($){function Z(J){let Y=J;return Y&&FV.boolean(Y.retriggerRequest)}$.is=Z})(Pz||(GZ.DiagnosticServerCancellationData=Pz={}));var Mz;(function($){$.Full="full",$.Unchanged="unchanged"})(Mz||(GZ.DocumentDiagnosticReportKind=Mz={}));var Iz;(function($){$.method="textDocument/diagnostic",$.messageDirection=YJ.MessageDirection.clientToServer,$.type=new YJ.ProtocolRequestType($.method),$.partialResult=new Cz.ProgressType})(Iz||(GZ.DocumentDiagnosticRequest=Iz={}));var Tz;(function($){$.method="workspace/diagnostic",$.messageDirection=YJ.MessageDirection.clientToServer,$.type=new YJ.ProtocolRequestType($.method),$.partialResult=new Cz.ProgressType})(Tz||(GZ.WorkspaceDiagnosticRequest=Tz={}));var qz;(function($){$.method="workspace/diagnostic/refresh",$.messageDirection=YJ.MessageDirection.serverToClient,$.type=new YJ.ProtocolRequestType0($.method)})(qz||(GZ.DiagnosticRefreshRequest=qz={}))});var hz=D((e$)=>{Object.defineProperty(e$,"__esModule",{value:!0});e$.DidCloseNotebookDocumentNotification=e$.DidSaveNotebookDocumentNotification=e$.DidChangeNotebookDocumentNotification=e$.NotebookCellArrayChange=e$.DidOpenNotebookDocumentNotification=e$.NotebookDocumentSyncRegistrationType=e$.NotebookDocument=e$.NotebookCell=e$.ExecutionSummary=e$.NotebookCellKind=void 0;var SJ=wY(),wZ=NY(),xZ=u$(),P6;(function($){$.Markup=1,$.Code=2;function Z(J){return J===1||J===2}$.is=Z})(P6||(e$.NotebookCellKind=P6={}));var M6;(function($){function Z(Q,X){let z={executionOrder:Q};if(X===!0||X===!1)z.success=X;return z}$.create=Z;function J(Q){let X=Q;return wZ.objectLiteral(X)&&SJ.uinteger.is(X.executionOrder)&&(X.success===void 0||wZ.boolean(X.success))}$.is=J;function Y(Q,X){if(Q===X)return!0;if(Q===null||Q===void 0||X===null||X===void 0)return!1;return Q.executionOrder===X.executionOrder&&Q.success===X.success}$.equals=Y})(M6||(e$.ExecutionSummary=M6={}));var yY;(function($){function Z(X,z){return{kind:X,document:z}}$.create=Z;function J(X){let z=X;return wZ.objectLiteral(z)&&P6.is(z.kind)&&SJ.DocumentUri.is(z.document)&&(z.metadata===void 0||wZ.objectLiteral(z.metadata))}$.is=J;function Y(X,z){let B=new Set;if(X.document!==z.document)B.add("document");if(X.kind!==z.kind)B.add("kind");if(X.executionSummary!==z.executionSummary)B.add("executionSummary");if((X.metadata!==void 0||z.metadata!==void 0)&&!Q(X.metadata,z.metadata))B.add("metadata");if((X.executionSummary!==void 0||z.executionSummary!==void 0)&&!M6.equals(X.executionSummary,z.executionSummary))B.add("executionSummary");return B}$.diff=Y;function Q(X,z){if(X===z)return!0;if(X===null||X===void 0||z===null||z===void 0)return!1;if(typeof X!==typeof z)return!1;if(typeof X!=="object")return!1;let B=Array.isArray(X),j=Array.isArray(z);if(B!==j)return!1;if(B&&j){if(X.length!==z.length)return!1;for(let H=0;H<X.length;H++)if(!Q(X[H],z[H]))return!1}if(wZ.objectLiteral(X)&&wZ.objectLiteral(z)){let H=Object.keys(X),O=Object.keys(z);if(H.length!==O.length)return!1;if(H.sort(),O.sort(),!Q(H,O))return!1;for(let N=0;N<H.length;N++){let U=H[N];if(!Q(X[U],z[U]))return!1}}return!0}})(yY||(e$.NotebookCell=yY={}));var Dz;(function($){function Z(Y,Q,X,z){return{uri:Y,notebookType:Q,version:X,cells:z}}$.create=Z;function J(Y){let Q=Y;return wZ.objectLiteral(Q)&&wZ.string(Q.uri)&&SJ.integer.is(Q.version)&&wZ.typedArray(Q.cells,yY.is)}$.is=J})(Dz||(e$.NotebookDocument=Dz={}));var QJ;(function($){$.method="notebookDocument/sync",$.messageDirection=xZ.MessageDirection.clientToServer,$.type=new xZ.RegistrationType($.method)})(QJ||(e$.NotebookDocumentSyncRegistrationType=QJ={}));var bz;(function($){$.method="notebookDocument/didOpen",$.messageDirection=xZ.MessageDirection.clientToServer,$.type=new xZ.ProtocolNotificationType($.method),$.registrationMethod=QJ.method})(bz||(e$.DidOpenNotebookDocumentNotification=bz={}));var Rz;(function($){function Z(Y){let Q=Y;return wZ.objectLiteral(Q)&&SJ.uinteger.is(Q.start)&&SJ.uinteger.is(Q.deleteCount)&&(Q.cells===void 0||wZ.typedArray(Q.cells,yY.is))}$.is=Z;function J(Y,Q,X){let z={start:Y,deleteCount:Q};if(X!==void 0)z.cells=X;return z}$.create=J})(Rz||(e$.NotebookCellArrayChange=Rz={}));var yz;(function($){$.method="notebookDocument/didChange",$.messageDirection=xZ.MessageDirection.clientToServer,$.type=new xZ.ProtocolNotificationType($.method),$.registrationMethod=QJ.method})(yz||(e$.DidChangeNotebookDocumentNotification=yz={}));var _z;(function($){$.method="notebookDocument/didSave",$.messageDirection=xZ.MessageDirection.clientToServer,$.type=new xZ.ProtocolNotificationType($.method),$.registrationMethod=QJ.method})(_z||(e$.DidSaveNotebookDocumentNotification=_z={}));var xz;(function($){$.method="notebookDocument/didClose",$.messageDirection=xZ.MessageDirection.clientToServer,$.type=new xZ.ProtocolNotificationType($.method),$.registrationMethod=QJ.method})(xz||(e$.DidCloseNotebookDocumentNotification=xz={}))});var vz=D((_Y)=>{Object.defineProperty(_Y,"__esModule",{value:!0});_Y.InlineCompletionRequest=void 0;var fz=u$(),kz;(function($){$.method="textDocument/inlineCompletion",$.messageDirection=fz.MessageDirection.clientToServer,$.type=new fz.ProtocolRequestType($.method)})(kz||(_Y.InlineCompletionRequest=kz={}))});var oG=D((w)=>{Object.defineProperty(w,"__esModule",{value:!0});w.WorkspaceSymbolRequest=w.CodeActionResolveRequest=w.CodeActionRequest=w.DocumentSymbolRequest=w.DocumentHighlightRequest=w.ReferencesRequest=w.DefinitionRequest=w.SignatureHelpRequest=w.SignatureHelpTriggerKind=w.HoverRequest=w.CompletionResolveRequest=w.CompletionRequest=w.CompletionTriggerKind=w.PublishDiagnosticsNotification=w.WatchKind=w.RelativePattern=w.FileChangeType=w.DidChangeWatchedFilesNotification=w.WillSaveTextDocumentWaitUntilRequest=w.WillSaveTextDocumentNotification=w.TextDocumentSaveReason=w.DidSaveTextDocumentNotification=w.DidCloseTextDocumentNotification=w.DidChangeTextDocumentNotification=w.TextDocumentContentChangeEvent=w.DidOpenTextDocumentNotification=w.TextDocumentSyncKind=w.TelemetryEventNotification=w.LogMessageNotification=w.ShowMessageRequest=w.ShowMessageNotification=w.MessageType=w.DidChangeConfigurationNotification=w.ExitNotification=w.ShutdownRequest=w.InitializedNotification=w.InitializeErrorCodes=w.InitializeRequest=w.WorkDoneProgressOptions=w.TextDocumentRegistrationOptions=w.StaticRegistrationOptions=w.PositionEncodingKind=w.FailureHandlingKind=w.ResourceOperationKind=w.UnregistrationRequest=w.RegistrationRequest=w.DocumentSelector=w.NotebookCellTextDocumentFilter=w.NotebookDocumentFilter=w.TextDocumentFilter=void 0;w.MonikerRequest=w.MonikerKind=w.UniquenessLevel=w.WillDeleteFilesRequest=w.DidDeleteFilesNotification=w.WillRenameFilesRequest=w.DidRenameFilesNotification=w.WillCreateFilesRequest=w.DidCreateFilesNotification=w.FileOperationPatternKind=w.LinkedEditingRangeRequest=w.ShowDocumentRequest=w.SemanticTokensRegistrationType=w.SemanticTokensRefreshRequest=w.SemanticTokensRangeRequest=w.SemanticTokensDeltaRequest=w.SemanticTokensRequest=w.TokenFormat=w.CallHierarchyPrepareRequest=w.CallHierarchyOutgoingCallsRequest=w.CallHierarchyIncomingCallsRequest=w.WorkDoneProgressCancelNotification=w.WorkDoneProgressCreateRequest=w.WorkDoneProgress=w.SelectionRangeRequest=w.DeclarationRequest=w.FoldingRangeRefreshRequest=w.FoldingRangeRequest=w.ColorPresentationRequest=w.DocumentColorRequest=w.ConfigurationRequest=w.DidChangeWorkspaceFoldersNotification=w.WorkspaceFoldersRequest=w.TypeDefinitionRequest=w.ImplementationRequest=w.ApplyWorkspaceEditRequest=w.ExecuteCommandRequest=w.PrepareRenameRequest=w.RenameRequest=w.PrepareSupportDefaultBehavior=w.DocumentOnTypeFormattingRequest=w.DocumentRangesFormattingRequest=w.DocumentRangeFormattingRequest=w.DocumentFormattingRequest=w.DocumentLinkResolveRequest=w.DocumentLinkRequest=w.CodeLensRefreshRequest=w.CodeLensResolveRequest=w.CodeLensRequest=w.WorkspaceSymbolResolveRequest=void 0;w.InlineCompletionRequest=w.DidCloseNotebookDocumentNotification=w.DidSaveNotebookDocumentNotification=w.DidChangeNotebookDocumentNotification=w.NotebookCellArrayChange=w.DidOpenNotebookDocumentNotification=w.NotebookDocumentSyncRegistrationType=w.NotebookDocument=w.NotebookCell=w.ExecutionSummary=w.NotebookCellKind=w.DiagnosticRefreshRequest=w.WorkspaceDiagnosticRequest=w.DocumentDiagnosticRequest=w.DocumentDiagnosticReportKind=w.DiagnosticServerCancellationData=w.InlayHintRefreshRequest=w.InlayHintResolveRequest=w.InlayHintRequest=w.InlineValueRefreshRequest=w.InlineValueRequest=w.TypeHierarchySupertypesRequest=w.TypeHierarchySubtypesRequest=w.TypeHierarchyPrepareRequest=void 0;var g=u$(),gz=wY(),V0=NY(),PV=KX();Object.defineProperty(w,"ImplementationRequest",{enumerable:!0,get:function(){return PV.ImplementationRequest}});var MV=HX();Object.defineProperty(w,"TypeDefinitionRequest",{enumerable:!0,get:function(){return MV.TypeDefinitionRequest}});var nG=EX();Object.defineProperty(w,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return nG.WorkspaceFoldersRequest}});Object.defineProperty(w,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return nG.DidChangeWorkspaceFoldersNotification}});var IV=NX();Object.defineProperty(w,"ConfigurationRequest",{enumerable:!0,get:function(){return IV.ConfigurationRequest}});var aG=PX();Object.defineProperty(w,"DocumentColorRequest",{enumerable:!0,get:function(){return aG.DocumentColorRequest}});Object.defineProperty(w,"ColorPresentationRequest",{enumerable:!0,get:function(){return aG.ColorPresentationRequest}});var sG=TX();Object.defineProperty(w,"FoldingRangeRequest",{enumerable:!0,get:function(){return sG.FoldingRangeRequest}});Object.defineProperty(w,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return sG.FoldingRangeRefreshRequest}});var TV=SX();Object.defineProperty(w,"DeclarationRequest",{enumerable:!0,get:function(){return TV.DeclarationRequest}});var qV=RX();Object.defineProperty(w,"SelectionRangeRequest",{enumerable:!0,get:function(){return qV.SelectionRangeRequest}});var S6=hX();Object.defineProperty(w,"WorkDoneProgress",{enumerable:!0,get:function(){return S6.WorkDoneProgress}});Object.defineProperty(w,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return S6.WorkDoneProgressCreateRequest}});Object.defineProperty(w,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return S6.WorkDoneProgressCancelNotification}});var D6=gX();Object.defineProperty(w,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return D6.CallHierarchyIncomingCallsRequest}});Object.defineProperty(w,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return D6.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(w,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return D6.CallHierarchyPrepareRequest}});var XJ=cX();Object.defineProperty(w,"TokenFormat",{enumerable:!0,get:function(){return XJ.TokenFormat}});Object.defineProperty(w,"SemanticTokensRequest",{enumerable:!0,get:function(){return XJ.SemanticTokensRequest}});Object.defineProperty(w,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return XJ.SemanticTokensDeltaRequest}});Object.defineProperty(w,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return XJ.SemanticTokensRangeRequest}});Object.defineProperty(w,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return XJ.SemanticTokensRefreshRequest}});Object.defineProperty(w,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return XJ.SemanticTokensRegistrationType}});var CV=aX();Object.defineProperty(w,"ShowDocumentRequest",{enumerable:!0,get:function(){return CV.ShowDocumentRequest}});var SV=oX();Object.defineProperty(w,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return SV.LinkedEditingRangeRequest}});var M9=Xz();Object.defineProperty(w,"FileOperationPatternKind",{enumerable:!0,get:function(){return M9.FileOperationPatternKind}});Object.defineProperty(w,"DidCreateFilesNotification",{enumerable:!0,get:function(){return M9.DidCreateFilesNotification}});Object.defineProperty(w,"WillCreateFilesRequest",{enumerable:!0,get:function(){return M9.WillCreateFilesRequest}});Object.defineProperty(w,"DidRenameFilesNotification",{enumerable:!0,get:function(){return M9.DidRenameFilesNotification}});Object.defineProperty(w,"WillRenameFilesRequest",{enumerable:!0,get:function(){return M9.WillRenameFilesRequest}});Object.defineProperty(w,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return M9.DidDeleteFilesNotification}});Object.defineProperty(w,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return M9.WillDeleteFilesRequest}});var b6=Kz();Object.defineProperty(w,"UniquenessLevel",{enumerable:!0,get:function(){return b6.UniquenessLevel}});Object.defineProperty(w,"MonikerKind",{enumerable:!0,get:function(){return b6.MonikerKind}});Object.defineProperty(w,"MonikerRequest",{enumerable:!0,get:function(){return b6.MonikerRequest}});var R6=Az();Object.defineProperty(w,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return R6.TypeHierarchyPrepareRequest}});Object.defineProperty(w,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return R6.TypeHierarchySubtypesRequest}});Object.defineProperty(w,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return R6.TypeHierarchySupertypesRequest}});var rG=Uz();Object.defineProperty(w,"InlineValueRequest",{enumerable:!0,get:function(){return rG.InlineValueRequest}});Object.defineProperty(w,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return rG.InlineValueRefreshRequest}});var y6=Fz();Object.defineProperty(w,"InlayHintRequest",{enumerable:!0,get:function(){return y6.InlayHintRequest}});Object.defineProperty(w,"InlayHintResolveRequest",{enumerable:!0,get:function(){return y6.InlayHintResolveRequest}});Object.defineProperty(w,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return y6.InlayHintRefreshRequest}});var DJ=Sz();Object.defineProperty(w,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return DJ.DiagnosticServerCancellationData}});Object.defineProperty(w,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return DJ.DocumentDiagnosticReportKind}});Object.defineProperty(w,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return DJ.DocumentDiagnosticRequest}});Object.defineProperty(w,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return DJ.WorkspaceDiagnosticRequest}});Object.defineProperty(w,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return DJ.DiagnosticRefreshRequest}});var hZ=hz();Object.defineProperty(w,"NotebookCellKind",{enumerable:!0,get:function(){return hZ.NotebookCellKind}});Object.defineProperty(w,"ExecutionSummary",{enumerable:!0,get:function(){return hZ.ExecutionSummary}});Object.defineProperty(w,"NotebookCell",{enumerable:!0,get:function(){return hZ.NotebookCell}});Object.defineProperty(w,"NotebookDocument",{enumerable:!0,get:function(){return hZ.NotebookDocument}});Object.defineProperty(w,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return hZ.NotebookDocumentSyncRegistrationType}});Object.defineProperty(w,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return hZ.DidOpenNotebookDocumentNotification}});Object.defineProperty(w,"NotebookCellArrayChange",{enumerable:!0,get:function(){return hZ.NotebookCellArrayChange}});Object.defineProperty(w,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return hZ.DidChangeNotebookDocumentNotification}});Object.defineProperty(w,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return hZ.DidSaveNotebookDocumentNotification}});Object.defineProperty(w,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return hZ.DidCloseNotebookDocumentNotification}});var DV=vz();Object.defineProperty(w,"InlineCompletionRequest",{enumerable:!0,get:function(){return DV.InlineCompletionRequest}});var I6;(function($){function Z(J){let Y=J;return V0.string(Y)||(V0.string(Y.language)||V0.string(Y.scheme)||V0.string(Y.pattern))}$.is=Z})(I6||(w.TextDocumentFilter=I6={}));var T6;(function($){function Z(J){let Y=J;return V0.objectLiteral(Y)&&(V0.string(Y.notebookType)||V0.string(Y.scheme)||V0.string(Y.pattern))}$.is=Z})(T6||(w.NotebookDocumentFilter=T6={}));var q6;(function($){function Z(J){let Y=J;return V0.objectLiteral(Y)&&(V0.string(Y.notebook)||T6.is(Y.notebook))&&(Y.language===void 0||V0.string(Y.language))}$.is=Z})(q6||(w.NotebookCellTextDocumentFilter=q6={}));var C6;(function($){function Z(J){if(!Array.isArray(J))return!1;for(let Y of J)if(!V0.string(Y)&&!I6.is(Y)&&!q6.is(Y))return!1;return!0}$.is=Z})(C6||(w.DocumentSelector=C6={}));var pz;(function($){$.method="client/registerCapability",$.messageDirection=g.MessageDirection.serverToClient,$.type=new g.ProtocolRequestType($.method)})(pz||(w.RegistrationRequest=pz={}));var dz;(function($){$.method="client/unregisterCapability",$.messageDirection=g.MessageDirection.serverToClient,$.type=new g.ProtocolRequestType($.method)})(dz||(w.UnregistrationRequest=dz={}));var mz;(function($){$.Create="create",$.Rename="rename",$.Delete="delete"})(mz||(w.ResourceOperationKind=mz={}));var uz;(function($){$.Abort="abort",$.Transactional="transactional",$.TextOnlyTransactional="textOnlyTransactional",$.Undo="undo"})(uz||(w.FailureHandlingKind=uz={}));var lz;(function($){$.UTF8="utf-8",$.UTF16="utf-16",$.UTF32="utf-32"})(lz||(w.PositionEncodingKind=lz={}));var cz;(function($){function Z(J){let Y=J;return Y&&V0.string(Y.id)&&Y.id.length>0}$.hasId=Z})(cz||(w.StaticRegistrationOptions=cz={}));var iz;(function($){function Z(J){let Y=J;return Y&&(Y.documentSelector===null||C6.is(Y.documentSelector))}$.is=Z})(iz||(w.TextDocumentRegistrationOptions=iz={}));var nz;(function($){function Z(Y){let Q=Y;return V0.objectLiteral(Q)&&(Q.workDoneProgress===void 0||V0.boolean(Q.workDoneProgress))}$.is=Z;function J(Y){let Q=Y;return Q&&V0.boolean(Q.workDoneProgress)}$.hasWorkDoneProgress=J})(nz||(w.WorkDoneProgressOptions=nz={}));var az;(function($){$.method="initialize",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(az||(w.InitializeRequest=az={}));var sz;(function($){$.unknownProtocolVersion=1})(sz||(w.InitializeErrorCodes=sz={}));var rz;(function($){$.method="initialized",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolNotificationType($.method)})(rz||(w.InitializedNotification=rz={}));var oz;(function($){$.method="shutdown",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType0($.method)})(oz||(w.ShutdownRequest=oz={}));var tz;(function($){$.method="exit",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolNotificationType0($.method)})(tz||(w.ExitNotification=tz={}));var ez;(function($){$.method="workspace/didChangeConfiguration",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolNotificationType($.method)})(ez||(w.DidChangeConfigurationNotification=ez={}));var $G;(function($){$.Error=1,$.Warning=2,$.Info=3,$.Log=4,$.Debug=5})($G||(w.MessageType=$G={}));var ZG;(function($){$.method="window/showMessage",$.messageDirection=g.MessageDirection.serverToClient,$.type=new g.ProtocolNotificationType($.method)})(ZG||(w.ShowMessageNotification=ZG={}));var JG;(function($){$.method="window/showMessageRequest",$.messageDirection=g.MessageDirection.serverToClient,$.type=new g.ProtocolRequestType($.method)})(JG||(w.ShowMessageRequest=JG={}));var YG;(function($){$.method="window/logMessage",$.messageDirection=g.MessageDirection.serverToClient,$.type=new g.ProtocolNotificationType($.method)})(YG||(w.LogMessageNotification=YG={}));var QG;(function($){$.method="telemetry/event",$.messageDirection=g.MessageDirection.serverToClient,$.type=new g.ProtocolNotificationType($.method)})(QG||(w.TelemetryEventNotification=QG={}));var XG;(function($){$.None=0,$.Full=1,$.Incremental=2})(XG||(w.TextDocumentSyncKind=XG={}));var zG;(function($){$.method="textDocument/didOpen",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolNotificationType($.method)})(zG||(w.DidOpenTextDocumentNotification=zG={}));var GG;(function($){function Z(Y){let Q=Y;return Q!==void 0&&Q!==null&&typeof Q.text==="string"&&Q.range!==void 0&&(Q.rangeLength===void 0||typeof Q.rangeLength==="number")}$.isIncremental=Z;function J(Y){let Q=Y;return Q!==void 0&&Q!==null&&typeof Q.text==="string"&&Q.range===void 0&&Q.rangeLength===void 0}$.isFull=J})(GG||(w.TextDocumentContentChangeEvent=GG={}));var BG;(function($){$.method="textDocument/didChange",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolNotificationType($.method)})(BG||(w.DidChangeTextDocumentNotification=BG={}));var jG;(function($){$.method="textDocument/didClose",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolNotificationType($.method)})(jG||(w.DidCloseTextDocumentNotification=jG={}));var KG;(function($){$.method="textDocument/didSave",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolNotificationType($.method)})(KG||(w.DidSaveTextDocumentNotification=KG={}));var VG;(function($){$.Manual=1,$.AfterDelay=2,$.FocusOut=3})(VG||(w.TextDocumentSaveReason=VG={}));var WG;(function($){$.method="textDocument/willSave",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolNotificationType($.method)})(WG||(w.WillSaveTextDocumentNotification=WG={}));var HG;(function($){$.method="textDocument/willSaveWaitUntil",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(HG||(w.WillSaveTextDocumentWaitUntilRequest=HG={}));var AG;(function($){$.method="workspace/didChangeWatchedFiles",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolNotificationType($.method)})(AG||(w.DidChangeWatchedFilesNotification=AG={}));var OG;(function($){$.Created=1,$.Changed=2,$.Deleted=3})(OG||(w.FileChangeType=OG={}));var EG;(function($){function Z(J){let Y=J;return V0.objectLiteral(Y)&&(gz.URI.is(Y.baseUri)||gz.WorkspaceFolder.is(Y.baseUri))&&V0.string(Y.pattern)}$.is=Z})(EG||(w.RelativePattern=EG={}));var UG;(function($){$.Create=1,$.Change=2,$.Delete=4})(UG||(w.WatchKind=UG={}));var wG;(function($){$.method="textDocument/publishDiagnostics",$.messageDirection=g.MessageDirection.serverToClient,$.type=new g.ProtocolNotificationType($.method)})(wG||(w.PublishDiagnosticsNotification=wG={}));var NG;(function($){$.Invoked=1,$.TriggerCharacter=2,$.TriggerForIncompleteCompletions=3})(NG||(w.CompletionTriggerKind=NG={}));var LG;(function($){$.method="textDocument/completion",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(LG||(w.CompletionRequest=LG={}));var FG;(function($){$.method="completionItem/resolve",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(FG||(w.CompletionResolveRequest=FG={}));var PG;(function($){$.method="textDocument/hover",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(PG||(w.HoverRequest=PG={}));var MG;(function($){$.Invoked=1,$.TriggerCharacter=2,$.ContentChange=3})(MG||(w.SignatureHelpTriggerKind=MG={}));var IG;(function($){$.method="textDocument/signatureHelp",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(IG||(w.SignatureHelpRequest=IG={}));var TG;(function($){$.method="textDocument/definition",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(TG||(w.DefinitionRequest=TG={}));var qG;(function($){$.method="textDocument/references",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(qG||(w.ReferencesRequest=qG={}));var CG;(function($){$.method="textDocument/documentHighlight",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(CG||(w.DocumentHighlightRequest=CG={}));var SG;(function($){$.method="textDocument/documentSymbol",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(SG||(w.DocumentSymbolRequest=SG={}));var DG;(function($){$.method="textDocument/codeAction",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(DG||(w.CodeActionRequest=DG={}));var bG;(function($){$.method="codeAction/resolve",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(bG||(w.CodeActionResolveRequest=bG={}));var RG;(function($){$.method="workspace/symbol",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(RG||(w.WorkspaceSymbolRequest=RG={}));var yG;(function($){$.method="workspaceSymbol/resolve",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(yG||(w.WorkspaceSymbolResolveRequest=yG={}));var _G;(function($){$.method="textDocument/codeLens",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(_G||(w.CodeLensRequest=_G={}));var xG;(function($){$.method="codeLens/resolve",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(xG||(w.CodeLensResolveRequest=xG={}));var hG;(function($){$.method="workspace/codeLens/refresh",$.messageDirection=g.MessageDirection.serverToClient,$.type=new g.ProtocolRequestType0($.method)})(hG||(w.CodeLensRefreshRequest=hG={}));var fG;(function($){$.method="textDocument/documentLink",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(fG||(w.DocumentLinkRequest=fG={}));var kG;(function($){$.method="documentLink/resolve",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(kG||(w.DocumentLinkResolveRequest=kG={}));var vG;(function($){$.method="textDocument/formatting",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(vG||(w.DocumentFormattingRequest=vG={}));var gG;(function($){$.method="textDocument/rangeFormatting",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(gG||(w.DocumentRangeFormattingRequest=gG={}));var pG;(function($){$.method="textDocument/rangesFormatting",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(pG||(w.DocumentRangesFormattingRequest=pG={}));var dG;(function($){$.method="textDocument/onTypeFormatting",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(dG||(w.DocumentOnTypeFormattingRequest=dG={}));var mG;(function($){$.Identifier=1})(mG||(w.PrepareSupportDefaultBehavior=mG={}));var uG;(function($){$.method="textDocument/rename",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(uG||(w.RenameRequest=uG={}));var lG;(function($){$.method="textDocument/prepareRename",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(lG||(w.PrepareRenameRequest=lG={}));var cG;(function($){$.method="workspace/executeCommand",$.messageDirection=g.MessageDirection.clientToServer,$.type=new g.ProtocolRequestType($.method)})(cG||(w.ExecuteCommandRequest=cG={}));var iG;(function($){$.method="workspace/applyEdit",$.messageDirection=g.MessageDirection.serverToClient,$.type=new g.ProtocolRequestType("workspace/applyEdit")})(iG||(w.ApplyWorkspaceEditRequest=iG={}))});var eG=D((xY)=>{Object.defineProperty(xY,"__esModule",{value:!0});xY.createProtocolConnection=void 0;var tG=P9();function bV($,Z,J,Y){if(tG.ConnectionStrategy.is(Y))Y={connectionStrategy:Y};return(0,tG.createMessageConnection)($,Z,J,Y)}xY.createProtocolConnection=bV});var Z5=D((m0)=>{var RV=m0&&m0.__createBinding||(Object.create?function($,Z,J,Y){if(Y===void 0)Y=J;var Q=Object.getOwnPropertyDescriptor(Z,J);if(!Q||("get"in Q?!Z.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return Z[J]}};Object.defineProperty($,Y,Q)}:function($,Z,J,Y){if(Y===void 0)Y=J;$[Y]=Z[J]}),hY=m0&&m0.__exportStar||function($,Z){for(var J in $)if(J!=="default"&&!Object.prototype.hasOwnProperty.call(Z,J))RV(Z,$,J)};Object.defineProperty(m0,"__esModule",{value:!0});m0.LSPErrorCodes=m0.createProtocolConnection=void 0;hY(P9(),m0);hY(wY(),m0);hY(u$(),m0);hY(oG(),m0);var yV=eG();Object.defineProperty(m0,"createProtocolConnection",{enumerable:!0,get:function(){return yV.createProtocolConnection}});var $5;(function($){$.lspReservedErrorRangeStart=-32899,$.RequestFailed=-32803,$.ServerCancelled=-32802,$.ContentModified=-32801,$.RequestCancelled=-32800,$.lspReservedErrorRangeEnd=-32800})($5||(m0.LSPErrorCodes=$5={}))});var Z$=D((fZ)=>{var _V=fZ&&fZ.__createBinding||(Object.create?function($,Z,J,Y){if(Y===void 0)Y=J;var Q=Object.getOwnPropertyDescriptor(Z,J);if(!Q||("get"in Q?!Z.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return Z[J]}};Object.defineProperty($,Y,Q)}:function($,Z,J,Y){if(Y===void 0)Y=J;$[Y]=Z[J]}),J5=fZ&&fZ.__exportStar||function($,Z){for(var J in $)if(J!=="default"&&!Object.prototype.hasOwnProperty.call(Z,J))_V(Z,$,J)};Object.defineProperty(fZ,"__esModule",{value:!0});fZ.createProtocolConnection=void 0;var xV=F6();J5(F6(),fZ);J5(Z5(),fZ);function hV($,Z,J,Y){return(0,xV.createMessageConnection)($,Z,J,Y)}fZ.createProtocolConnection=hV});var kY=D((T0)=>{Object.defineProperty(T0,"__esModule",{value:!0});T0.forEach=T0.mapAsync=T0.map=T0.clearTestMode=T0.setTestMode=T0.Semaphore=T0.Delayer=void 0;var bJ=Z$();class Q5{constructor($){this.defaultDelay=$,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger($,Z=this.defaultDelay){if(this.task=$,Z>=0)this.cancelTimeout();if(!this.completionPromise)this.completionPromise=new Promise((J)=>{this.onSuccess=J}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var J=this.task();return this.task=void 0,J});if(Z>=0||this.timeout===void 0)this.timeout=(0,bJ.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},Z>=0?Z:this.defaultDelay);return this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let $=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,$}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){if(this.timeout!==void 0)this.timeout.dispose(),this.timeout=void 0}}T0.Delayer=Q5;class X5{constructor($=1){if($<=0)throw Error("Capacity must be greater than 0");this._capacity=$,this._active=0,this._waiting=[]}lock($){return new Promise((Z,J)=>{this._waiting.push({thunk:$,resolve:Z,reject:J}),this.runNext()})}get active(){return this._active}runNext(){if(this._waiting.length===0||this._active===this._capacity)return;(0,bJ.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let $=this._waiting.shift();if(this._active++,this._active>this._capacity)throw Error("To many thunks active");try{let Z=$.thunk();if(Z instanceof Promise)Z.then((J)=>{this._active--,$.resolve(J),this.runNext()},(J)=>{this._active--,$.reject(J),this.runNext()});else this._active--,$.resolve(Z),this.runNext()}catch(Z){this._active--,$.reject(Z),this.runNext()}}}T0.Semaphore=X5;var _6=!1;function fV(){_6=!0}T0.setTestMode=fV;function kV(){_6=!1}T0.clearTestMode=kV;var Y5=15;class fY{constructor($=Y5){this.yieldAfter=_6===!0?Math.max($,2):Math.max($,Y5),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let $=Date.now()-this.startTime,Z=Math.max(0,this.yieldAfter-$);if(this.total+=this.counter,this.counter=0,$>=this.yieldAfter||Z<=1)return this.counterInterval=1,this.total=0,!0;else switch($){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}}async function vV($,Z,J,Y){if($.length===0)return[];let Q=Array($.length),X=new fY(Y?.yieldAfter);function z(j){X.start();for(let H=j;H<$.length;H++)if(Q[H]=Z($[H]),X.shouldYield())return Y?.yieldCallback&&Y.yieldCallback(),H+1;return-1}let B=z(0);while(B!==-1){if(J!==void 0&&J.isCancellationRequested)break;B=await new Promise((j)=>{(0,bJ.RAL)().timer.setImmediate(()=>{j(z(B))})})}return Q}T0.map=vV;async function gV($,Z,J,Y){if($.length===0)return[];let Q=Array($.length),X=new fY(Y?.yieldAfter);async function z(j){X.start();for(let H=j;H<$.length;H++)if(Q[H]=await Z($[H],J),X.shouldYield())return Y?.yieldCallback&&Y.yieldCallback(),H+1;return-1}let B=await z(0);while(B!==-1){if(J!==void 0&&J.isCancellationRequested)break;B=await new Promise((j)=>{(0,bJ.RAL)().timer.setImmediate(()=>{j(z(B))})})}return Q}T0.mapAsync=gV;async function pV($,Z,J,Y){if($.length===0)return;let Q=new fY(Y?.yieldAfter);function X(B){Q.start();for(let j=B;j<$.length;j++)if(Z($[j]),Q.shouldYield())return Y?.yieldCallback&&Y.yieldCallback(),j+1;return-1}let z=X(0);while(z!==-1){if(J!==void 0&&J.isCancellationRequested)break;z=await new Promise((B)=>{(0,bJ.RAL)().timer.setImmediate(()=>{B(X(z))})})}}T0.forEach=pV});var h6=D((x6)=>{Object.defineProperty(x6,"__esModule",{value:!0});var dV=require("vscode");class z5 extends dV.CompletionItem{constructor($){super($)}}x6.default=z5});var k6=D((f6)=>{Object.defineProperty(f6,"__esModule",{value:!0});var mV=require("vscode");class G5 extends mV.CodeLens{constructor($){super($)}}f6.default=G5});var g6=D((v6)=>{Object.defineProperty(v6,"__esModule",{value:!0});var uV=require("vscode");class B5 extends uV.DocumentLink{constructor($,Z){super($,Z)}}v6.default=B5});var d6=D((p6)=>{Object.defineProperty(p6,"__esModule",{value:!0});var lV=require("vscode");class j5 extends lV.CodeAction{constructor($,Z){super($);this.data=Z}}p6.default=j5});var u6=D((zJ)=>{Object.defineProperty(zJ,"__esModule",{value:!0});zJ.ProtocolDiagnostic=zJ.DiagnosticCode=void 0;var cV=require("vscode"),m6=XZ(),K5;(function($){function Z(J){let Y=J;return Y!==void 0&&Y!==null&&(m6.number(Y.value)||m6.string(Y.value))&&m6.string(Y.target)}$.is=Z})(K5||(zJ.DiagnosticCode=K5={}));class V5 extends cV.Diagnostic{constructor($,Z,J,Y){super($,Z,J);this.data=Y,this.hasDiagnosticCode=!1}}zJ.ProtocolDiagnostic=V5});var c6=D((l6)=>{Object.defineProperty(l6,"__esModule",{value:!0});var iV=require("vscode");class W5 extends iV.CallHierarchyItem{constructor($,Z,J,Y,Q,X,z){super($,Z,J,Y,Q,X);if(z!==void 0)this.data=z}}l6.default=W5});var n6=D((i6)=>{Object.defineProperty(i6,"__esModule",{value:!0});var nV=require("vscode");class H5 extends nV.TypeHierarchyItem{constructor($,Z,J,Y,Q,X,z){super($,Z,J,Y,Q,X);if(z!==void 0)this.data=z}}i6.default=H5});var s6=D((a6)=>{Object.defineProperty(a6,"__esModule",{value:!0});var vY=require("vscode");class A5 extends vY.SymbolInformation{constructor($,Z,J,Y,Q){let X=!(Y instanceof vY.Uri);super($,Z,J,X?Y:new vY.Location(Y,new vY.Range(0,0,0,0)));if(this.hasRange=X,Q!==void 0)this.data=Q}}a6.default=A5});var o6=D((r6)=>{Object.defineProperty(r6,"__esModule",{value:!0});var aV=require("vscode");class O5 extends aV.InlayHint{constructor($,Z,J){super($,Z,J)}}r6.default=O5});var N5=D((gY)=>{Object.defineProperty(gY,"__esModule",{value:!0});gY.createConverter=void 0;var X0=require("vscode"),J$=Z$(),I9=XZ(),E5=kY(),sV=h6(),rV=k6(),oV=g6(),U5=d6(),w5=u6(),tV=c6(),eV=n6(),$W=s6(),ZW=o6(),t6;(function($){function Z(J){let Y=J;return Y&&!!Y.inserting&&!!Y.replacing}$.is=Z})(t6||(t6={}));function JW($){let J=$||((V)=>V.toString());function Y(V){return J(V)}function Q(V){return{uri:J(V.uri)}}function X(V){return{uri:J(V.uri),languageId:V.languageId,version:V.version,text:V.getText()}}function z(V){return{uri:J(V.uri),version:V.version}}function B(V){return{textDocument:X(V)}}function j(V){let S=V;return!!S.document&&!!S.contentChanges}function H(V){let S=V;return!!S.uri&&!!S.version}function O(V,S,n){if(H(V))return{textDocument:{uri:J(V.uri),version:V.version},contentChanges:[{text:V.getText()}]};else if(j(V)){let M$=S,I=n;return{textDocument:{uri:J(M$),version:I},contentChanges:V.contentChanges.map((F)=>{let P=F.range;return{range:{start:{line:P.start.line,character:P.start.character},end:{line:P.end.line,character:P.end.character}},rangeLength:F.rangeLength,text:F.text}})}}else throw Error("Unsupported text document change parameter")}function N(V){return{textDocument:Q(V)}}function U(V,S=!1){let n={textDocument:Q(V)};if(S)n.text=V.getText();return n}function E(V){switch(V){case X0.TextDocumentSaveReason.Manual:return J$.TextDocumentSaveReason.Manual;case X0.TextDocumentSaveReason.AfterDelay:return J$.TextDocumentSaveReason.AfterDelay;case X0.TextDocumentSaveReason.FocusOut:return J$.TextDocumentSaveReason.FocusOut}return J$.TextDocumentSaveReason.Manual}function T(V){return{textDocument:Q(V.document),reason:E(V.reason)}}function C(V){return{files:V.files.map((S)=>({uri:J(S)}))}}function x(V){return{files:V.files.map((S)=>({oldUri:J(S.oldUri),newUri:J(S.newUri)}))}}function h(V){return{files:V.files.map((S)=>({uri:J(S)}))}}function d(V){return{files:V.files.map((S)=>({uri:J(S)}))}}function k(V){return{files:V.files.map((S)=>({oldUri:J(S.oldUri),newUri:J(S.newUri)}))}}function V$(V){return{files:V.files.map((S)=>({uri:J(S)}))}}function e(V,S){return{textDocument:Q(V),position:b0(S)}}function l(V){switch(V){case X0.CompletionTriggerKind.TriggerCharacter:return J$.CompletionTriggerKind.TriggerCharacter;case X0.CompletionTriggerKind.TriggerForIncompleteCompletions:return J$.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return J$.CompletionTriggerKind.Invoked}}function s(V,S,n){return{textDocument:Q(V),position:b0(S),context:{triggerKind:l(n.triggerKind),triggerCharacter:n.triggerCharacter}}}function W$(V){switch(V){case X0.SignatureHelpTriggerKind.Invoke:return J$.SignatureHelpTriggerKind.Invoked;case X0.SignatureHelpTriggerKind.TriggerCharacter:return J$.SignatureHelpTriggerKind.TriggerCharacter;case X0.SignatureHelpTriggerKind.ContentChange:return J$.SignatureHelpTriggerKind.ContentChange}}function g$(V){return{label:V.label}}function h$(V){return V.map(g$)}function f0(V){return{label:V.label,parameters:h$(V.parameters)}}function J0(V){return V.map(f0)}function JZ(V){if(V===void 0)return V;return{signatures:J0(V.signatures),activeSignature:V.activeSignature,activeParameter:V.activeParameter}}function O0(V,S,n){return{textDocument:Q(V),position:b0(S),context:{isRetrigger:n.isRetrigger,triggerCharacter:n.triggerCharacter,triggerKind:W$(n.triggerKind),activeSignatureHelp:JZ(n.activeSignatureHelp)}}}function b0(V){return{line:V.line,character:V.character}}function B0(V){if(V===void 0||V===null)return V;return{line:V.line>J$.uinteger.MAX_VALUE?J$.uinteger.MAX_VALUE:V.line,character:V.character>J$.uinteger.MAX_VALUE?J$.uinteger.MAX_VALUE:V.character}}function gZ(V,S){return E5.map(V,B0,S)}function TZ(V){return V.map(B0)}function f$(V){if(V===void 0||V===null)return V;return{start:B0(V.start),end:B0(V.end)}}function k0(V){return V.map(f$)}function R0(V){if(V===void 0||V===null)return V;return J$.Location.create(Y(V.uri),f$(V.range))}function E0(V){switch(V){case X0.DiagnosticSeverity.Error:return J$.DiagnosticSeverity.Error;case X0.DiagnosticSeverity.Warning:return J$.DiagnosticSeverity.Warning;case X0.DiagnosticSeverity.Information:return J$.DiagnosticSeverity.Information;case X0.DiagnosticSeverity.Hint:return J$.DiagnosticSeverity.Hint}}function tZ(V){if(!V)return;let S=[];for(let n of V){let M$=qZ(n);if(M$!==void 0)S.push(M$)}return S.length>0?S:void 0}function qZ(V){switch(V){case X0.DiagnosticTag.Unnecessary:return J$.DiagnosticTag.Unnecessary;case X0.DiagnosticTag.Deprecated:return J$.DiagnosticTag.Deprecated;default:return}}function CZ(V){return{message:V.message,location:R0(V.location)}}function pZ(V){return V.map(CZ)}function eZ(V){if(V===void 0||V===null)return;if(I9.number(V)||I9.string(V))return V;return{value:V.value,target:Y(V.target)}}function SZ(V){let S=J$.Diagnostic.create(f$(V.range),V.message),n=V instanceof w5.ProtocolDiagnostic?V:void 0;if(n!==void 0&&n.data!==void 0)S.data=n.data;let M$=eZ(V.code);if(w5.DiagnosticCode.is(M$))if(n!==void 0&&n.hasDiagnosticCode)S.code=M$;else S.code=M$.value,S.codeDescription={href:M$.target};else S.code=M$;if(I9.number(V.severity))S.severity=E0(V.severity);if(Array.isArray(V.tags))S.tags=tZ(V.tags);if(V.relatedInformation)S.relatedInformation=pZ(V.relatedInformation);if(V.source)S.source=V.source;return S}function WZ(V,S){if(V===void 0||V===null)return V;return E5.map(V,SZ,S)}function HZ(V){if(V===void 0||V===null)return V;return V.map(SZ)}function DZ(V,S){switch(V){case"$string":return S;case J$.MarkupKind.PlainText:return{kind:V,value:S};case J$.MarkupKind.Markdown:return{kind:V,value:S.value};default:return`Unsupported Markup content received. Kind is: ${V}`}}function Y0(V){switch(V){case X0.CompletionItemTag.Deprecated:return J$.CompletionItemTag.Deprecated}return}function dZ(V){if(V===void 0)return V;let S=[];for(let n of V){let M$=Y0(n);if(M$!==void 0)S.push(M$)}return S}function AZ(V,S){if(S!==void 0)return S;return V+1}function YZ(V,S=!1){let n,M$;if(I9.string(V.label))n=V.label;else if(n=V.label.label,S&&(V.label.detail!==void 0||V.label.description!==void 0))M$={detail:V.label.detail,description:V.label.description};let I={label:n};if(M$!==void 0)I.labelDetails=M$;let W=V instanceof sV.default?V:void 0;if(V.detail)I.detail=V.detail;if(V.documentation)if(!W||W.documentationFormat==="$string")I.documentation=V.documentation;else I.documentation=DZ(W.documentationFormat,V.documentation);if(V.filterText)I.filterText=V.filterText;if($9(I,V),I9.number(V.kind))I.kind=AZ(V.kind,W&&W.originalItemKind);if(V.sortText)I.sortText=V.sortText;if(V.additionalTextEdits)I.additionalTextEdits=Z0(V.additionalTextEdits);if(V.commitCharacters)I.commitCharacters=V.commitCharacters.slice();if(V.command)I.command=u(V.command);if(V.preselect===!0||V.preselect===!1)I.preselect=V.preselect;let F=dZ(V.tags);if(W){if(W.data!==void 0)I.data=W.data;if(W.deprecated===!0||W.deprecated===!1){if(W.deprecated===!0&&F!==void 0&&F.length>0){let P=F.indexOf(X0.CompletionItemTag.Deprecated);if(P!==-1)F.splice(P,1)}I.deprecated=W.deprecated}if(W.insertTextMode!==void 0)I.insertTextMode=W.insertTextMode}if(F!==void 0&&F.length>0)I.tags=F;if(I.insertTextMode===void 0&&V.keepWhitespace===!0)I.insertTextMode=J$.InsertTextMode.adjustIndentation;return I}function $9(V,S){let n=J$.InsertTextFormat.PlainText,M$=void 0,I=void 0;if(S.textEdit)M$=S.textEdit.newText,I=S.textEdit.range;else if(S.insertText instanceof X0.SnippetString)n=J$.InsertTextFormat.Snippet,M$=S.insertText.value;else M$=S.insertText;if(S.range)I=S.range;if(V.insertTextFormat=n,S.fromEdit&&M$!==void 0&&I!==void 0)V.textEdit=QZ(M$,I);else V.insertText=M$}function QZ(V,S){if(t6.is(S))return J$.InsertReplaceEdit.create(V,f$(S.inserting),f$(S.replacing));else return{newText:V,range:f$(S)}}function bZ(V){return{range:f$(V.range),newText:V.newText}}function Z0(V){if(V===void 0||V===null)return V;return V.map(bZ)}function L0(V){if(V<=X0.SymbolKind.TypeParameter)return V+1;return J$.SymbolKind.Property}function U0(V){return V}function i0(V){return V.map(U0)}function v0(V,S,n){return{textDocument:Q(V),position:b0(S),context:{includeDeclaration:n.includeDeclaration}}}async function RZ(V,S){let n=J$.CodeAction.create(V.title);if(V instanceof U5.default&&V.data!==void 0)n.data=V.data;if(V.kind!==void 0)n.kind=L(V.kind);if(V.diagnostics!==void 0)n.diagnostics=await WZ(V.diagnostics,S);if(V.edit!==void 0)throw Error("VS Code code actions can only be converted to a protocol code action without an edit.");if(V.command!==void 0)n.command=u(V.command);if(V.isPreferred!==void 0)n.isPreferred=V.isPreferred;if(V.disabled!==void 0)n.disabled={reason:V.disabled.reason};return n}function mZ(V){let S=J$.CodeAction.create(V.title);if(V instanceof U5.default&&V.data!==void 0)S.data=V.data;if(V.kind!==void 0)S.kind=L(V.kind);if(V.diagnostics!==void 0)S.diagnostics=HZ(V.diagnostics);if(V.edit!==void 0)throw Error("VS Code code actions can only be converted to a protocol code action without an edit.");if(V.command!==void 0)S.command=u(V.command);if(V.isPreferred!==void 0)S.isPreferred=V.isPreferred;if(V.disabled!==void 0)S.disabled={reason:V.disabled.reason};return S}async function OZ(V,S){if(V===void 0||V===null)return V;let n;if(V.only&&I9.string(V.only.value))n=[V.only.value];return J$.CodeActionContext.create(await WZ(V.diagnostics,S),n,y0(V.triggerKind))}function uZ(V){if(V===void 0||V===null)return V;let S;if(V.only&&I9.string(V.only.value))S=[V.only.value];return J$.CodeActionContext.create(HZ(V.diagnostics),S,y0(V.triggerKind))}function y0(V){switch(V){case X0.CodeActionTriggerKind.Invoke:return J$.CodeActionTriggerKind.Invoked;case X0.CodeActionTriggerKind.Automatic:return J$.CodeActionTriggerKind.Automatic;default:return}}function L(V){if(V===void 0||V===null)return;return V.value}function R(V){if(V===void 0||V===null)return V;return J$.InlineValueContext.create(V.frameId,f$(V.stoppedLocation))}function p(V,S,n){return{context:J$.InlineCompletionContext.create(n.triggerKind,n.selectedCompletionInfo),textDocument:Q(V),position:B0(S)}}function u(V){let S=J$.Command.create(V.title,V.command);if(V.arguments)S.arguments=V.arguments;return S}function L$(V){let S=J$.CodeLens.create(f$(V.range));if(V.command)S.command=u(V.command);if(V instanceof rV.default){if(V.data)S.data=V.data}return S}function w$(V,S){let n={tabSize:V.tabSize,insertSpaces:V.insertSpaces};if(S.trimTrailingWhitespace)n.trimTrailingWhitespace=!0;if(S.trimFinalNewlines)n.trimFinalNewlines=!0;if(S.insertFinalNewline)n.insertFinalNewline=!0;return n}function q$(V){return{textDocument:Q(V)}}function b$(V){return{textDocument:Q(V)}}function z$(V){let S=J$.DocumentLink.create(f$(V.range));if(V.target)S.target=Y(V.target);if(V.tooltip!==void 0)S.tooltip=V.tooltip;let n=V instanceof oV.default?V:void 0;if(n&&n.data)S.data=n.data;return S}function P$(V){return{textDocument:Q(V)}}function A$(V){let S={name:V.name,kind:L0(V.kind),uri:Y(V.uri),range:f$(V.range),selectionRange:f$(V.selectionRange)};if(V.detail!==void 0&&V.detail.length>0)S.detail=V.detail;if(V.tags!==void 0)S.tags=i0(V.tags);if(V instanceof tV.default&&V.data!==void 0)S.data=V.data;return S}function R$(V){let S={name:V.name,kind:L0(V.kind),uri:Y(V.uri),range:f$(V.range),selectionRange:f$(V.selectionRange)};if(V.detail!==void 0&&V.detail.length>0)S.detail=V.detail;if(V.tags!==void 0)S.tags=i0(V.tags);if(V instanceof eV.default&&V.data!==void 0)S.data=V.data;return S}function o$(V){let S=V instanceof $W.default?{name:V.name,kind:L0(V.kind),location:V.hasRange?R0(V.location):{uri:J(V.location.uri)},data:V.data}:{name:V.name,kind:L0(V.kind),location:R0(V.location)};if(V.tags!==void 0)S.tags=i0(V.tags);if(V.containerName!=="")S.containerName=V.containerName;return S}function j0(V){let S=typeof V.label==="string"?V.label:V.label.map(Z9),n=J$.InlayHint.create(B0(V.position),S);if(V.kind!==void 0)n.kind=V.kind;if(V.textEdits!==void 0)n.textEdits=Z0(V.textEdits);if(V.tooltip!==void 0)n.tooltip=J9(V.tooltip);if(V.paddingLeft!==void 0)n.paddingLeft=V.paddingLeft;if(V.paddingRight!==void 0)n.paddingRight=V.paddingRight;if(V instanceof ZW.default&&V.data!==void 0)n.data=V.data;return n}function Z9(V){let S=J$.InlayHintLabelPart.create(V.value);if(V.location!==void 0)S.location=R0(V.location);if(V.command!==void 0)S.command=u(V.command);if(V.tooltip!==void 0)S.tooltip=J9(V.tooltip);return S}function J9(V){if(typeof V==="string")return V;return{kind:J$.MarkupKind.Markdown,value:V.value}}return{asUri:Y,asTextDocumentIdentifier:Q,asTextDocumentItem:X,asVersionedTextDocumentIdentifier:z,asOpenTextDocumentParams:B,asChangeTextDocumentParams:O,asCloseTextDocumentParams:N,asSaveTextDocumentParams:U,asWillSaveTextDocumentParams:T,asDidCreateFilesParams:C,asDidRenameFilesParams:x,asDidDeleteFilesParams:h,asWillCreateFilesParams:d,asWillRenameFilesParams:k,asWillDeleteFilesParams:V$,asTextDocumentPositionParams:e,asCompletionParams:s,asSignatureHelpParams:O0,asWorkerPosition:b0,asRange:f$,asRanges:k0,asPosition:B0,asPositions:gZ,asPositionsSync:TZ,asLocation:R0,asDiagnosticSeverity:E0,asDiagnosticTag:qZ,asDiagnostic:SZ,asDiagnostics:WZ,asDiagnosticsSync:HZ,asCompletionItem:YZ,asTextEdit:bZ,asSymbolKind:L0,asSymbolTag:U0,asSymbolTags:i0,asReferenceParams:v0,asCodeAction:RZ,asCodeActionSync:mZ,asCodeActionContext:OZ,asCodeActionContextSync:uZ,asInlineValueContext:R,asCommand:u,asCodeLens:L$,asFormattingOptions:w$,asDocumentSymbolParams:q$,asCodeLensParams:b$,asDocumentLink:z$,asDocumentLinkParams:P$,asCallHierarchyItem:A$,asTypeHierarchyItem:R$,asInlayHint:j0,asWorkspaceSymbol:o$,asInlineCompletionParams:p}}gY.createConverter=JW});var P5=D((dY)=>{Object.defineProperty(dY,"__esModule",{value:!0});dY.createConverter=void 0;var m=require("vscode"),t=Z$(),BZ=XZ(),F$=kY(),YW=h6(),QW=k6(),XW=g6(),zW=d6(),L5=u6(),GW=c6(),BW=n6(),jW=s6(),KW=o6(),F5=Z$(),pY;(function($){function Z(J){let Y=J;return Y&&BZ.string(Y.language)&&BZ.string(Y.value)}$.is=Z})(pY||(pY={}));function VW($,Z,J){let Q=$||((G)=>m.Uri.parse(G));function X(G){return Q(G)}function z(G){let M=[];for(let _ of G)if(typeof _==="string")M.push(_);else if(F5.NotebookCellTextDocumentFilter.is(_))if(typeof _.notebook==="string")M.push({notebookType:_.notebook,language:_.language});else{let a=_.notebook.notebookType??"*";M.push({notebookType:a,scheme:_.notebook.scheme,pattern:_.notebook.pattern,language:_.language})}else if(F5.TextDocumentFilter.is(_))M.push({language:_.language,scheme:_.scheme,pattern:_.pattern});return M}async function B(G,M){return F$.map(G,H,M)}function j(G){let M=Array(G.length);for(let _=0;_<G.length;_++)M[_]=H(G[_]);return M}function H(G){let M=new L5.ProtocolDiagnostic(T(G.range),G.message,x(G.severity),G.data);if(G.code!==void 0){if(typeof G.code==="string"||typeof G.code==="number")if(t.CodeDescription.is(G.codeDescription))M.code={value:G.code,target:X(G.codeDescription.href)};else M.code=G.code;else if(L5.DiagnosticCode.is(G.code)){M.hasDiagnosticCode=!0;let _=G.code;M.code={value:_.value,target:X(_.target)}}}if(G.source)M.source=G.source;if(G.relatedInformation)M.relatedInformation=O(G.relatedInformation);if(Array.isArray(G.tags))M.tags=N(G.tags);return M}function O(G){let M=Array(G.length);for(let _=0;_<G.length;_++){let a=G[_];M[_]=new m.DiagnosticRelatedInformation(E0(a.location),a.message)}return M}function N(G){if(!G)return;let M=[];for(let _ of G){let a=U(_);if(a!==void 0)M.push(a)}return M.length>0?M:void 0}function U(G){switch(G){case t.DiagnosticTag.Unnecessary:return m.DiagnosticTag.Unnecessary;case t.DiagnosticTag.Deprecated:return m.DiagnosticTag.Deprecated;default:return}}function E(G){return G?new m.Position(G.line,G.character):void 0}function T(G){return G?new m.Range(G.start.line,G.start.character,G.end.line,G.end.character):void 0}async function C(G,M){return F$.map(G,(_)=>{return new m.Range(_.start.line,_.start.character,_.end.line,_.end.character)},M)}function x(G){if(G===void 0||G===null)return m.DiagnosticSeverity.Error;switch(G){case t.DiagnosticSeverity.Error:return m.DiagnosticSeverity.Error;case t.DiagnosticSeverity.Warning:return m.DiagnosticSeverity.Warning;case t.DiagnosticSeverity.Information:return m.DiagnosticSeverity.Information;case t.DiagnosticSeverity.Hint:return m.DiagnosticSeverity.Hint}return m.DiagnosticSeverity.Error}function h(G){if(BZ.string(G))return k(G);else if(pY.is(G))return k().appendCodeblock(G.value,G.language);else if(Array.isArray(G)){let M=[];for(let _ of G){let a=k();if(pY.is(_))a.appendCodeblock(_.value,_.language);else a.appendMarkdown(_);M.push(a)}return M}else return k(G)}function d(G){if(BZ.string(G))return G;else switch(G.kind){case t.MarkupKind.Markdown:return k(G.value);case t.MarkupKind.PlainText:return G.value;default:return`Unsupported Markup content received. Kind is: ${G.kind}`}}function k(G){let M;if(G===void 0||typeof G==="string")M=new m.MarkdownString(G);else switch(G.kind){case t.MarkupKind.Markdown:M=new m.MarkdownString(G.value);break;case t.MarkupKind.PlainText:M=new m.MarkdownString,M.appendText(G.value);break;default:M=new m.MarkdownString,M.appendText(`Unsupported Markup content received. Kind is: ${G.kind}`);break}return M.isTrusted=Z,M.supportHtml=J,M}function V$(G){if(!G)return;return new m.Hover(h(G.contents),T(G.range))}async function e(G,M,_){if(!G)return;if(Array.isArray(G))return F$.map(G,(_Z)=>h$(_Z,M),_);let a=G,{defaultRange:K0,commitCharacters:w0}=l(a,M),D$=await F$.map(a.items,(_Z)=>{return h$(_Z,w0,K0,a.itemDefaults?.insertTextMode,a.itemDefaults?.insertTextFormat,a.itemDefaults?.data)},_);return new m.CompletionList(D$,a.isIncomplete)}function l(G,M){let _=G.itemDefaults?.editRange,a=G.itemDefaults?.commitCharacters??M;return t.Range.is(_)?{defaultRange:T(_),commitCharacters:a}:_!==void 0?{defaultRange:{inserting:T(_.insert),replacing:T(_.replace)},commitCharacters:a}:{defaultRange:void 0,commitCharacters:a}}function s(G){if(t.CompletionItemKind.Text<=G&&G<=t.CompletionItemKind.TypeParameter)return[G-1,void 0];return[m.CompletionItemKind.Text,G]}function W$(G){switch(G){case t.CompletionItemTag.Deprecated:return m.CompletionItemTag.Deprecated}return}function g$(G){if(G===void 0||G===null)return[];let M=[];for(let _ of G){let a=W$(_);if(a!==void 0)M.push(a)}return M}function h$(G,M,_,a,K0,w0){let D$=g$(G.tags),_Z=f0(G),_$=new YW.default(_Z);if(G.detail)_$.detail=G.detail;if(G.documentation)_$.documentation=d(G.documentation),_$.documentationFormat=BZ.string(G.documentation)?"$string":G.documentation.kind;if(G.filterText)_$.filterText=G.filterText;let ZY=J0(G,_,K0);if(ZY)_$.insertText=ZY.text,_$.range=ZY.range,_$.fromEdit=ZY.fromEdit;if(BZ.number(G.kind)){let[FK,D4]=s(G.kind);if(_$.kind=FK,D4)_$.originalItemKind=D4}if(G.sortText)_$.sortText=G.sortText;if(G.additionalTextEdits)_$.additionalTextEdits=B0(G.additionalTextEdits);let C4=G.commitCharacters!==void 0?BZ.stringArray(G.commitCharacters)?G.commitCharacters:void 0:M;if(C4)_$.commitCharacters=C4.slice();if(G.command)_$.command=Z0(G.command);if(G.deprecated===!0||G.deprecated===!1){if(_$.deprecated=G.deprecated,G.deprecated===!0)D$.push(m.CompletionItemTag.Deprecated)}if(G.preselect===!0||G.preselect===!1)_$.preselect=G.preselect;let S4=G.data??w0;if(S4!==void 0)_$.data=S4;if(D$.length>0)_$.tags=D$;let l8=G.insertTextMode??a;if(l8!==void 0){if(_$.insertTextMode=l8,l8===t.InsertTextMode.asIs)_$.keepWhitespace=!0}return _$}function f0(G){if(t.CompletionItemLabelDetails.is(G.labelDetails))return{label:G.label,detail:G.labelDetails.detail,description:G.labelDetails.description};else return G.label}function J0(G,M,_){let a=G.insertTextFormat??_;if(G.textEdit!==void 0||M!==void 0){let[K0,w0]=G.textEdit!==void 0?JZ(G.textEdit):[M,G.textEditText??G.label];if(a===t.InsertTextFormat.Snippet)return{text:new m.SnippetString(w0),range:K0,fromEdit:!0};else return{text:w0,range:K0,fromEdit:!0}}else if(G.insertText)if(a===t.InsertTextFormat.Snippet)return{text:new m.SnippetString(G.insertText),fromEdit:!1};else return{text:G.insertText,fromEdit:!1};else return}function JZ(G){if(t.InsertReplaceEdit.is(G))return[{inserting:T(G.insert),replacing:T(G.replace)},G.newText];else return[T(G.range),G.newText]}function O0(G){if(!G)return;return new m.TextEdit(T(G.range),G.newText)}async function b0(G,M){if(!G)return;return F$.map(G,O0,M)}function B0(G){if(!G)return;let M=Array(G.length);for(let _=0;_<G.length;_++)M[_]=O0(G[_]);return M}async function gZ(G,M){if(!G)return;let _=new m.SignatureHelp;if(BZ.number(G.activeSignature))_.activeSignature=G.activeSignature;else _.activeSignature=0;if(BZ.number(G.activeParameter))_.activeParameter=G.activeParameter;else _.activeParameter=0;if(G.signatures)_.signatures=await TZ(G.signatures,M);return _}async function TZ(G,M){return F$.mapAsync(G,f$,M)}async function f$(G,M){let _=new m.SignatureInformation(G.label);if(G.documentation!==void 0)_.documentation=d(G.documentation);if(G.parameters!==void 0)_.parameters=await k0(G.parameters,M);if(G.activeParameter!==void 0)_.activeParameter=G.activeParameter;return _}function k0(G,M){return F$.map(G,R0,M)}function R0(G){let M=new m.ParameterInformation(G.label);if(G.documentation)M.documentation=d(G.documentation);return M}function E0(G){return G?new m.Location(Q(G.uri),T(G.range)):void 0}async function tZ(G,M){if(!G)return;return pZ(G,M)}async function qZ(G,M){if(!G)return;return pZ(G,M)}function CZ(G){if(!G)return;let M={targetUri:Q(G.targetUri),targetRange:T(G.targetRange),originSelectionRange:T(G.originSelectionRange),targetSelectionRange:T(G.targetSelectionRange)};if(!M.targetSelectionRange)throw Error("targetSelectionRange must not be undefined or null");return M}async function pZ(G,M){if(!G)return;if(BZ.array(G))if(G.length===0)return[];else if(t.LocationLink.is(G[0])){let _=G;return F$.map(_,CZ,M)}else{let _=G;return F$.map(_,E0,M)}else if(t.LocationLink.is(G))return[CZ(G)];else return E0(G)}async function eZ(G,M){if(!G)return;return F$.map(G,E0,M)}async function SZ(G,M){if(!G)return;return F$.map(G,WZ,M)}function WZ(G){let M=new m.DocumentHighlight(T(G.range));if(BZ.number(G.kind))M.kind=HZ(G.kind);return M}function HZ(G){switch(G){case t.DocumentHighlightKind.Text:return m.DocumentHighlightKind.Text;case t.DocumentHighlightKind.Read:return m.DocumentHighlightKind.Read;case t.DocumentHighlightKind.Write:return m.DocumentHighlightKind.Write}return m.DocumentHighlightKind.Text}async function DZ(G,M){if(!G)return;return F$.map(G,YZ,M)}function Y0(G){if(G<=t.SymbolKind.TypeParameter)return G-1;return m.SymbolKind.Property}function dZ(G){switch(G){case t.SymbolTag.Deprecated:return m.SymbolTag.Deprecated;default:return}}function AZ(G){if(G===void 0||G===null)return;let M=[];for(let _ of G){let a=dZ(_);if(a!==void 0)M.push(a)}return M.length===0?void 0:M}function YZ(G){let{data:M,location:_}=G,a=_.range===void 0||M!==void 0?new jW.default(G.name,Y0(G.kind),G.containerName??"",_.range===void 0?Q(_.uri):new m.Location(Q(G.location.uri),T(_.range)),M):new m.SymbolInformation(G.name,Y0(G.kind),G.containerName??"",new m.Location(Q(G.location.uri),T(_.range)));return bZ(a,G),a}async function $9(G,M){if(G===void 0||G===null)return;return F$.map(G,QZ,M)}function QZ(G){let M=new m.DocumentSymbol(G.name,G.detail||"",Y0(G.kind),T(G.range),T(G.selectionRange));if(bZ(M,G),G.children!==void 0&&G.children.length>0){let _=[];for(let a of G.children)_.push(QZ(a));M.children=_}return M}function bZ(G,M){if(G.tags=AZ(M.tags),M.deprecated){if(!G.tags)G.tags=[m.SymbolTag.Deprecated];else if(!G.tags.includes(m.SymbolTag.Deprecated))G.tags=G.tags.concat(m.SymbolTag.Deprecated)}}function Z0(G){let M={title:G.title,command:G.command};if(G.arguments)M.arguments=G.arguments;return M}async function L0(G,M){if(!G)return;return F$.map(G,Z0,M)}let U0=new Map;U0.set(t.CodeActionKind.Empty,m.CodeActionKind.Empty),U0.set(t.CodeActionKind.QuickFix,m.CodeActionKind.QuickFix),U0.set(t.CodeActionKind.Refactor,m.CodeActionKind.Refactor),U0.set(t.CodeActionKind.RefactorExtract,m.CodeActionKind.RefactorExtract),U0.set(t.CodeActionKind.RefactorInline,m.CodeActionKind.RefactorInline),U0.set(t.CodeActionKind.RefactorRewrite,m.CodeActionKind.RefactorRewrite),U0.set(t.CodeActionKind.Source,m.CodeActionKind.Source),U0.set(t.CodeActionKind.SourceOrganizeImports,m.CodeActionKind.SourceOrganizeImports);function i0(G){if(G===void 0||G===null)return;let M=U0.get(G);if(M)return M;let _=G.split(".");M=m.CodeActionKind.Empty;for(let a of _)M=M.append(a);return M}function v0(G){if(G===void 0||G===null)return;return G.map((M)=>i0(M))}async function RZ(G,M){if(G===void 0||G===null)return;let _=new zW.default(G.title,G.data);if(G.kind!==void 0)_.kind=i0(G.kind);if(G.diagnostics!==void 0)_.diagnostics=j(G.diagnostics);if(G.edit!==void 0)_.edit=await y0(G.edit,M);if(G.command!==void 0)_.command=Z0(G.command);if(G.isPreferred!==void 0)_.isPreferred=G.isPreferred;if(G.disabled!==void 0)_.disabled={reason:G.disabled.reason};return _}function mZ(G,M){return F$.mapAsync(G,async(_)=>{if(t.Command.is(_))return Z0(_);else return RZ(_,M)},M)}function OZ(G){if(!G)return;let M=new QW.default(T(G.range));if(G.command)M.command=Z0(G.command);if(G.data!==void 0&&G.data!==null)M.data=G.data;return M}async function uZ(G,M){if(!G)return;return F$.map(G,OZ,M)}async function y0(G,M){if(!G)return;let _=new Map;if(G.changeAnnotations!==void 0){let w0=G.changeAnnotations;await F$.forEach(Object.keys(w0),(D$)=>{let _Z=L(w0[D$]);_.set(D$,_Z)},M)}let a=(w0)=>{if(w0===void 0)return;else return _.get(w0)},K0=new m.WorkspaceEdit;if(G.documentChanges){let w0=G.documentChanges;await F$.forEach(w0,(D$)=>{if(t.CreateFile.is(D$))K0.createFile(Q(D$.uri),D$.options,a(D$.annotationId));else if(t.RenameFile.is(D$))K0.renameFile(Q(D$.oldUri),Q(D$.newUri),D$.options,a(D$.annotationId));else if(t.DeleteFile.is(D$))K0.deleteFile(Q(D$.uri),D$.options,a(D$.annotationId));else if(t.TextDocumentEdit.is(D$)){let _Z=Q(D$.textDocument.uri);for(let _$ of D$.edits)if(t.AnnotatedTextEdit.is(_$))K0.replace(_Z,T(_$.range),_$.newText,a(_$.annotationId));else K0.replace(_Z,T(_$.range),_$.newText)}else throw Error(`Unknown workspace edit change received:
${JSON.stringify(D$,void 0,4)}`)},M)}else if(G.changes){let w0=G.changes;await F$.forEach(Object.keys(w0),(D$)=>{K0.set(Q(D$),B0(w0[D$]))},M)}return K0}function L(G){if(G===void 0)return;return{label:G.label,needsConfirmation:!!G.needsConfirmation,description:G.description}}function R(G){let M=T(G.range),_=G.target?X(G.target):void 0,a=new XW.default(M,_);if(G.tooltip!==void 0)a.tooltip=G.tooltip;if(G.data!==void 0&&G.data!==null)a.data=G.data;return a}async function p(G,M){if(!G)return;return F$.map(G,R,M)}function u(G){return new m.Color(G.red,G.green,G.blue,G.alpha)}function L$(G){return new m.ColorInformation(T(G.range),u(G.color))}async function w$(G,M){if(!G)return;return F$.map(G,L$,M)}function q$(G){let M=new m.ColorPresentation(G.label);if(M.additionalTextEdits=B0(G.additionalTextEdits),G.textEdit)M.textEdit=O0(G.textEdit);return M}async function b$(G,M){if(!G)return;return F$.map(G,q$,M)}function z$(G){if(G)switch(G){case t.FoldingRangeKind.Comment:return m.FoldingRangeKind.Comment;case t.FoldingRangeKind.Imports:return m.FoldingRangeKind.Imports;case t.FoldingRangeKind.Region:return m.FoldingRangeKind.Region}return}function P$(G){return new m.FoldingRange(G.startLine,G.endLine,z$(G.kind))}async function A$(G,M){if(!G)return;return F$.map(G,P$,M)}function R$(G){return new m.SelectionRange(T(G.range),G.parent?R$(G.parent):void 0)}async function o$(G,M){if(!Array.isArray(G))return[];return F$.map(G,R$,M)}function j0(G){if(t.InlineValueText.is(G))return new m.InlineValueText(T(G.range),G.text);else if(t.InlineValueVariableLookup.is(G))return new m.InlineValueVariableLookup(T(G.range),G.variableName,G.caseSensitiveLookup);else return new m.InlineValueEvaluatableExpression(T(G.range),G.expression)}async function Z9(G,M){if(!Array.isArray(G))return[];return F$.map(G,j0,M)}async function J9(G,M){let _=typeof G.label==="string"?G.label:await F$.map(G.label,V,M),a=new KW.default(E(G.position),_);if(G.kind!==void 0)a.kind=G.kind;if(G.textEdits!==void 0)a.textEdits=await b0(G.textEdits,M);if(G.tooltip!==void 0)a.tooltip=S(G.tooltip);if(G.paddingLeft!==void 0)a.paddingLeft=G.paddingLeft;if(G.paddingRight!==void 0)a.paddingRight=G.paddingRight;if(G.data!==void 0)a.data=G.data;return a}function V(G){let M=new m.InlayHintLabelPart(G.value);if(G.location!==void 0)M.location=E0(G.location);if(G.tooltip!==void 0)M.tooltip=S(G.tooltip);if(G.command!==void 0)M.command=Z0(G.command);return M}function S(G){if(typeof G==="string")return G;return k(G)}async function n(G,M){if(!Array.isArray(G))return;return F$.mapAsync(G,J9,M)}function M$(G){if(G===null)return;let M=new GW.default(Y0(G.kind),G.name,G.detail||"",X(G.uri),T(G.range),T(G.selectionRange),G.data);if(G.tags!==void 0)M.tags=AZ(G.tags);return M}async function I(G,M){if(G===null)return;return F$.map(G,M$,M)}async function W(G,M){return new m.CallHierarchyIncomingCall(M$(G.from),await C(G.fromRanges,M))}async function F(G,M){if(G===null)return;return F$.mapAsync(G,W,M)}async function P(G,M){return new m.CallHierarchyOutgoingCall(M$(G.to),await C(G.fromRanges,M))}async function A(G,M){if(G===null)return;return F$.mapAsync(G,P,M)}async function K(G,M){if(G===void 0||G===null)return;return new m.SemanticTokens(new Uint32Array(G.data),G.resultId)}function q(G){return new m.SemanticTokensEdit(G.start,G.deleteCount,G.data!==void 0?new Uint32Array(G.data):void 0)}async function y(G,M){if(G===void 0||G===null)return;return new m.SemanticTokensEdits(G.edits.map(q),G.resultId)}function $$(G){return G}async function p$(G,M){if(G===null||G===void 0)return;return new m.LinkedEditingRanges(await C(G.ranges,M),y$(G.wordPattern))}function y$(G){if(G===null||G===void 0)return;return new RegExp(G)}function g0(G){if(G===null)return;let M=new BW.default(Y0(G.kind),G.name,G.detail||"",X(G.uri),T(G.range),T(G.selectionRange),G.data);if(G.tags!==void 0)M.tags=AZ(G.tags);return M}async function n0(G,M){if(G===null)return;return F$.map(G,g0,M)}function EZ(G){if(BZ.string(G))return G;if(t.RelativePattern.is(G)){if(t.URI.is(G.baseUri))return new m.RelativePattern(X(G.baseUri),G.pattern);else if(t.WorkspaceFolder.is(G.baseUri)){let M=m.workspace.getWorkspaceFolder(X(G.baseUri.uri));return M!==void 0?new m.RelativePattern(M,G.pattern):void 0}}return}async function H$(G,M){if(!G)return;if(Array.isArray(G))return F$.map(G,(K0)=>yZ(K0),M);let _=G,a=await F$.map(_.items,(K0)=>{return yZ(K0)},M);return new m.InlineCompletionList(a)}function yZ(G){let M;if(typeof G.insertText==="string")M=G.insertText;else M=new m.SnippetString(G.insertText.value);let _=void 0;if(G.command)_=Z0(G.command);let a=new m.InlineCompletionItem(M,T(G.range),_);if(G.filterText)a.filterText=G.filterText;return a}return{asUri:X,asDocumentSelector:z,asDiagnostics:B,asDiagnostic:H,asRange:T,asRanges:C,asPosition:E,asDiagnosticSeverity:x,asDiagnosticTag:U,asHover:V$,asCompletionResult:e,asCompletionItem:h$,asTextEdit:O0,asTextEdits:b0,asSignatureHelp:gZ,asSignatureInformations:TZ,asSignatureInformation:f$,asParameterInformations:k0,asParameterInformation:R0,asDeclarationResult:tZ,asDefinitionResult:qZ,asLocation:E0,asReferences:eZ,asDocumentHighlights:SZ,asDocumentHighlight:WZ,asDocumentHighlightKind:HZ,asSymbolKind:Y0,asSymbolTag:dZ,asSymbolTags:AZ,asSymbolInformations:DZ,asSymbolInformation:YZ,asDocumentSymbols:$9,asDocumentSymbol:QZ,asCommand:Z0,asCommands:L0,asCodeAction:RZ,asCodeActionKind:i0,asCodeActionKinds:v0,asCodeActionResult:mZ,asCodeLens:OZ,asCodeLenses:uZ,asWorkspaceEdit:y0,asDocumentLink:R,asDocumentLinks:p,asFoldingRangeKind:z$,asFoldingRange:P$,asFoldingRanges:A$,asColor:u,asColorInformation:L$,asColorInformations:w$,asColorPresentation:q$,asColorPresentations:b$,asSelectionRange:R$,asSelectionRanges:o$,asInlineValue:j0,asInlineValues:Z9,asInlayHint:J9,asInlayHints:n,asSemanticTokensLegend:$$,asSemanticTokens:K,asSemanticTokensEdit:q,asSemanticTokensEdits:y,asCallHierarchyItem:M$,asCallHierarchyItems:I,asCallHierarchyIncomingCall:W,asCallHierarchyIncomingCalls:F,asCallHierarchyOutgoingCall:P,asCallHierarchyOutgoingCalls:A,asLinkedEditingRanges:p$,asTypeHierarchyItem:g0,asTypeHierarchyItems:n0,asGlobPattern:EZ,asInlineCompletionResult:H$,asInlineCompletionItem:yZ}}dY.createConverter=VW});var l$=D((jZ)=>{Object.defineProperty(jZ,"__esModule",{value:!0});jZ.generateUuid=jZ.parse=jZ.isUUID=jZ.v4=jZ.empty=void 0;class mY{constructor($){this._value=$}asHex(){return this._value}equals($){return this.asHex()===$.asHex()}}class j$ extends mY{static _oneOf($){return $[Math.floor($.length*Math.random())]}static _randomHex(){return j$._oneOf(j$._chars)}constructor(){super([j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),"-",j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),"-","4",j$._randomHex(),j$._randomHex(),j$._randomHex(),"-",j$._oneOf(j$._timeHighBits),j$._randomHex(),j$._randomHex(),j$._randomHex(),"-",j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex(),j$._randomHex()].join(""))}}j$._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];j$._timeHighBits=["8","9","a","b"];jZ.empty=new mY("00000000-0000-0000-0000-000000000000");function M5(){return new j$}jZ.v4=M5;var WW=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function I5($){return WW.test($)}jZ.isUUID=I5;function HW($){if(!I5($))throw Error("invalid uuid");return new mY($)}jZ.parse=HW;function AW(){return M5().asHex()}jZ.generateUuid=AW});var e6=D((uY)=>{Object.defineProperty(uY,"__esModule",{value:!0});uY.ProgressPart=void 0;var T5=require("vscode"),q5=Z$(),C5=XZ();class S5{constructor($,Z,J){this._client=$,this._token=Z,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(q5.WorkDoneProgress.type,this._token,(Y)=>{switch(Y.kind){case"begin":this.begin(Y);break;case"report":this.report(Y);break;case"end":this.done(),J&&J(this);break}})}begin($){if(this._infinite=$.percentage===void 0,this._lspProgressDisposable===void 0)return;T5.window.withProgress({location:T5.ProgressLocation.Window,cancellable:$.cancellable,title:$.title},async(Z,J)=>{if(this._lspProgressDisposable===void 0)return;return this._progress=Z,this._cancellationToken=J,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(q5.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report($),new Promise((Y,Q)=>{this._resolve=Y,this._reject=Q})})}report($){if(this._infinite&&C5.string($.message))this._progress!==void 0&&this._progress.report({message:$.message});else if(C5.number($.percentage)){let Z=Math.max(0,Math.min($.percentage,100)),J=Math.max(0,Z-this._reported);this._reported+=J,this._progress!==void 0&&this._progress.report({message:$.message,increment:J})}}cancel(){if(this.cleanup(),this._reject!==void 0)this._reject(),this._resolve=void 0,this._reject=void 0}done(){if(this.cleanup(),this._resolve!==void 0)this._resolve(),this._resolve=void 0,this._reject=void 0}cleanup(){if(this._lspProgressDisposable!==void 0)this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0;if(this._tokenDisposable!==void 0)this._tokenDisposable.dispose(),this._tokenDisposable=void 0;this._progress=void 0,this._cancellationToken=void 0}}uY.ProgressPart=S5});var N$=D((W0)=>{Object.defineProperty(W0,"__esModule",{value:!0});W0.WorkspaceFeature=W0.TextDocumentLanguageFeature=W0.TextDocumentEventFeature=W0.DynamicDocumentFeature=W0.DynamicFeature=W0.StaticFeature=W0.ensure=W0.LSPCancellationError=void 0;var T9=require("vscode"),$7=Z$(),_0=XZ(),D5=l$();class y5 extends T9.CancellationError{constructor($){super();this.data=$}}W0.LSPCancellationError=y5;function OW($,Z){if($[Z]===void 0)$[Z]={};return $[Z]}W0.ensure=OW;var b5;(function($){function Z(J){let Y=J;return Y!==void 0&&Y!==null&&_0.func(Y.fillClientCapabilities)&&_0.func(Y.initialize)&&_0.func(Y.getState)&&_0.func(Y.clear)&&(Y.fillInitializeParams===void 0||_0.func(Y.fillInitializeParams))}$.is=Z})(b5||(W0.StaticFeature=b5={}));var R5;(function($){function Z(J){let Y=J;return Y!==void 0&&Y!==null&&_0.func(Y.fillClientCapabilities)&&_0.func(Y.initialize)&&_0.func(Y.getState)&&_0.func(Y.clear)&&(Y.fillInitializeParams===void 0||_0.func(Y.fillInitializeParams))&&_0.func(Y.register)&&_0.func(Y.unregister)&&Y.registrationType!==void 0}$.is=Z})(R5||(W0.DynamicFeature=R5={}));class lY{constructor($){this._client=$}getState(){let $=this.getDocumentSelectors(),Z=0;for(let Y of $){Z++;for(let Q of T9.workspace.textDocuments)if(T9.languages.match(Y,Q)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let J=Z>0;return{kind:"document",id:this.registrationType.method,registrations:J,matches:!1}}}W0.DynamicDocumentFeature=lY;class _5 extends lY{static textDocumentFilter($,Z){for(let J of $)if(T9.languages.match(J,Z)>0)return!0;return!1}constructor($,Z,J,Y,Q,X,z){super($);this._event=Z,this._type=J,this._middleware=Y,this._createParams=Q,this._textDocument=X,this._selectorFilter=z,this._selectors=new Map,this._onNotificationSent=new T9.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register($){if(!$.registerOptions.documentSelector)return;if(!this._listener)this._listener=this._event((Z)=>{this.callback(Z).catch((J)=>{this._client.error(`Sending document notification ${this._type.method} failed.`,J)})});this._selectors.set($.id,this._client.protocol2CodeConverter.asDocumentSelector($.registerOptions.documentSelector))}async callback($){let Z=async(J)=>{let Y=this._createParams(J);await this._client.sendNotification(this._type,Y),this.notificationSent(this.getTextDocument(J),this._type,Y)};if(this.matches($)){let J=this._middleware();return J?J($,(Y)=>Z(Y)):Z($)}}matches($){if(this._client.hasDedicatedTextSynchronizationFeature(this._textDocument($)))return!1;return!this._selectorFilter||this._selectorFilter(this._selectors.values(),$)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent($,Z,J){this._onNotificationSent.fire({textDocument:$,type:Z,params:J})}unregister($){if(this._selectors.delete($),this._selectors.size===0&&this._listener)this._listener.dispose(),this._listener=void 0}clear(){if(this._selectors.clear(),this._onNotificationSent.dispose(),this._listener)this._listener.dispose(),this._listener=void 0}getProvider($){for(let Z of this._selectors.values())if(T9.languages.match(Z,$)>0)return{send:(J)=>{return this.callback(J)}};return}}W0.TextDocumentEventFeature=_5;class x5 extends lY{constructor($,Z){super($);this._registrationType=Z,this._registrations=new Map}*getDocumentSelectors(){for(let $ of this._registrations.values()){let Z=$.data.registerOptions.documentSelector;if(Z===null)continue;yield this._client.protocol2CodeConverter.asDocumentSelector(Z)}}get registrationType(){return this._registrationType}register($){if(!$.registerOptions.documentSelector)return;let Z=this.registerLanguageProvider($.registerOptions,$.id);this._registrations.set($.id,{disposable:Z[0],data:$,provider:Z[1]})}unregister($){let Z=this._registrations.get($);if(Z!==void 0)Z.disposable.dispose()}clear(){this._registrations.forEach(($)=>{$.disposable.dispose()}),this._registrations.clear()}getRegistration($,Z){if(!Z)return[void 0,void 0];else if($7.TextDocumentRegistrationOptions.is(Z)){let J=$7.StaticRegistrationOptions.hasId(Z)?Z.id:D5.generateUuid(),Y=Z.documentSelector??$;if(Y)return[J,Object.assign({},Z,{documentSelector:Y})]}else if(_0.boolean(Z)&&Z===!0||$7.WorkDoneProgressOptions.is(Z)){if(!$)return[void 0,void 0];let J=_0.boolean(Z)&&Z===!0?{documentSelector:$}:Object.assign({},Z,{documentSelector:$});return[D5.generateUuid(),J]}return[void 0,void 0]}getRegistrationOptions($,Z){if(!$||!Z)return;return _0.boolean(Z)&&Z===!0?{documentSelector:$}:Object.assign({},Z,{documentSelector:$})}getProvider($){for(let Z of this._registrations.values()){let J=Z.data.registerOptions.documentSelector;if(J!==null&&T9.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(J),$)>0)return Z.provider}return}getAllProviders(){let $=[];for(let Z of this._registrations.values())$.push(Z.provider);return $}}W0.TextDocumentLanguageFeature=x5;class h5{constructor($,Z){this._client=$,this._registrationType=Z,this._registrations=new Map}getState(){let $=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:$}}get registrationType(){return this._registrationType}register($){let Z=this.registerLanguageProvider($.registerOptions);this._registrations.set($.id,{disposable:Z[0],provider:Z[1]})}unregister($){let Z=this._registrations.get($);if(Z!==void 0)Z.disposable.dispose()}clear(){this._registrations.forEach(($)=>{$.disposable.dispose()}),this._registrations.clear()}getProviders(){let $=[];for(let Z of this._registrations.values())$.push(Z.provider);return $}}W0.WorkspaceFeature=h5});var k5=D((d1,f5)=>{var EW=typeof process==="object"&&process&&process.platform==="win32";f5.exports=EW?{sep:"\\"}:{sep:"/"}});var m5=D((m1,d5)=>{d5.exports=g5;function g5($,Z,J){if($ instanceof RegExp)$=v5($,J);if(Z instanceof RegExp)Z=v5(Z,J);var Y=p5($,Z,J);return Y&&{start:Y[0],end:Y[1],pre:J.slice(0,Y[0]),body:J.slice(Y[0]+$.length,Y[1]),post:J.slice(Y[1]+Z.length)}}function v5($,Z){var J=Z.match($);return J?J[0]:null}g5.range=p5;function p5($,Z,J){var Y,Q,X,z,B,j=J.indexOf($),H=J.indexOf(Z,j+1),O=j;if(j>=0&&H>0){if($===Z)return[j,H];Y=[],X=J.length;while(O>=0&&!B){if(O==j)Y.push(O),j=J.indexOf($,O+1);else if(Y.length==1)B=[Y.pop(),H];else{if(Q=Y.pop(),Q<X)X=Q,z=H;H=J.indexOf(Z,O+1)}O=j<H&&j>=0?j:H}if(Y.length)B=[X,z]}return B}});var r5=D((u1,s5)=>{var u5=m5();s5.exports=NW;var l5="\x00SLASH"+Math.random()+"\x00",c5="\x00OPEN"+Math.random()+"\x00",J7="\x00CLOSE"+Math.random()+"\x00",i5="\x00COMMA"+Math.random()+"\x00",n5="\x00PERIOD"+Math.random()+"\x00";function Z7($){return parseInt($,10)==$?parseInt($,10):$.charCodeAt(0)}function UW($){return $.split("\\\\").join(l5).split("\\{").join(c5).split("\\}").join(J7).split("\\,").join(i5).split("\\.").join(n5)}function wW($){return $.split(l5).join("\\").split(c5).join("{").split(J7).join("}").split(i5).join(",").split(n5).join(".")}function a5($){if(!$)return[""];var Z=[],J=u5("{","}",$);if(!J)return $.split(",");var{pre:Y,body:Q,post:X}=J,z=Y.split(",");z[z.length-1]+="{"+Q+"}";var B=a5(X);if(X.length)z[z.length-1]+=B.shift(),z.push.apply(z,B);return Z.push.apply(Z,z),Z}function NW($){if(!$)return[];if($.substr(0,2)==="{}")$="\\{\\}"+$.substr(2);return RJ(UW($),!0).map(wW)}function LW($){return"{"+$+"}"}function FW($){return/^-?0\d/.test($)}function PW($,Z){return $<=Z}function MW($,Z){return $>=Z}function RJ($,Z){var J=[],Y=u5("{","}",$);if(!Y)return[$];var Q=Y.pre,X=Y.post.length?RJ(Y.post,!1):[""];if(/\$$/.test(Y.pre))for(var z=0;z<X.length;z++){var B=Q+"{"+Y.body+"}"+X[z];J.push(B)}else{var j=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(Y.body),H=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(Y.body),O=j||H,N=Y.body.indexOf(",")>=0;if(!O&&!N){if(Y.post.match(/,(?!,).*\}/))return $=Y.pre+"{"+Y.body+J7+Y.post,RJ($);return[$]}var U;if(O)U=Y.body.split(/\.\./);else if(U=a5(Y.body),U.length===1){if(U=RJ(U[0],!1).map(LW),U.length===1)return X.map(function(h$){return Y.pre+U[0]+h$})}var E;if(O){var T=Z7(U[0]),C=Z7(U[1]),x=Math.max(U[0].length,U[1].length),h=U.length==3?Math.abs(Z7(U[2])):1,d=PW,k=C<T;if(k)h*=-1,d=MW;var V$=U.some(FW);E=[];for(var e=T;d(e,C);e+=h){var l;if(H){if(l=String.fromCharCode(e),l==="\\")l=""}else if(l=String(e),V$){var s=x-l.length;if(s>0){var W$=Array(s+1).join("0");if(e<0)l="-"+W$+l.slice(1);else l=W$+l}}E.push(l)}}else{E=[];for(var g$=0;g$<U.length;g$++)E.push.apply(E,RJ(U[g$],!1))}for(var g$=0;g$<E.length;g$++)for(var z=0;z<X.length;z++){var B=Q+E[g$]+X[z];if(!Z||O||B)J.push(B)}}return J}});var iY=D((l1,G7)=>{var r0=G7.exports=($,Z,J={})=>{if(cY(Z),!J.nocomment&&Z.charAt(0)==="#")return!1;return new yJ(Z,J).match($)};G7.exports=r0;var X7=k5();r0.sep=X7.sep;var NZ=Symbol("globstar **");r0.GLOBSTAR=NZ;var IW=r5(),o5={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},z7="[^/]",Y7=z7+"*?",TW="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",qW="(?:(?!(?:\\/|^)\\.).)*?",$B=($)=>$.split("").reduce((Z,J)=>{return Z[J]=!0,Z},{}),t5=$B("().*{}+?[]^$\\!"),CW=$B("[.("),e5=/\/+/;r0.filter=($,Z={})=>(J,Y,Q)=>r0(J,$,Z);var W9=($,Z={})=>{let J={};return Object.keys($).forEach((Y)=>J[Y]=$[Y]),Object.keys(Z).forEach((Y)=>J[Y]=Z[Y]),J};r0.defaults=($)=>{if(!$||typeof $!=="object"||!Object.keys($).length)return r0;let Z=r0,J=(Y,Q,X)=>Z(Y,Q,W9($,X));return J.Minimatch=class extends Z.Minimatch{constructor(Q,X){super(Q,W9($,X))}},J.Minimatch.defaults=(Y)=>Z.defaults(W9($,Y)).Minimatch,J.filter=(Y,Q)=>Z.filter(Y,W9($,Q)),J.defaults=(Y)=>Z.defaults(W9($,Y)),J.makeRe=(Y,Q)=>Z.makeRe(Y,W9($,Q)),J.braceExpand=(Y,Q)=>Z.braceExpand(Y,W9($,Q)),J.match=(Y,Q,X)=>Z.match(Y,Q,W9($,X)),J};r0.braceExpand=($,Z)=>ZB($,Z);var ZB=($,Z={})=>{if(cY($),Z.nobrace||!/\{(?:(?!\{).)*\}/.test($))return[$];return IW($)},SW=65536,cY=($)=>{if(typeof $!=="string")throw TypeError("invalid pattern");if($.length>SW)throw TypeError("pattern is too long")},Q7=Symbol("subparse");r0.makeRe=($,Z)=>new yJ($,Z||{}).makeRe();r0.match=($,Z,J={})=>{let Y=new yJ(Z,J);if($=$.filter((Q)=>Y.match(Q)),Y.options.nonull&&!$.length)$.push(Z);return $};var DW=($)=>$.replace(/\\(.)/g,"$1"),bW=($)=>$.replace(/\\([^-\]])/g,"$1"),RW=($)=>$.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),yW=($)=>$.replace(/[[\]\\]/g,"\\$&");class yJ{constructor($,Z){if(cY($),!Z)Z={};if(this.options=Z,this.set=[],this.pattern=$,this.windowsPathsNoEscape=!!Z.windowsPathsNoEscape||Z.allowWindowsEscape===!1,this.windowsPathsNoEscape)this.pattern=this.pattern.replace(/\\/g,"/");this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!Z.partial,this.make()}debug(){}make(){let $=this.pattern,Z=this.options;if(!Z.nocomment&&$.charAt(0)==="#"){this.comment=!0;return}if(!$){this.empty=!0;return}this.parseNegate();let J=this.globSet=this.braceExpand();if(Z.debug)this.debug=(...Y)=>console.error(...Y);this.debug(this.pattern,J),J=this.globParts=J.map((Y)=>Y.split(e5)),this.debug(this.pattern,J),J=J.map((Y,Q,X)=>Y.map(this.parse,this)),this.debug(this.pattern,J),J=J.filter((Y)=>Y.indexOf(!1)===-1),this.debug(this.pattern,J),this.set=J}parseNegate(){if(this.options.nonegate)return;let $=this.pattern,Z=!1,J=0;for(let Y=0;Y<$.length&&$.charAt(Y)==="!";Y++)Z=!Z,J++;if(J)this.pattern=$.slice(J);this.negate=Z}matchOne($,Z,J){var Y=this.options;this.debug("matchOne",{this:this,file:$,pattern:Z}),this.debug("matchOne",$.length,Z.length);for(var Q=0,X=0,z=$.length,B=Z.length;Q<z&&X<B;Q++,X++){this.debug("matchOne loop");var j=Z[X],H=$[Q];if(this.debug(Z,j,H),j===!1)return!1;if(j===NZ){this.debug("GLOBSTAR",[Z,j,H]);var O=Q,N=X+1;if(N===B){this.debug("** at the end");for(;Q<z;Q++)if($[Q]==="."||$[Q]===".."||!Y.dot&&$[Q].charAt(0)===".")return!1;return!0}while(O<z){var U=$[O];if(this.debug(`
globstar while`,$,O,Z,N,U),this.matchOne($.slice(O),Z.slice(N),J))return this.debug("globstar found match!",O,z,U),!0;else{if(U==="."||U===".."||!Y.dot&&U.charAt(0)==="."){this.debug("dot detected!",$,O,Z,N);break}this.debug("globstar swallow a segment, and continue"),O++}}if(J){if(this.debug(`
>>> no match, partial?`,$,O,Z,N),O===z)return!0}return!1}var E;if(typeof j==="string")E=H===j,this.debug("string match",j,H,E);else E=H.match(j),this.debug("pattern match",j,H,E);if(!E)return!1}if(Q===z&&X===B)return!0;else if(Q===z)return J;else if(X===B)return Q===z-1&&$[Q]==="";throw Error("wtf?")}braceExpand(){return ZB(this.pattern,this.options)}parse($,Z){cY($);let J=this.options;if($==="**")if(!J.noglobstar)return NZ;else $="*";if($==="")return"";let Y="",Q=!1,X=!1,z=[],B=[],j,H=!1,O=-1,N=-1,U,E,T,C=$.charAt(0)===".",x=J.dot||C,h=()=>C?"":x?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",d=(l)=>l.charAt(0)==="."?"":J.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",k=()=>{if(j){switch(j){case"*":Y+=Y7,Q=!0;break;case"?":Y+=z7,Q=!0;break;default:Y+="\\"+j;break}this.debug("clearStateChar %j %j",j,Y),j=!1}};for(let l=0,s;l<$.length&&(s=$.charAt(l));l++){if(this.debug("%s\t%s %s %j",$,l,Y,s),X){if(s==="/")return!1;if(t5[s])Y+="\\";Y+=s,X=!1;continue}switch(s){case"/":return!1;case"\\":if(H&&$.charAt(l+1)==="-"){Y+=s;continue}k(),X=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",$,l,Y,s),H){if(this.debug("  in class"),s==="!"&&l===N+1)s="^";Y+=s;continue}if(this.debug("call clearStateChar %j",j),k(),j=s,J.noext)k();continue;case"(":{if(H){Y+="(";continue}if(!j){Y+="\\(";continue}let W$={type:j,start:l-1,reStart:Y.length,open:o5[j].open,close:o5[j].close};if(this.debug(this.pattern,"\t",W$),z.push(W$),Y+=W$.open,W$.start===0&&W$.type!=="!")C=!0,Y+=d($.slice(l+1));this.debug("plType %j %j",j,Y),j=!1;continue}case")":{let W$=z[z.length-1];if(H||!W$){Y+="\\)";continue}if(z.pop(),k(),Q=!0,E=W$,Y+=E.close,E.type==="!")B.push(Object.assign(E,{reEnd:Y.length}));continue}case"|":{let W$=z[z.length-1];if(H||!W$){Y+="\\|";continue}if(k(),Y+="|",W$.start===0&&W$.type!=="!")C=!0,Y+=d($.slice(l+1));continue}case"[":if(k(),H){Y+="\\"+s;continue}H=!0,N=l,O=Y.length,Y+=s;continue;case"]":if(l===N+1||!H){Y+="\\"+s;continue}U=$.substring(N+1,l);try{RegExp("["+yW(bW(U))+"]"),Y+=s}catch(W$){Y=Y.substring(0,O)+"(?:$.)"}Q=!0,H=!1;continue;default:if(k(),t5[s]&&!(s==="^"&&H))Y+="\\";Y+=s;break}}if(H)U=$.slice(N+1),T=this.parse(U,Q7),Y=Y.substring(0,O)+"\\["+T[0],Q=Q||T[1];for(E=z.pop();E;E=z.pop()){let l;l=Y.slice(E.reStart+E.open.length),this.debug("setting tail",Y,E),l=l.replace(/((?:\\{2}){0,64})(\\?)\|/g,(W$,g$,h$)=>{if(!h$)h$="\\";return g$+g$+h$+"|"}),this.debug(`tail=%j
   %s`,l,l,E,Y);let s=E.type==="*"?Y7:E.type==="?"?z7:"\\"+E.type;Q=!0,Y=Y.slice(0,E.reStart)+s+"\\("+l}if(k(),X)Y+="\\\\";let V$=CW[Y.charAt(0)];for(let l=B.length-1;l>-1;l--){let s=B[l],W$=Y.slice(0,s.reStart),g$=Y.slice(s.reStart,s.reEnd-8),h$=Y.slice(s.reEnd),f0=Y.slice(s.reEnd-8,s.reEnd)+h$,J0=W$.split(")").length,JZ=W$.split("(").length-J0,O0=h$;for(let B0=0;B0<JZ;B0++)O0=O0.replace(/\)[+*?]?/,"");h$=O0;let b0=h$===""&&Z!==Q7?"(?:$|\\/)":"";Y=W$+g$+h$+b0+f0}if(Y!==""&&Q)Y="(?=.)"+Y;if(V$)Y=h()+Y;if(Z===Q7)return[Y,Q];if(J.nocase&&!Q)Q=$.toUpperCase()!==$.toLowerCase();if(!Q)return DW($);let e=J.nocase?"i":"";try{return Object.assign(new RegExp("^"+Y+"$",e),{_glob:$,_src:Y})}catch(l){return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let $=this.set;if(!$.length)return this.regexp=!1,this.regexp;let Z=this.options,J=Z.noglobstar?Y7:Z.dot?TW:qW,Y=Z.nocase?"i":"",Q=$.map((X)=>{return X=X.map((z)=>typeof z==="string"?RW(z):z===NZ?NZ:z._src).reduce((z,B)=>{if(!(z[z.length-1]===NZ&&B===NZ))z.push(B);return z},[]),X.forEach((z,B)=>{if(z!==NZ||X[B-1]===NZ)return;if(B===0)if(X.length>1)X[B+1]="(?:\\/|"+J+"\\/)?"+X[B+1];else X[B]=J;else if(B===X.length-1)X[B-1]+="(?:\\/|"+J+")?";else X[B-1]+="(?:\\/|\\/"+J+"\\/)"+X[B+1],X[B+1]=NZ}),X.filter((z)=>z!==NZ).join("/")}).join("|");if(Q="^(?:"+Q+")$",this.negate)Q="^(?!"+Q+").*$";try{this.regexp=new RegExp(Q,Y)}catch(X){this.regexp=!1}return this.regexp}match($,Z=this.partial){if(this.debug("match",$,this.pattern),this.comment)return!1;if(this.empty)return $==="";if($==="/"&&Z)return!0;let J=this.options;if(X7.sep!=="/")$=$.split(X7.sep).join("/");$=$.split(e5),this.debug(this.pattern,"split",$);let Y=this.set;this.debug(this.pattern,"set",Y);let Q;for(let X=$.length-1;X>=0;X--)if(Q=$[X],Q)break;for(let X=0;X<Y.length;X++){let z=Y[X],B=$;if(J.matchBase&&z.length===1)B=[Q];if(this.matchOne(B,z,Z)){if(J.flipNegate)return!0;return!this.negate}}if(J.flipNegate)return!1;return this.negate}static defaults($){return r0.defaults($).Minimatch}}r0.Minimatch=yJ});var j7=D((H9)=>{Object.defineProperty(H9,"__esModule",{value:!0});H9.DiagnosticFeature=H9.DiagnosticPullMode=H9.vsdiag=void 0;var _W=iY(),O$=require("vscode"),$0=Z$(),xW=l$(),B7=N$();function nY($,Z){if($[Z]===void 0)$[Z]={};return $[Z]}var KZ;(function($){let Z;(function(J){J.full="full",J.unChanged="unChanged"})(Z=$.DocumentDiagnosticReportKind||($.DocumentDiagnosticReportKind={}))})(KZ||(H9.vsdiag=KZ={}));var aY;(function($){$.onType="onType",$.onSave="onSave"})(aY||(H9.DiagnosticPullMode=aY={}));var q0;(function($){$.active="open",$.reschedule="reschedule",$.outDated="drop"})(q0||(q0={}));class _J{constructor(){this.open=new Set,this._onOpen=new O$.EventEmitter,this._onClose=new O$.EventEmitter,_J.fillTabResources(this.open);let $=(Z)=>{if(Z.closed.length===0&&Z.opened.length===0)return;let J=this.open,Y=new Set;_J.fillTabResources(Y);let Q=new Set,X=new Set(Y);for(let z of J.values())if(Y.has(z))X.delete(z);else Q.add(z);if(this.open=Y,Q.size>0){let z=new Set;for(let B of Q)z.add(O$.Uri.parse(B));this._onClose.fire(z)}if(X.size>0){let z=new Set;for(let B of X)z.add(O$.Uri.parse(B));this._onOpen.fire(z)}};if(O$.window.tabGroups.onDidChangeTabs!==void 0)this.disposable=O$.window.tabGroups.onDidChangeTabs($);else this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive($){return $ instanceof O$.Uri?O$.window.activeTextEditor?.document.uri===$:O$.window.activeTextEditor?.document===$}isVisible($){let Z=$ instanceof O$.Uri?$:$.uri;return this.open.has(Z.toString())}getTabResources(){let $=new Set;return _J.fillTabResources(new Set,$),$}static fillTabResources($,Z){let J=$??new Set;for(let Y of O$.window.tabGroups.all)for(let Q of Y.tabs){let X=Q.input,z;if(X instanceof O$.TabInputText)z=X.uri;else if(X instanceof O$.TabInputTextDiff)z=X.modified;else if(X instanceof O$.TabInputCustom)z=X.uri;if(z!==void 0&&!J.has(z.toString()))J.add(z.toString()),Z!==void 0&&Z.add(z)}}}var G0;(function($){$[$.document=1]="document",$[$.workspace=2]="workspace"})(G0||(G0={}));var iZ;(function($){function Z(J){return J instanceof O$.Uri?J.toString():J.uri.toString()}$.asKey=Z})(iZ||(iZ={}));class JB{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track($,Z,J){let Y=$===G0.document?this.documentPullStates:this.workspacePullStates,[Q,X,z]=Z instanceof O$.Uri?[Z.toString(),Z,J]:[Z.uri.toString(),Z.uri,Z.version],B=Y.get(Q);if(B===void 0)B={document:X,pulledVersion:z,resultId:void 0},Y.set(Q,B);return B}update($,Z,J,Y){let Q=$===G0.document?this.documentPullStates:this.workspacePullStates,[X,z,B,j]=Z instanceof O$.Uri?[Z.toString(),Z,J,Y]:[Z.uri.toString(),Z.uri,Z.version,J],H=Q.get(X);if(H===void 0)H={document:z,pulledVersion:B,resultId:j},Q.set(X,H);else H.pulledVersion=B,H.resultId=j}unTrack($,Z){let J=iZ.asKey(Z);($===G0.document?this.documentPullStates:this.workspacePullStates).delete(J)}tracks($,Z){let J=iZ.asKey(Z);return($===G0.document?this.documentPullStates:this.workspacePullStates).has(J)}getResultId($,Z){let J=iZ.asKey(Z);return($===G0.document?this.documentPullStates:this.workspacePullStates).get(J)?.resultId}getAllResultIds(){let $=[];for(let[Z,J]of this.workspacePullStates){if(this.documentPullStates.has(Z))J=this.documentPullStates.get(Z);if(J.resultId!==void 0)$.push({uri:Z,value:J.resultId})}return $}}class YB{constructor($,Z,J){this.client=$,this.tabs=Z,this.options=J,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new O$.EventEmitter,this.provider=this.createProvider(),this.diagnostics=O$.languages.createDiagnosticCollection(J.identifier),this.openRequests=new Map,this.documentStates=new JB,this.workspaceErrorCounter=0}knows($,Z){let J=Z instanceof O$.Uri?Z:Z.uri;return this.documentStates.tracks($,Z)||this.openRequests.has(J.toString())}forget($,Z){this.documentStates.unTrack($,Z)}pull($,Z){if(this.isDisposed)return;let J=$ instanceof O$.Uri?$:$.uri;this.pullAsync($).then(()=>{if(Z)Z()},(Y)=>{this.client.error(`Document pull failed for text document ${J.toString()}`,Y,!1)})}async pullAsync($,Z){if(this.isDisposed)return;let J=$ instanceof O$.Uri,Y=J?$:$.uri,Q=Y.toString();Z=J?Z:$.version;let X=this.openRequests.get(Q),z=J?this.documentStates.track(G0.document,$,Z):this.documentStates.track(G0.document,$);if(X===void 0){let B=new O$.CancellationTokenSource;this.openRequests.set(Q,{state:q0.active,document:$,version:Z,tokenSource:B});let j,H;try{j=await this.provider.provideDiagnostics($,z.resultId,B.token)??{kind:KZ.DocumentDiagnosticReportKind.full,items:[]}}catch(O){if(O instanceof B7.LSPCancellationError&&$0.DiagnosticServerCancellationData.is(O.data)&&O.data.retriggerRequest===!1)H={state:q0.outDated,document:$};if(H===void 0&&O instanceof O$.CancellationError)H={state:q0.reschedule,document:$};else throw O}if(H=H??this.openRequests.get(Q),H===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${Q}`),this.diagnostics.delete(Y);return}if(this.openRequests.delete(Q),!this.tabs.isVisible($)){this.documentStates.unTrack(G0.document,$);return}if(H.state===q0.outDated)return;if(j!==void 0){if(j.kind===KZ.DocumentDiagnosticReportKind.full)this.diagnostics.set(Y,j.items);z.pulledVersion=Z,z.resultId=j.resultId}if(H.state===q0.reschedule)this.pull($)}else if(X.state===q0.active)X.tokenSource.cancel(),this.openRequests.set(Q,{state:q0.reschedule,document:X.document});else if(X.state===q0.outDated)this.openRequests.set(Q,{state:q0.reschedule,document:X.document})}forgetDocument($){let Z=$ instanceof O$.Uri?$:$.uri,J=Z.toString(),Y=this.openRequests.get(J);if(this.options.workspaceDiagnostics)if(Y!==void 0)this.openRequests.set(J,{state:q0.reschedule,document:$});else this.pull($,()=>{this.forget(G0.document,$)});else{if(Y!==void 0){if(Y.state===q0.active)Y.tokenSource.cancel();this.openRequests.set(J,{state:q0.outDated,document:$})}this.diagnostics.delete(Z),this.forget(G0.document,$)}}pullWorkspace(){if(this.isDisposed)return;this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,$0.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2000)},($)=>{if(!($ instanceof B7.LSPCancellationError)&&!$0.DiagnosticServerCancellationData.is($.data))this.client.error("Workspace diagnostic pull failed.",$,!1),this.workspaceErrorCounter++;if(this.workspaceErrorCounter<=5)this.workspaceTimeout=(0,$0.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2000)})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;if(this.workspaceCancellation!==void 0)this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0;this.workspaceCancellation=new O$.CancellationTokenSource;let $=this.documentStates.getAllResultIds().map((Z)=>{return{uri:this.client.protocol2CodeConverter.asUri(Z.uri),value:Z.value}});await this.provider.provideWorkspaceDiagnostics($,this.workspaceCancellation.token,(Z)=>{if(!Z||this.isDisposed)return;for(let J of Z.items){if(J.kind===KZ.DocumentDiagnosticReportKind.full){if(!this.documentStates.tracks(G0.document,J.uri))this.diagnostics.set(J.uri,J.items)}this.documentStates.update(G0.workspace,J.uri,J.version??void 0,J.resultId)}})}createProvider(){let $={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(Z,J,Y)=>{let Q=(z,B,j)=>{let H={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(z instanceof O$.Uri?z:z.uri)},previousResultId:B};if(this.isDisposed===!0||!this.client.isRunning())return{kind:KZ.DocumentDiagnosticReportKind.full,items:[]};return this.client.sendRequest($0.DocumentDiagnosticRequest.type,H,j).then(async(O)=>{if(O===void 0||O===null||this.isDisposed||j.isCancellationRequested)return{kind:KZ.DocumentDiagnosticReportKind.full,items:[]};if(O.kind===$0.DocumentDiagnosticReportKind.Full)return{kind:KZ.DocumentDiagnosticReportKind.full,resultId:O.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(O.items,j)};else return{kind:KZ.DocumentDiagnosticReportKind.unChanged,resultId:O.resultId}},(O)=>{return this.client.handleFailedRequest($0.DocumentDiagnosticRequest.type,j,O,{kind:KZ.DocumentDiagnosticReportKind.full,items:[]})})},X=this.client.middleware;return X.provideDiagnostics?X.provideDiagnostics(Z,J,Y,Q):Q(Z,J,Y)}};if(this.options.workspaceDiagnostics)$.provideWorkspaceDiagnostics=(Z,J,Y)=>{let Q=async(j)=>{if(j.kind===$0.DocumentDiagnosticReportKind.Full)return{kind:KZ.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(j.uri),resultId:j.resultId,version:j.version,items:await this.client.protocol2CodeConverter.asDiagnostics(j.items,J)};else return{kind:KZ.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(j.uri),resultId:j.resultId,version:j.version}},X=(j)=>{let H=[];for(let O of j)H.push({uri:this.client.code2ProtocolConverter.asUri(O.uri),value:O.value});return H},z=(j,H)=>{let O=(0,xW.generateUuid)(),N=this.client.onProgress($0.WorkspaceDiagnosticRequest.partialResult,O,async(E)=>{if(E===void 0||E===null){Y(null);return}let T={items:[]};for(let C of E.items)try{T.items.push(await Q(C))}catch(x){this.client.error("Converting workspace diagnostics failed.",x)}Y(T)}),U={identifier:this.options.identifier,previousResultIds:X(j),partialResultToken:O};if(this.isDisposed===!0||!this.client.isRunning())return{items:[]};return this.client.sendRequest($0.WorkspaceDiagnosticRequest.type,U,H).then(async(E)=>{if(H.isCancellationRequested)return{items:[]};let T={items:[]};for(let C of E.items)T.items.push(await Q(C));return N.dispose(),Y(T),{items:[]}},(E)=>{return N.dispose(),this.client.handleFailedRequest($0.DocumentDiagnosticRequest.type,H,E,{items:[]})})},B=this.client.middleware;return B.provideWorkspaceDiagnostics?B.provideWorkspaceDiagnostics(Z,J,Y,z):z(Z,J,Y)};return $}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[$,Z]of this.openRequests){if(Z.state===q0.active)Z.tokenSource.cancel();this.openRequests.set($,{state:q0.outDated,document:Z.document})}this.diagnostics.dispose()}}class QB{constructor($){this.diagnosticRequestor=$,this.documents=new $0.LinkedMap,this.isDisposed=!1}add($){if(this.isDisposed===!0)return;let Z=iZ.asKey($);if(this.documents.has(Z))return;this.documents.set(Z,$,$0.Touch.Last),this.trigger()}remove($){let Z=iZ.asKey($);if(this.documents.delete(Z),this.documents.size===0)this.stop();else if(Z===this.endDocumentKey())this.endDocument=this.documents.last}trigger(){if(this.isDisposed===!0)return;if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,$0.RAL)().timer.setInterval(()=>{let $=this.documents.first;if($!==void 0){let Z=iZ.asKey($);if(this.diagnosticRequestor.pull($),this.documents.set(Z,$,$0.Touch.Last),Z===this.endDocumentKey())this.stop()}},200)}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?iZ.asKey(this.endDocument):void 0}}class XB{constructor($,Z,J){let Y=$.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},Q=$.protocol2CodeConverter.asDocumentSelector(J.documentSelector),X=[],z=(E)=>{let T=J.documentSelector;if(Y.match!==void 0)return Y.match(T,E);for(let C of T){if(!$0.TextDocumentFilter.is(C))continue;if(typeof C==="string")return!1;if(C.language!==void 0&&C.language!=="*")return!1;if(C.scheme!==void 0&&C.scheme!=="*"&&C.scheme!==E.scheme)return!1;if(C.pattern!==void 0){let x=new _W.Minimatch(C.pattern,{noext:!0});if(!x.makeRe())return!1;if(!x.match(E.fsPath))return!1}}return!0},B=(E)=>{return E instanceof O$.Uri?z(E):O$.languages.match(Q,E)>0&&Z.isVisible(E)},j=(E)=>{return E instanceof O$.Uri?this.activeTextDocument?.uri.toString()===E.toString():this.activeTextDocument===E};this.diagnosticRequestor=new YB($,Z,J),this.backgroundScheduler=new QB(this.diagnosticRequestor);let H=(E)=>{if(!B(E)||!J.interFileDependencies||j(E))return;this.backgroundScheduler.add(E)};this.activeTextDocument=O$.window.activeTextEditor?.document,O$.window.onDidChangeActiveTextEditor((E)=>{let T=this.activeTextDocument;if(this.activeTextDocument=E?.document,T!==void 0)H(T);if(this.activeTextDocument!==void 0)this.backgroundScheduler.remove(this.activeTextDocument)});let O=$.getFeature($0.DidOpenTextDocumentNotification.method);X.push(O.onNotificationSent((E)=>{let T=E.textDocument;if(this.diagnosticRequestor.knows(G0.document,T))return;if(B(T))this.diagnosticRequestor.pull(T,()=>{H(T)})})),X.push(Z.onOpen((E)=>{for(let T of E){if(this.diagnosticRequestor.knows(G0.document,T))continue;let C=T.toString(),x;for(let h of O$.workspace.textDocuments)if(C===h.uri.toString()){x=h;break}if(x!==void 0&&B(x))this.diagnosticRequestor.pull(x,()=>{H(x)})}}));let N=new Set;for(let E of O$.workspace.textDocuments)if(B(E))this.diagnosticRequestor.pull(E,()=>{H(E)}),N.add(E.uri.toString());if(Y.onTabs===!0){for(let E of Z.getTabResources())if(!N.has(E.toString())&&B(E))this.diagnosticRequestor.pull(E,()=>{H(E)})}if(Y.onChange===!0){let E=$.getFeature($0.DidChangeTextDocumentNotification.method);X.push(E.onNotificationSent(async(T)=>{let C=T.textDocument;if((Y.filter===void 0||!Y.filter(C,aY.onType))&&this.diagnosticRequestor.knows(G0.document,C))this.diagnosticRequestor.pull(C,()=>{this.backgroundScheduler.trigger()})}))}if(Y.onSave===!0){let E=$.getFeature($0.DidSaveTextDocumentNotification.method);X.push(E.onNotificationSent((T)=>{let C=T.textDocument;if((Y.filter===void 0||!Y.filter(C,aY.onSave))&&this.diagnosticRequestor.knows(G0.document,C))this.diagnosticRequestor.pull(T.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let U=$.getFeature($0.DidCloseTextDocumentNotification.method);if(X.push(U.onNotificationSent((E)=>{this.cleanUpDocument(E.textDocument)})),Z.onClose((E)=>{for(let T of E)this.cleanUpDocument(T)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let E of O$.workspace.textDocuments)if(B(E))this.diagnosticRequestor.pull(E)}),J.workspaceDiagnostics===!0&&J.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14")this.diagnosticRequestor.pullWorkspace();this.disposable=O$.Disposable.from(...X,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument($){if(this.diagnosticRequestor.knows(G0.document,$))this.diagnosticRequestor.forgetDocument($),this.backgroundScheduler.remove($)}}class zB extends B7.TextDocumentLanguageFeature{constructor($){super($,$0.DocumentDiagnosticRequest.type)}fillClientCapabilities($){let Z=nY(nY($,"textDocument"),"diagnostic");Z.dynamicRegistration=!0,Z.relatedDocumentSupport=!1,nY(nY($,"workspace"),"diagnostics").refreshSupport=!0}initialize($,Z){this._client.onRequest($0.DiagnosticRefreshRequest.type,async()=>{for(let X of this.getAllProviders())X.onDidChangeDiagnosticsEmitter.fire()});let[Y,Q]=this.getRegistration(Z,$.diagnosticProvider);if(!Y||!Q)return;this.register({id:Y,registerOptions:Q})}clear(){if(this.tabs!==void 0)this.tabs.dispose(),this.tabs=void 0;super.clear()}registerLanguageProvider($){if(this.tabs===void 0)this.tabs=new _J;let Z=new XB(this._client,this.tabs,$);return[Z.disposable,Z]}}H9.DiagnosticFeature=zB});var jB=D((oY)=>{Object.defineProperty(oY,"__esModule",{value:!0});oY.NotebookDocumentSyncFeature=void 0;var C0=require("vscode"),hW=iY(),nZ=Z$(),fW=l$(),GB=XZ();function BB($,Z){if($[Z]===void 0)$[Z]={};return $[Z]}var GJ;(function($){let Z;(function(J){function Y(U,E){return{version:U.version,uri:E.asUri(U.uri)}}J.asVersionedNotebookDocumentIdentifier=Y;function Q(U,E,T){let C=nZ.NotebookDocument.create(T.asUri(U.uri),U.notebookType,U.version,X(E,T));if(Object.keys(U.metadata).length>0)C.metadata=z(U.metadata);return C}J.asNotebookDocument=Q;function X(U,E){return U.map((T)=>B(T,E))}J.asNotebookCells=X;function z(U){return H(new Set,U)}J.asMetadata=z;function B(U,E){let T=nZ.NotebookCell.create(j(U.kind),E.asUri(U.document.uri));if(Object.keys(U.metadata).length>0)T.metadata=z(U.metadata);if(U.executionSummary!==void 0&&(GB.number(U.executionSummary.executionOrder)&&GB.boolean(U.executionSummary.success)))T.executionSummary={executionOrder:U.executionSummary.executionOrder,success:U.executionSummary.success};return T}J.asNotebookCell=B;function j(U){switch(U){case C0.NotebookCellKind.Markup:return nZ.NotebookCellKind.Markup;case C0.NotebookCellKind.Code:return nZ.NotebookCellKind.Code}}function H(U,E){if(U.has(E))throw Error("Can't deep copy cyclic structures.");if(Array.isArray(E)){let T=[];for(let C of E)if(C!==null&&typeof C==="object"||Array.isArray(C))T.push(H(U,C));else{if(C instanceof RegExp)throw Error("Can't transfer regular expressions to the server");T.push(C)}return T}else{let T=Object.keys(E),C=Object.create(null);for(let x of T){let h=E[x];if(h!==null&&typeof h==="object"||Array.isArray(h))C[x]=H(U,h);else{if(h instanceof RegExp)throw Error("Can't transfer regular expressions to the server");C[x]=h}}return C}}function O(U,E){let T=E.asChangeTextDocumentParams(U,U.document.uri,U.document.version);return{document:T.textDocument,changes:T.contentChanges}}J.asTextContentChange=O;function N(U,E){let T=Object.create(null);if(U.metadata)T.metadata=$.c2p.asMetadata(U.metadata);if(U.cells!==void 0){let C=Object.create(null),x=U.cells;if(x.structure)C.structure={array:{start:x.structure.array.start,deleteCount:x.structure.array.deleteCount,cells:x.structure.array.cells!==void 0?x.structure.array.cells.map((h)=>$.c2p.asNotebookCell(h,E)):void 0},didOpen:x.structure.didOpen!==void 0?x.structure.didOpen.map((h)=>E.asOpenTextDocumentParams(h.document).textDocument):void 0,didClose:x.structure.didClose!==void 0?x.structure.didClose.map((h)=>E.asCloseTextDocumentParams(h.document).textDocument):void 0};if(x.data!==void 0)C.data=x.data.map((h)=>$.c2p.asNotebookCell(h,E));if(x.textContent!==void 0)C.textContent=x.textContent.map((h)=>$.c2p.asTextContentChange(h,E));if(Object.keys(C).length>0)T.cells=C}return T}J.asNotebookDocumentChangeEvent=N})(Z=$.c2p||($.c2p={}))})(GJ||(GJ={}));var K7;(function($){function Z(B,j,H){let O=B.length,N=j.length,U=0;while(U<N&&U<O&&J(B[U],j[U],H))U++;if(U<N&&U<O){let E=O-1,T=N-1;while(E>=0&&T>=0&&J(B[E],j[T],H))E--,T--;let C=E+1-U,x=U===T+1?void 0:j.slice(U,T+1);return x!==void 0?{start:U,deleteCount:C,cells:x}:{start:U,deleteCount:C}}else if(U<N)return{start:U,deleteCount:0,cells:j.slice(U)};else if(U<O)return{start:U,deleteCount:O-U};else return}$.computeDiff=Z;function J(B,j,H=!0){if(B.kind!==j.kind||B.document.uri.toString()!==j.document.uri.toString()||B.document.languageId!==j.document.languageId||!Y(B.executionSummary,j.executionSummary))return!1;return!H||H&&X(B.metadata,j.metadata)}function Y(B,j){if(B===j)return!0;if(B===void 0||j===void 0)return!1;return B.executionOrder===j.executionOrder&&B.success===j.success&&Q(B.timing,j.timing)}function Q(B,j){if(B===j)return!0;if(B===void 0||j===void 0)return!1;return B.startTime===j.startTime&&B.endTime===j.endTime}function X(B,j){if(B===j)return!0;if(B===null||B===void 0||j===null||j===void 0)return!1;if(typeof B!==typeof j)return!1;if(typeof B!=="object")return!1;let H=Array.isArray(B),O=Array.isArray(j);if(H!==O)return!1;if(H&&O){if(B.length!==j.length)return!1;for(let N=0;N<B.length;N++)if(!X(B[N],j[N]))return!1}if(z(B)&&z(j)){let N=Object.keys(B),U=Object.keys(j);if(N.length!==U.length)return!1;if(N.sort(),U.sort(),!X(N,U))return!1;for(let E=0;E<N.length;E++){let T=N[E];if(!X(B[T],j[T]))return!1}return!0}return!1}function z(B){return B!==null&&typeof B==="object"}$.isObjectLiteral=z})(K7||(K7={}));var V7;(function($){function Z(J,Y){if(typeof J==="string")return J==="*"||Y.notebookType===J;if(J.notebookType!==void 0&&J.notebookType!=="*"&&Y.notebookType!==J.notebookType)return!1;let Q=Y.uri;if(J.scheme!==void 0&&J.scheme!=="*"&&Q.scheme!==J.scheme)return!1;if(J.pattern!==void 0){let X=new hW.Minimatch(J.pattern,{noext:!0});if(!X.makeRe())return!1;if(!X.match(Q.fsPath))return!1}return!0}$.matchNotebook=Z})(V7||(V7={}));var sY;(function($){function Z(Y){let Q=Y.notebookSelector,X=[];for(let z of Q){let B=(typeof z.notebook==="string"?z.notebook:z.notebook?.notebookType)??"*",j=typeof z.notebook==="string"?void 0:z.notebook?.scheme,H=typeof z.notebook==="string"?void 0:z.notebook?.pattern;if(z.cells!==void 0)for(let O of z.cells)X.push(J(B,j,H,O.language));else X.push(J(B,j,H,void 0))}return X}$.asDocumentSelector=Z;function J(Y,Q,X,z){return Q===void 0&&X===void 0?{notebook:Y,language:z}:{notebook:{notebookType:Y,scheme:Q,pattern:X},language:z}}})(sY||(sY={}));var rY;(function($){function Z(J){return{cells:J,uris:new Set(J.map((Y)=>Y.document.uri.toString()))}}$.create=Z})(rY||(rY={}));class xJ{constructor($,Z){this.client=$,this.options=Z,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=$.protocol2CodeConverter.asDocumentSelector(sY.asDocumentSelector(Z)),C0.workspace.onDidOpenNotebookDocument((J)=>{this.notebookDidOpen.add(J.uri.toString()),this.didOpen(J)},void 0,this.disposables);for(let J of C0.workspace.notebookDocuments)this.notebookDidOpen.add(J.uri.toString()),this.didOpen(J);if(C0.workspace.onDidChangeNotebookDocument((J)=>this.didChangeNotebookDocument(J),void 0,this.disposables),this.options.save===!0)C0.workspace.onDidSaveNotebookDocument((J)=>this.didSave(J),void 0,this.disposables);C0.workspace.onDidCloseNotebookDocument((J)=>{this.didClose(J),this.notebookDidOpen.delete(J.uri.toString())},void 0,this.disposables)}getState(){for(let $ of C0.workspace.notebookDocuments)if(this.getMatchingCells($)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles($){return C0.languages.match(this.selector,$)>0}didOpenNotebookCellTextDocument($,Z){if(C0.languages.match(this.selector,Z.document)===0)return;if(!this.notebookDidOpen.has($.uri.toString()))return;let J=this.notebookSyncInfo.get($.uri.toString()),Y=this.cellMatches($,Z);if(J!==void 0){let Q=J.uris.has(Z.document.uri.toString());if(Y&&Q||!Y&&!Q)return;if(Y){let X=this.getMatchingCells($);if(X!==void 0){let z=this.asNotebookDocumentChangeEvent($,void 0,J,X);if(z!==void 0)this.doSendChange(z,X).catch(()=>{})}}}else if(Y)this.doSendOpen($,[Z]).catch(()=>{})}didChangeNotebookCellTextDocument($,Z){if(C0.languages.match(this.selector,Z.document)===0)return;this.doSendChange({notebook:$,cells:{textContent:[Z]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument($,Z){let J=this.notebookSyncInfo.get($.uri.toString());if(J===void 0)return;let Y=Z.document.uri,Q=J.cells.findIndex((X)=>X.document.uri.toString()===Y.toString());if(Q===-1)return;if(Q===0&&J.cells.length===1)this.doSendClose($,J.cells).catch(()=>{});else{let X=J.cells.slice(),z=X.splice(Q,1);this.doSendChange({notebook:$,cells:{structure:{array:{start:Q,deleteCount:1},didClose:z}}},X).catch(()=>{})}}dispose(){for(let $ of this.disposables)$.dispose()}didOpen($,Z=this.getMatchingCells($),J=this.notebookSyncInfo.get($.uri.toString())){if(J!==void 0)if(Z!==void 0){let Y=this.asNotebookDocumentChangeEvent($,void 0,J,Z);if(Y!==void 0)this.doSendChange(Y,Z).catch(()=>{})}else this.doSendClose($,[]).catch(()=>{});else{if(Z===void 0)return;this.doSendOpen($,Z).catch(()=>{})}}didChangeNotebookDocument($){let Z=$.notebook,J=this.notebookSyncInfo.get(Z.uri.toString());if(J===void 0){if($.contentChanges.length===0)return;let Y=this.getMatchingCells(Z);if(Y===void 0)return;this.didOpen(Z,Y,J)}else{let Y=this.getMatchingCells(Z);if(Y===void 0){this.didClose(Z,J);return}let Q=this.asNotebookDocumentChangeEvent($.notebook,$,J,Y);if(Q!==void 0)this.doSendChange(Q,Y).catch(()=>{})}}didSave($){if(this.notebookSyncInfo.get($.uri.toString())===void 0)return;this.doSendSave($).catch(()=>{})}didClose($,Z=this.notebookSyncInfo.get($.uri.toString())){if(Z===void 0)return;let J=$.getCells().filter((Y)=>Z.uris.has(Y.document.uri.toString()));this.doSendClose($,J).catch(()=>{})}async sendDidOpenNotebookDocument($){let Z=this.getMatchingCells($);if(Z===void 0)return;return this.doSendOpen($,Z)}async doSendOpen($,Z){let J=async(Q,X)=>{let z=GJ.c2p.asNotebookDocument(Q,X,this.client.code2ProtocolConverter),B=X.map((j)=>this.client.code2ProtocolConverter.asTextDocumentItem(j.document));try{await this.client.sendNotification(nZ.DidOpenNotebookDocumentNotification.type,{notebookDocument:z,cellTextDocuments:B})}catch(j){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",j),j}},Y=this.client.middleware?.notebooks;return this.notebookSyncInfo.set($.uri.toString(),rY.create(Z)),Y?.didOpen!==void 0?Y.didOpen($,Z,J):J($,Z)}async sendDidChangeNotebookDocument($){return this.doSendChange($,void 0)}async doSendChange($,Z=this.getMatchingCells($.notebook)){let J=async(Q)=>{try{await this.client.sendNotification(nZ.DidChangeNotebookDocumentNotification.type,{notebookDocument:GJ.c2p.asVersionedNotebookDocumentIdentifier(Q.notebook,this.client.code2ProtocolConverter),change:GJ.c2p.asNotebookDocumentChangeEvent(Q,this.client.code2ProtocolConverter)})}catch(X){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",X),X}},Y=this.client.middleware?.notebooks;if($.cells?.structure!==void 0)this.notebookSyncInfo.set($.notebook.uri.toString(),rY.create(Z??[]));return Y?.didChange!==void 0?Y?.didChange($,J):J($)}async sendDidSaveNotebookDocument($){return this.doSendSave($)}async doSendSave($){let Z=async(Y)=>{try{await this.client.sendNotification(nZ.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(Y.uri)}})}catch(Q){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",Q),Q}},J=this.client.middleware?.notebooks;return J?.didSave!==void 0?J.didSave($,Z):Z($)}async sendDidCloseNotebookDocument($){return this.doSendClose($,this.getMatchingCells($)??[])}async doSendClose($,Z){let J=async(Q,X)=>{try{await this.client.sendNotification(nZ.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(Q.uri)},cellTextDocuments:X.map((z)=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(z.document))})}catch(z){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",z),z}},Y=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete($.uri.toString()),Y?.didClose!==void 0?Y.didClose($,Z,J):J($,Z)}asNotebookDocumentChangeEvent($,Z,J,Y){if(Z!==void 0&&Z.notebook!==$)throw Error("Notebook must be identical");let Q={notebook:$};if(Z?.metadata!==void 0)Q.metadata=GJ.c2p.asMetadata(Z.metadata);let X;if(Z?.cellChanges!==void 0&&Z.cellChanges.length>0){let z=[];X=new Set(Y.map((B)=>B.document.uri.toString()));for(let B of Z.cellChanges)if(X.has(B.cell.document.uri.toString())&&(B.executionSummary!==void 0||B.metadata!==void 0))z.push(B.cell);if(z.length>0)Q.cells=Q.cells??{},Q.cells.data=z}if((Z?.contentChanges!==void 0&&Z.contentChanges.length>0||Z===void 0)&&J!==void 0&&Y!==void 0){let z=J.cells,B=Y,j=K7.computeDiff(z,B,!1),H,O;if(j!==void 0){H=j.cells===void 0?new Map:new Map(j.cells.map((E)=>[E.document.uri.toString(),E])),O=j.deleteCount===0?new Map:new Map(z.slice(j.start,j.start+j.deleteCount).map((E)=>[E.document.uri.toString(),E]));for(let E of Array.from(O.keys()))if(H.has(E))O.delete(E),H.delete(E);Q.cells=Q.cells??{};let N=[],U=[];if(H.size>0||O.size>0){for(let E of H.values())N.push(E);for(let E of O.values())U.push(E)}Q.cells.structure={array:j,didOpen:N,didClose:U}}}return Object.keys(Q).length>1?Q:void 0}getMatchingCells($,Z=$.getCells()){if(this.options.notebookSelector===void 0)return;for(let J of this.options.notebookSelector)if(J.notebook===void 0||V7.matchNotebook(J.notebook,$)){let Y=this.filterCells($,Z,J.cells);return Y.length===0?void 0:Y}return}cellMatches($,Z){let J=this.getMatchingCells($,[Z]);return J!==void 0&&J[0]===Z}filterCells($,Z,J){let Y=J!==void 0?Z.filter((Q)=>{let X=Q.document.languageId;return J.some((z)=>z.language==="*"||X===z.language)}):Z;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells==="function"?this.client.clientOptions.notebookDocumentOptions.filterCells($,Y):Y}}class q9{constructor($){this.client=$,this.registrations=new Map,this.registrationType=nZ.NotebookDocumentSyncRegistrationType.type,C0.workspace.onDidOpenTextDocument((Z)=>{if(Z.uri.scheme!==q9.CellScheme)return;let[J,Y]=this.findNotebookDocumentAndCell(Z);if(J===void 0||Y===void 0)return;for(let Q of this.registrations.values())if(Q instanceof xJ)Q.didOpenNotebookCellTextDocument(J,Y)}),C0.workspace.onDidChangeTextDocument((Z)=>{if(Z.contentChanges.length===0)return;let J=Z.document;if(J.uri.scheme!==q9.CellScheme)return;let[Y]=this.findNotebookDocumentAndCell(J);if(Y===void 0)return;for(let Q of this.registrations.values())if(Q instanceof xJ)Q.didChangeNotebookCellTextDocument(Y,Z)}),C0.workspace.onDidCloseTextDocument((Z)=>{if(Z.uri.scheme!==q9.CellScheme)return;let[J,Y]=this.findNotebookDocumentAndCell(Z);if(J===void 0||Y===void 0)return;for(let Q of this.registrations.values())if(Q instanceof xJ)Q.didCloseNotebookCellTextDocument(J,Y)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let $ of this.registrations.values()){let Z=$.getState();if(Z.kind==="document"&&Z.registrations===!0&&Z.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities($){let Z=BB(BB($,"notebookDocument"),"synchronization");Z.dynamicRegistration=!0,Z.executionSummarySupport=!0}preInitialize($){let Z=$.notebookDocumentSync;if(Z===void 0)return;this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(sY.asDocumentSelector(Z))}initialize($){let Z=$.notebookDocumentSync;if(Z===void 0)return;let J=Z.id??fW.generateUuid();this.register({id:J,registerOptions:Z})}register($){let Z=new xJ(this.client,$.registerOptions);this.registrations.set($.id,Z)}unregister($){let Z=this.registrations.get($);Z&&Z.dispose()}clear(){for(let $ of this.registrations.values())$.dispose();this.registrations.clear()}handles($){if($.uri.scheme!==q9.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&C0.languages.match(this.dedicatedChannel,$)>0)return!0;for(let Z of this.registrations.values())if(Z.handles($))return!0;return!1}getProvider($){for(let Z of this.registrations.values())if(Z.handles($.document))return Z;return}findNotebookDocumentAndCell($){let Z=$.uri.toString();for(let J of C0.workspace.notebookDocuments)for(let Y of J.getCells())if(Y.document.uri.toString()===Z)return[J,Y];return[void 0,void 0]}}oY.NotebookDocumentSyncFeature=q9;q9.CellScheme="vscode-notebook-cell"});var HB=D((A9)=>{Object.defineProperty(A9,"__esModule",{value:!0});A9.SyncConfigurationFeature=A9.toJSONObject=A9.ConfigurationFeature=void 0;var BJ=require("vscode"),hJ=Z$(),kW=XZ(),vW=l$(),KB=N$();class VB{constructor($){this._client=$}getState(){return{kind:"static"}}fillClientCapabilities($){$.workspace=$.workspace||{},$.workspace.configuration=!0}initialize(){let $=this._client;$.onRequest(hJ.ConfigurationRequest.type,(Z,J)=>{let Y=(X)=>{let z=[];for(let B of X.items){let j=B.scopeUri!==void 0&&B.scopeUri!==null?this._client.protocol2CodeConverter.asUri(B.scopeUri):void 0;z.push(this.getConfiguration(j,B.section!==null?B.section:void 0))}return z},Q=$.middleware.workspace;return Q&&Q.configuration?Q.configuration(Z,J,Y):Y(Z,J)})}getConfiguration($,Z){let J=null;if(Z){let Y=Z.lastIndexOf(".");if(Y===-1)J=C9(BJ.workspace.getConfiguration(void 0,$).get(Z));else{let Q=BJ.workspace.getConfiguration(Z.substr(0,Y),$);if(Q)J=C9(Q.get(Z.substr(Y+1)))}}else{let Y=BJ.workspace.getConfiguration(void 0,$);J={};for(let Q of Object.keys(Y))if(Y.has(Q))J[Q]=C9(Y.get(Q))}if(J===void 0)J=null;return J}clear(){}}A9.ConfigurationFeature=VB;function C9($){if($){if(Array.isArray($))return $.map(C9);else if(typeof $==="object"){let Z=Object.create(null);for(let J in $)if(Object.prototype.hasOwnProperty.call($,J))Z[J]=C9($[J]);return Z}}return $}A9.toJSONObject=C9;class WB{constructor($){this._client=$,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return hJ.DidChangeConfigurationNotification.type}fillClientCapabilities($){(0,KB.ensure)((0,KB.ensure)($,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let $=this._client.clientOptions.synchronize?.configurationSection;if($!==void 0)this.register({id:vW.generateUuid(),registerOptions:{section:$}})}register($){let Z=BJ.workspace.onDidChangeConfiguration((J)=>{this.onDidChangeConfiguration($.registerOptions.section,J)});if(this._listeners.set($.id,Z),$.registerOptions.section!==void 0)this.onDidChangeConfiguration($.registerOptions.section,void 0)}unregister($){let Z=this._listeners.get($);if(Z)this._listeners.delete($),Z.dispose()}clear(){for(let $ of this._listeners.values())$.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration($,Z){if(this.isCleared)return;let J;if(kW.string($))J=[$];else J=$;if(J!==void 0&&Z!==void 0){if(!J.some((z)=>Z.affectsConfiguration(z)))return}let Y=async(X)=>{if(X===void 0)return this._client.sendNotification(hJ.DidChangeConfigurationNotification.type,{settings:null});else return this._client.sendNotification(hJ.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(X)})},Q=this._client.middleware.workspace?.didChangeConfiguration;(Q?Q(J,Y):Y(J)).catch((X)=>{this._client.error(`Sending notification ${hJ.DidChangeConfigurationNotification.type.method} failed`,X)})}extractSettingsInformation($){function Z(Q,X){let z=Q;for(let B=0;B<X.length-1;B++){let j=z[X[B]];if(!j)j=Object.create(null),z[X[B]]=j;z=j}return z}let J=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,Y=Object.create(null);for(let Q=0;Q<$.length;Q++){let X=$[Q],z=X.indexOf("."),B=null;if(z>=0)B=BJ.workspace.getConfiguration(X.substr(0,z),J).get(X.substr(z+1));else B=BJ.workspace.getConfiguration(void 0,J).get(X);if(B){let j=$[Q].split(".");Z(Y,j)[j[j.length-1]]=C9(B)}}return Y}}A9.SyncConfigurationFeature=WB});var LB=D((u0)=>{Object.defineProperty(u0,"__esModule",{value:!0});u0.DidSaveTextDocumentFeature=u0.WillSaveWaitUntilFeature=u0.WillSaveFeature=u0.DidChangeTextDocumentFeature=u0.DidCloseTextDocumentFeature=u0.DidOpenTextDocumentFeature=void 0;var o0=require("vscode"),x$=Z$(),a$=N$(),jJ=l$();class AB extends a$.TextDocumentEventFeature{constructor($,Z){super($,o0.workspace.onDidOpenTextDocument,x$.DidOpenTextDocumentNotification.type,()=>$.middleware.didOpen,(J)=>$.code2ProtocolConverter.asOpenTextDocumentParams(J),(J)=>J,a$.TextDocumentEventFeature.textDocumentFilter);this._syncedDocuments=Z}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities($){(0,a$.ensure)((0,a$.ensure)($,"textDocument"),"synchronization").dynamicRegistration=!0}initialize($,Z){let J=$.resolvedTextDocumentSync;if(Z&&J&&J.openClose)this.register({id:jJ.generateUuid(),registerOptions:{documentSelector:Z}})}get registrationType(){return x$.DidOpenTextDocumentNotification.type}register($){if(super.register($),!$.registerOptions.documentSelector)return;let Z=this._client.protocol2CodeConverter.asDocumentSelector($.registerOptions.documentSelector);o0.workspace.textDocuments.forEach((J)=>{let Y=J.uri.toString();if(this._syncedDocuments.has(Y))return;if(o0.languages.match(Z,J)>0&&!this._client.hasDedicatedTextSynchronizationFeature(J)){let Q=this._client.middleware,X=(z)=>{return this._client.sendNotification(this._type,this._createParams(z))};(Q.didOpen?Q.didOpen(J,X):X(J)).catch((z)=>{this._client.error(`Sending document notification ${this._type.method} failed`,z)}),this._syncedDocuments.set(Y,J)}})}getTextDocument($){return $}notificationSent($,Z,J){this._syncedDocuments.set($.uri.toString(),$),super.notificationSent($,Z,J)}}u0.DidOpenTextDocumentFeature=AB;class OB extends a$.TextDocumentEventFeature{constructor($,Z,J){super($,o0.workspace.onDidCloseTextDocument,x$.DidCloseTextDocumentNotification.type,()=>$.middleware.didClose,(Y)=>$.code2ProtocolConverter.asCloseTextDocumentParams(Y),(Y)=>Y,a$.TextDocumentEventFeature.textDocumentFilter);this._syncedDocuments=Z,this._pendingTextDocumentChanges=J}get registrationType(){return x$.DidCloseTextDocumentNotification.type}fillClientCapabilities($){(0,a$.ensure)((0,a$.ensure)($,"textDocument"),"synchronization").dynamicRegistration=!0}initialize($,Z){let J=$.resolvedTextDocumentSync;if(Z&&J&&J.openClose)this.register({id:jJ.generateUuid(),registerOptions:{documentSelector:Z}})}async callback($){await super.callback($),this._pendingTextDocumentChanges.delete($.uri.toString())}getTextDocument($){return $}notificationSent($,Z,J){this._syncedDocuments.delete($.uri.toString()),super.notificationSent($,Z,J)}unregister($){let Z=this._selectors.get($);super.unregister($);let J=this._selectors.values();this._syncedDocuments.forEach((Y)=>{if(o0.languages.match(Z,Y)>0&&!this._selectorFilter(J,Y)&&!this._client.hasDedicatedTextSynchronizationFeature(Y)){let Q=this._client.middleware,X=(z)=>{return this._client.sendNotification(this._type,this._createParams(z))};this._syncedDocuments.delete(Y.uri.toString()),(Q.didClose?Q.didClose(Y,X):X(Y)).catch((z)=>{this._client.error(`Sending document notification ${this._type.method} failed`,z)})}})}}u0.DidCloseTextDocumentFeature=OB;class EB extends a$.DynamicDocumentFeature{constructor($,Z){super($);this._changeData=new Map,this._onNotificationSent=new o0.EventEmitter,this._onPendingChangeAdded=new o0.EventEmitter,this._pendingTextDocumentChanges=Z,this._syncKind=x$.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return x$.DidChangeTextDocumentNotification.type}fillClientCapabilities($){(0,a$.ensure)((0,a$.ensure)($,"textDocument"),"synchronization").dynamicRegistration=!0}initialize($,Z){let J=$.resolvedTextDocumentSync;if(Z&&J&&J.change!==void 0&&J.change!==x$.TextDocumentSyncKind.None)this.register({id:jJ.generateUuid(),registerOptions:Object.assign({},{documentSelector:Z},{syncKind:J.change})})}register($){if(!$.registerOptions.documentSelector)return;if(!this._listener)this._listener=o0.workspace.onDidChangeTextDocument(this.callback,this);this._changeData.set($.id,{syncKind:$.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector($.registerOptions.documentSelector)}),this.updateSyncKind($.registerOptions.syncKind)}*getDocumentSelectors(){for(let $ of this._changeData.values())yield $.documentSelector}async callback($){if($.contentChanges.length===0)return;let Z=$.document.uri,J=$.document.version,Y=[];for(let Q of this._changeData.values())if(o0.languages.match(Q.documentSelector,$.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature($.document)){let X=this._client.middleware;if(Q.syncKind===x$.TextDocumentSyncKind.Incremental){let z=async(B)=>{let j=this._client.code2ProtocolConverter.asChangeTextDocumentParams(B,Z,J);await this._client.sendNotification(x$.DidChangeTextDocumentNotification.type,j),this.notificationSent(B.document,x$.DidChangeTextDocumentNotification.type,j)};Y.push(X.didChange?X.didChange($,(B)=>z(B)):z($))}else if(Q.syncKind===x$.TextDocumentSyncKind.Full){let z=async(B)=>{let j=B.document.uri.toString();this._pendingTextDocumentChanges.set(j,B.document),this._onPendingChangeAdded.fire()};Y.push(X.didChange?X.didChange($,(B)=>z(B)):z($))}}return Promise.all(Y).then(void 0,(Q)=>{throw this._client.error(`Sending document notification ${x$.DidChangeTextDocumentNotification.type.method} failed`,Q),Q})}notificationSent($,Z,J){this._onNotificationSent.fire({textDocument:$,type:Z,params:J})}unregister($){if(this._changeData.delete($),this._changeData.size===0){if(this._listener)this._listener.dispose(),this._listener=void 0;this._syncKind=x$.TextDocumentSyncKind.None}else{this._syncKind=x$.TextDocumentSyncKind.None;for(let Z of this._changeData.values())if(this.updateSyncKind(Z.syncKind),this._syncKind===x$.TextDocumentSyncKind.Full)break}}clear(){if(this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=x$.TextDocumentSyncKind.None,this._listener)this._listener.dispose(),this._listener=void 0}getPendingDocumentChanges($){if(this._pendingTextDocumentChanges.size===0)return[];let Z;if($.size===0)Z=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{Z=[];for(let J of this._pendingTextDocumentChanges)if(!$.has(J[0]))Z.push(J[1]),this._pendingTextDocumentChanges.delete(J[0])}return Z}getProvider($){for(let Z of this._changeData.values())if(o0.languages.match(Z.documentSelector,$)>0)return{send:(J)=>{return this.callback(J)}};return}updateSyncKind($){if(this._syncKind===x$.TextDocumentSyncKind.Full)return;switch($){case x$.TextDocumentSyncKind.Full:this._syncKind=$;break;case x$.TextDocumentSyncKind.Incremental:if(this._syncKind===x$.TextDocumentSyncKind.None)this._syncKind=x$.TextDocumentSyncKind.Incremental;break}}}u0.DidChangeTextDocumentFeature=EB;class UB extends a$.TextDocumentEventFeature{constructor($){super($,o0.workspace.onWillSaveTextDocument,x$.WillSaveTextDocumentNotification.type,()=>$.middleware.willSave,(Z)=>$.code2ProtocolConverter.asWillSaveTextDocumentParams(Z),(Z)=>Z.document,(Z,J)=>a$.TextDocumentEventFeature.textDocumentFilter(Z,J.document))}get registrationType(){return x$.WillSaveTextDocumentNotification.type}fillClientCapabilities($){let Z=(0,a$.ensure)((0,a$.ensure)($,"textDocument"),"synchronization");Z.willSave=!0}initialize($,Z){let J=$.resolvedTextDocumentSync;if(Z&&J&&J.willSave)this.register({id:jJ.generateUuid(),registerOptions:{documentSelector:Z}})}getTextDocument($){return $.document}}u0.WillSaveFeature=UB;class wB extends a$.DynamicDocumentFeature{constructor($){super($);this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return x$.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities($){let Z=(0,a$.ensure)((0,a$.ensure)($,"textDocument"),"synchronization");Z.willSaveWaitUntil=!0}initialize($,Z){let J=$.resolvedTextDocumentSync;if(Z&&J&&J.willSaveWaitUntil)this.register({id:jJ.generateUuid(),registerOptions:{documentSelector:Z}})}register($){if(!$.registerOptions.documentSelector)return;if(!this._listener)this._listener=o0.workspace.onWillSaveTextDocument(this.callback,this);this._selectors.set($.id,this._client.protocol2CodeConverter.asDocumentSelector($.registerOptions.documentSelector))}callback($){if(a$.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),$.document)&&!this._client.hasDedicatedTextSynchronizationFeature($.document)){let Z=this._client.middleware,J=(Y)=>{return this._client.sendRequest(x$.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(Y)).then(async(Q)=>{let X=await this._client.protocol2CodeConverter.asTextEdits(Q);return X===void 0?[]:X})};$.waitUntil(Z.willSaveWaitUntil?Z.willSaveWaitUntil($,J):J($))}}unregister($){if(this._selectors.delete($),this._selectors.size===0&&this._listener)this._listener.dispose(),this._listener=void 0}clear(){if(this._selectors.clear(),this._listener)this._listener.dispose(),this._listener=void 0}}u0.WillSaveWaitUntilFeature=wB;class NB extends a$.TextDocumentEventFeature{constructor($){super($,o0.workspace.onDidSaveTextDocument,x$.DidSaveTextDocumentNotification.type,()=>$.middleware.didSave,(Z)=>$.code2ProtocolConverter.asSaveTextDocumentParams(Z,this._includeText),(Z)=>Z,a$.TextDocumentEventFeature.textDocumentFilter);this._includeText=!1}get registrationType(){return x$.DidSaveTextDocumentNotification.type}fillClientCapabilities($){(0,a$.ensure)((0,a$.ensure)($,"textDocument"),"synchronization").didSave=!0}initialize($,Z){let J=$.resolvedTextDocumentSync;if(Z&&J&&J.save){let Y=typeof J.save==="boolean"?{includeText:!1}:{includeText:!!J.save.includeText};this.register({id:jJ.generateUuid(),registerOptions:Object.assign({},{documentSelector:Z},Y)})}}register($){this._includeText=!!$.registerOptions.includeText,super.register($)}getTextDocument($){return $}}u0.DidSaveTextDocumentFeature=NB});var PB=D((tY)=>{Object.defineProperty(tY,"__esModule",{value:!0});tY.CompletionItemFeature=void 0;var gW=require("vscode"),E$=Z$(),W7=N$(),pW=l$(),dW=[E$.CompletionItemKind.Text,E$.CompletionItemKind.Method,E$.CompletionItemKind.Function,E$.CompletionItemKind.Constructor,E$.CompletionItemKind.Field,E$.CompletionItemKind.Variable,E$.CompletionItemKind.Class,E$.CompletionItemKind.Interface,E$.CompletionItemKind.Module,E$.CompletionItemKind.Property,E$.CompletionItemKind.Unit,E$.CompletionItemKind.Value,E$.CompletionItemKind.Enum,E$.CompletionItemKind.Keyword,E$.CompletionItemKind.Snippet,E$.CompletionItemKind.Color,E$.CompletionItemKind.File,E$.CompletionItemKind.Reference,E$.CompletionItemKind.Folder,E$.CompletionItemKind.EnumMember,E$.CompletionItemKind.Constant,E$.CompletionItemKind.Struct,E$.CompletionItemKind.Event,E$.CompletionItemKind.Operator,E$.CompletionItemKind.TypeParameter];class FB extends W7.TextDocumentLanguageFeature{constructor($){super($,E$.CompletionRequest.type);this.labelDetailsSupport=new Map}fillClientCapabilities($){let Z=(0,W7.ensure)((0,W7.ensure)($,"textDocument"),"completion");Z.dynamicRegistration=!0,Z.contextSupport=!0,Z.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[E$.MarkupKind.Markdown,E$.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[E$.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[E$.InsertTextMode.asIs,E$.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},Z.insertTextMode=E$.InsertTextMode.adjustIndentation,Z.completionItemKind={valueSet:dW},Z.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize($,Z){let J=this.getRegistrationOptions(Z,$.completionProvider);if(!J)return;this.register({id:pW.generateUuid(),registerOptions:J})}registerLanguageProvider($,Z){this.labelDetailsSupport.set(Z,!!$.completionItem?.labelDetailsSupport);let J=$.triggerCharacters??[],Y=$.allCommitCharacters,Q=$.documentSelector,X={provideCompletionItems:(z,B,j,H)=>{let O=this._client,N=this._client.middleware,U=(E,T,C,x)=>{return O.sendRequest(E$.CompletionRequest.type,O.code2ProtocolConverter.asCompletionParams(E,T,C),x).then((h)=>{if(x.isCancellationRequested)return null;return O.protocol2CodeConverter.asCompletionResult(h,Y,x)},(h)=>{return O.handleFailedRequest(E$.CompletionRequest.type,x,h,null)})};return N.provideCompletionItem?N.provideCompletionItem(z,B,H,j,U):U(z,B,H,j)},resolveCompletionItem:$.resolveProvider?(z,B)=>{let j=this._client,H=this._client.middleware,O=(N,U)=>{return j.sendRequest(E$.CompletionResolveRequest.type,j.code2ProtocolConverter.asCompletionItem(N,!!this.labelDetailsSupport.get(Z)),U).then((E)=>{if(U.isCancellationRequested)return null;return j.protocol2CodeConverter.asCompletionItem(E)},(E)=>{return j.handleFailedRequest(E$.CompletionResolveRequest.type,U,E,N)})};return H.resolveCompletionItem?H.resolveCompletionItem(z,B,O):O(z,B)}:void 0};return[gW.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(Q),X,...J),X]}}tY.CompletionItemFeature=FB});var IB=D((eY)=>{Object.defineProperty(eY,"__esModule",{value:!0});eY.HoverFeature=void 0;var mW=require("vscode"),fJ=Z$(),H7=N$(),uW=l$();class MB extends H7.TextDocumentLanguageFeature{constructor($){super($,fJ.HoverRequest.type)}fillClientCapabilities($){let Z=(0,H7.ensure)((0,H7.ensure)($,"textDocument"),"hover");Z.dynamicRegistration=!0,Z.contentFormat=[fJ.MarkupKind.Markdown,fJ.MarkupKind.PlainText]}initialize($,Z){let J=this.getRegistrationOptions(Z,$.hoverProvider);if(!J)return;this.register({id:uW.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideHover:(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{return z.sendRequest(fJ.HoverRequest.type,z.code2ProtocolConverter.asTextDocumentPositionParams(H,O),N).then((U)=>{if(N.isCancellationRequested)return null;return z.protocol2CodeConverter.asHover(U)},(U)=>{return z.handleFailedRequest(fJ.HoverRequest.type,N,U,null)})},j=z.middleware;return j.provideHover?j.provideHover(Y,Q,X,B):B(Y,Q,X)}};return[this.registerProvider(Z,J),J]}registerProvider($,Z){return mW.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}eY.HoverFeature=MB});var qB=D(($8)=>{Object.defineProperty($8,"__esModule",{value:!0});$8.DefinitionFeature=void 0;var lW=require("vscode"),A7=Z$(),O7=N$(),cW=l$();class TB extends O7.TextDocumentLanguageFeature{constructor($){super($,A7.DefinitionRequest.type)}fillClientCapabilities($){let Z=(0,O7.ensure)((0,O7.ensure)($,"textDocument"),"definition");Z.dynamicRegistration=!0,Z.linkSupport=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.definitionProvider);if(!J)return;this.register({id:cW.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideDefinition:(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{return z.sendRequest(A7.DefinitionRequest.type,z.code2ProtocolConverter.asTextDocumentPositionParams(H,O),N).then((U)=>{if(N.isCancellationRequested)return null;return z.protocol2CodeConverter.asDefinitionResult(U,N)},(U)=>{return z.handleFailedRequest(A7.DefinitionRequest.type,N,U,null)})},j=z.middleware;return j.provideDefinition?j.provideDefinition(Y,Q,X,B):B(Y,Q,X)}};return[this.registerProvider(Z,J),J]}registerProvider($,Z){return lW.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}$8.DefinitionFeature=TB});var DB=D((Z8)=>{Object.defineProperty(Z8,"__esModule",{value:!0});Z8.SignatureHelpFeature=void 0;var CB=require("vscode"),kJ=Z$(),E7=N$(),iW=l$();class SB extends E7.TextDocumentLanguageFeature{constructor($){super($,kJ.SignatureHelpRequest.type)}fillClientCapabilities($){let Z=(0,E7.ensure)((0,E7.ensure)($,"textDocument"),"signatureHelp");Z.dynamicRegistration=!0,Z.signatureInformation={documentationFormat:[kJ.MarkupKind.Markdown,kJ.MarkupKind.PlainText]},Z.signatureInformation.parameterInformation={labelOffsetSupport:!0},Z.signatureInformation.activeParameterSupport=!0,Z.contextSupport=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.signatureHelpProvider);if(!J)return;this.register({id:iW.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z={provideSignatureHelp:(J,Y,Q,X)=>{let z=this._client,B=(H,O,N,U)=>{return z.sendRequest(kJ.SignatureHelpRequest.type,z.code2ProtocolConverter.asSignatureHelpParams(H,O,N),U).then((E)=>{if(U.isCancellationRequested)return null;return z.protocol2CodeConverter.asSignatureHelp(E,U)},(E)=>{return z.handleFailedRequest(kJ.SignatureHelpRequest.type,U,E,null)})},j=z.middleware;return j.provideSignatureHelp?j.provideSignatureHelp(J,Y,X,Q,B):B(J,Y,X,Q)}};return[this.registerProvider($,Z),Z]}registerProvider($,Z){let J=this._client.protocol2CodeConverter.asDocumentSelector($.documentSelector);if($.retriggerCharacters===void 0){let Y=$.triggerCharacters||[];return CB.languages.registerSignatureHelpProvider(J,Z,...Y)}else{let Y={triggerCharacters:$.triggerCharacters||[],retriggerCharacters:$.retriggerCharacters||[]};return CB.languages.registerSignatureHelpProvider(J,Z,Y)}}}Z8.SignatureHelpFeature=SB});var RB=D((J8)=>{Object.defineProperty(J8,"__esModule",{value:!0});J8.DocumentHighlightFeature=void 0;var nW=require("vscode"),U7=Z$(),w7=N$(),aW=l$();class bB extends w7.TextDocumentLanguageFeature{constructor($){super($,U7.DocumentHighlightRequest.type)}fillClientCapabilities($){(0,w7.ensure)((0,w7.ensure)($,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.documentHighlightProvider);if(!J)return;this.register({id:aW.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideDocumentHighlights:(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{return z.sendRequest(U7.DocumentHighlightRequest.type,z.code2ProtocolConverter.asTextDocumentPositionParams(H,O),N).then((U)=>{if(N.isCancellationRequested)return null;return z.protocol2CodeConverter.asDocumentHighlights(U,N)},(U)=>{return z.handleFailedRequest(U7.DocumentHighlightRequest.type,N,U,null)})},j=z.middleware;return j.provideDocumentHighlights?j.provideDocumentHighlights(Y,Q,X,B):B(Y,Q,X)}};return[nW.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J),J]}}J8.DocumentHighlightFeature=bB});var L7=D((kZ)=>{Object.defineProperty(kZ,"__esModule",{value:!0});kZ.DocumentSymbolFeature=kZ.SupportedSymbolTags=kZ.SupportedSymbolKinds=void 0;var sW=require("vscode"),T$=Z$(),N7=N$(),rW=l$();kZ.SupportedSymbolKinds=[T$.SymbolKind.File,T$.SymbolKind.Module,T$.SymbolKind.Namespace,T$.SymbolKind.Package,T$.SymbolKind.Class,T$.SymbolKind.Method,T$.SymbolKind.Property,T$.SymbolKind.Field,T$.SymbolKind.Constructor,T$.SymbolKind.Enum,T$.SymbolKind.Interface,T$.SymbolKind.Function,T$.SymbolKind.Variable,T$.SymbolKind.Constant,T$.SymbolKind.String,T$.SymbolKind.Number,T$.SymbolKind.Boolean,T$.SymbolKind.Array,T$.SymbolKind.Object,T$.SymbolKind.Key,T$.SymbolKind.Null,T$.SymbolKind.EnumMember,T$.SymbolKind.Struct,T$.SymbolKind.Event,T$.SymbolKind.Operator,T$.SymbolKind.TypeParameter];kZ.SupportedSymbolTags=[T$.SymbolTag.Deprecated];class yB extends N7.TextDocumentLanguageFeature{constructor($){super($,T$.DocumentSymbolRequest.type)}fillClientCapabilities($){let Z=(0,N7.ensure)((0,N7.ensure)($,"textDocument"),"documentSymbol");Z.dynamicRegistration=!0,Z.symbolKind={valueSet:kZ.SupportedSymbolKinds},Z.hierarchicalDocumentSymbolSupport=!0,Z.tagSupport={valueSet:kZ.SupportedSymbolTags},Z.labelSupport=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.documentSymbolProvider);if(!J)return;this.register({id:rW.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideDocumentSymbols:(Q,X)=>{let z=this._client,B=async(H,O)=>{try{let N=await z.sendRequest(T$.DocumentSymbolRequest.type,z.code2ProtocolConverter.asDocumentSymbolParams(H),O);if(O.isCancellationRequested||N===void 0||N===null)return null;if(N.length===0)return[];else{let U=N[0];if(T$.DocumentSymbol.is(U))return await z.protocol2CodeConverter.asDocumentSymbols(N,O);else return await z.protocol2CodeConverter.asSymbolInformations(N,O)}}catch(N){return z.handleFailedRequest(T$.DocumentSymbolRequest.type,O,N,null)}},j=z.middleware;return j.provideDocumentSymbols?j.provideDocumentSymbols(Q,X,B):B(Q,X)}},Y=$.label!==void 0?{label:$.label}:void 0;return[sW.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J,Y),J]}}kZ.DocumentSymbolFeature=yB});var hB=D((Y8)=>{Object.defineProperty(Y8,"__esModule",{value:!0});Y8.WorkspaceSymbolFeature=void 0;var oW=require("vscode"),vJ=Z$(),F7=N$(),_B=L7(),tW=l$();class xB extends F7.WorkspaceFeature{constructor($){super($,vJ.WorkspaceSymbolRequest.type)}fillClientCapabilities($){let Z=(0,F7.ensure)((0,F7.ensure)($,"workspace"),"symbol");Z.dynamicRegistration=!0,Z.symbolKind={valueSet:_B.SupportedSymbolKinds},Z.tagSupport={valueSet:_B.SupportedSymbolTags},Z.resolveSupport={properties:["location.range"]}}initialize($){if(!$.workspaceSymbolProvider)return;this.register({id:tW.generateUuid(),registerOptions:$.workspaceSymbolProvider===!0?{workDoneProgress:!1}:$.workspaceSymbolProvider})}registerLanguageProvider($){let Z={provideWorkspaceSymbols:(J,Y)=>{let Q=this._client,X=(B,j)=>{return Q.sendRequest(vJ.WorkspaceSymbolRequest.type,{query:B},j).then((H)=>{if(j.isCancellationRequested)return null;return Q.protocol2CodeConverter.asSymbolInformations(H,j)},(H)=>{return Q.handleFailedRequest(vJ.WorkspaceSymbolRequest.type,j,H,null)})},z=Q.middleware;return z.provideWorkspaceSymbols?z.provideWorkspaceSymbols(J,Y,X):X(J,Y)},resolveWorkspaceSymbol:$.resolveProvider===!0?(J,Y)=>{let Q=this._client,X=(B,j)=>{return Q.sendRequest(vJ.WorkspaceSymbolResolveRequest.type,Q.code2ProtocolConverter.asWorkspaceSymbol(B),j).then((H)=>{if(j.isCancellationRequested)return null;return Q.protocol2CodeConverter.asSymbolInformation(H)},(H)=>{return Q.handleFailedRequest(vJ.WorkspaceSymbolResolveRequest.type,j,H,null)})},z=Q.middleware;return z.resolveWorkspaceSymbol?z.resolveWorkspaceSymbol(J,Y,X):X(J,Y)}:void 0};return[oW.languages.registerWorkspaceSymbolProvider(Z),Z]}}Y8.WorkspaceSymbolFeature=xB});var kB=D((Q8)=>{Object.defineProperty(Q8,"__esModule",{value:!0});Q8.ReferencesFeature=void 0;var eW=require("vscode"),P7=Z$(),M7=N$(),$H=l$();class fB extends M7.TextDocumentLanguageFeature{constructor($){super($,P7.ReferencesRequest.type)}fillClientCapabilities($){(0,M7.ensure)((0,M7.ensure)($,"textDocument"),"references").dynamicRegistration=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.referencesProvider);if(!J)return;this.register({id:$H.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideReferences:(Y,Q,X,z)=>{let B=this._client,j=(O,N,U,E)=>{return B.sendRequest(P7.ReferencesRequest.type,B.code2ProtocolConverter.asReferenceParams(O,N,U),E).then((T)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asReferences(T,E)},(T)=>{return B.handleFailedRequest(P7.ReferencesRequest.type,E,T,null)})},H=B.middleware;return H.provideReferences?H.provideReferences(Y,Q,X,z,j):j(Y,Q,X,z)}};return[this.registerProvider(Z,J),J]}registerProvider($,Z){return eW.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}Q8.ReferencesFeature=fB});var gB=D((X8)=>{Object.defineProperty(X8,"__esModule",{value:!0});X8.CodeActionFeature=void 0;var ZH=require("vscode"),t0=Z$(),JH=l$(),I7=N$();class vB extends I7.TextDocumentLanguageFeature{constructor($){super($,t0.CodeActionRequest.type)}fillClientCapabilities($){let Z=(0,I7.ensure)((0,I7.ensure)($,"textDocument"),"codeAction");Z.dynamicRegistration=!0,Z.isPreferredSupport=!0,Z.disabledSupport=!0,Z.dataSupport=!0,Z.resolveSupport={properties:["edit"]},Z.codeActionLiteralSupport={codeActionKind:{valueSet:[t0.CodeActionKind.Empty,t0.CodeActionKind.QuickFix,t0.CodeActionKind.Refactor,t0.CodeActionKind.RefactorExtract,t0.CodeActionKind.RefactorInline,t0.CodeActionKind.RefactorRewrite,t0.CodeActionKind.Source,t0.CodeActionKind.SourceOrganizeImports]}},Z.honorsChangeAnnotations=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.codeActionProvider);if(!J)return;this.register({id:JH.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideCodeActions:(Y,Q,X,z)=>{let B=this._client,j=async(O,N,U,E)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),range:B.code2ProtocolConverter.asRange(N),context:B.code2ProtocolConverter.asCodeActionContextSync(U)};return B.sendRequest(t0.CodeActionRequest.type,T,E).then((C)=>{if(E.isCancellationRequested||C===null||C===void 0)return null;return B.protocol2CodeConverter.asCodeActionResult(C,E)},(C)=>{return B.handleFailedRequest(t0.CodeActionRequest.type,E,C,null)})},H=B.middleware;return H.provideCodeActions?H.provideCodeActions(Y,Q,X,z,j):j(Y,Q,X,z)},resolveCodeAction:$.resolveProvider?(Y,Q)=>{let X=this._client,z=this._client.middleware,B=async(j,H)=>{return X.sendRequest(t0.CodeActionResolveRequest.type,X.code2ProtocolConverter.asCodeActionSync(j),H).then((O)=>{if(H.isCancellationRequested)return j;return X.protocol2CodeConverter.asCodeAction(O,H)},(O)=>{return X.handleFailedRequest(t0.CodeActionResolveRequest.type,H,O,j)})};return z.resolveCodeAction?z.resolveCodeAction(Y,Q,B):B(Y,Q)}:void 0};return[ZH.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J,$.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds($.codeActionKinds)}:void 0),J]}}X8.CodeActionFeature=vB});var mB=D((z8)=>{Object.defineProperty(z8,"__esModule",{value:!0});z8.CodeLensFeature=void 0;var pB=require("vscode"),KJ=Z$(),YH=l$(),gJ=N$();class dB extends gJ.TextDocumentLanguageFeature{constructor($){super($,KJ.CodeLensRequest.type)}fillClientCapabilities($){(0,gJ.ensure)((0,gJ.ensure)($,"textDocument"),"codeLens").dynamicRegistration=!0,(0,gJ.ensure)((0,gJ.ensure)($,"workspace"),"codeLens").refreshSupport=!0}initialize($,Z){this._client.onRequest(KJ.CodeLensRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeCodeLensEmitter.fire()});let Y=this.getRegistrationOptions(Z,$.codeLensProvider);if(!Y)return;this.register({id:YH.generateUuid(),registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J=new pB.EventEmitter,Y={onDidChangeCodeLenses:J.event,provideCodeLenses:(Q,X)=>{let z=this._client,B=(H,O)=>{return z.sendRequest(KJ.CodeLensRequest.type,z.code2ProtocolConverter.asCodeLensParams(H),O).then((N)=>{if(O.isCancellationRequested)return null;return z.protocol2CodeConverter.asCodeLenses(N,O)},(N)=>{return z.handleFailedRequest(KJ.CodeLensRequest.type,O,N,null)})},j=z.middleware;return j.provideCodeLenses?j.provideCodeLenses(Q,X,B):B(Q,X)},resolveCodeLens:$.resolveProvider?(Q,X)=>{let z=this._client,B=(H,O)=>{return z.sendRequest(KJ.CodeLensResolveRequest.type,z.code2ProtocolConverter.asCodeLens(H),O).then((N)=>{if(O.isCancellationRequested)return H;return z.protocol2CodeConverter.asCodeLens(N)},(N)=>{return z.handleFailedRequest(KJ.CodeLensResolveRequest.type,O,N,H)})},j=z.middleware;return j.resolveCodeLens?j.resolveCodeLens(Q,X,B):B(Q,X)}:void 0};return[pB.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),Y),{provider:Y,onDidChangeCodeLensEmitter:J}]}}z8.CodeLensFeature=dB});var iB=D((O9)=>{Object.defineProperty(O9,"__esModule",{value:!0});O9.DocumentOnTypeFormattingFeature=O9.DocumentRangeFormattingFeature=O9.DocumentFormattingFeature=void 0;var G8=require("vscode"),LZ=Z$(),T7=l$(),aZ=N$(),VJ;(function($){function Z(J){let Y=G8.workspace.getConfiguration("files",J);return{trimTrailingWhitespace:Y.get("trimTrailingWhitespace"),trimFinalNewlines:Y.get("trimFinalNewlines"),insertFinalNewline:Y.get("insertFinalNewline")}}$.fromConfiguration=Z})(VJ||(VJ={}));class uB extends aZ.TextDocumentLanguageFeature{constructor($){super($,LZ.DocumentFormattingRequest.type)}fillClientCapabilities($){(0,aZ.ensure)((0,aZ.ensure)($,"textDocument"),"formatting").dynamicRegistration=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.documentFormattingProvider);if(!J)return;this.register({id:T7.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideDocumentFormattingEdits:(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{let U={textDocument:z.code2ProtocolConverter.asTextDocumentIdentifier(H),options:z.code2ProtocolConverter.asFormattingOptions(O,VJ.fromConfiguration(H))};return z.sendRequest(LZ.DocumentFormattingRequest.type,U,N).then((E)=>{if(N.isCancellationRequested)return null;return z.protocol2CodeConverter.asTextEdits(E,N)},(E)=>{return z.handleFailedRequest(LZ.DocumentFormattingRequest.type,N,E,null)})},j=z.middleware;return j.provideDocumentFormattingEdits?j.provideDocumentFormattingEdits(Y,Q,X,B):B(Y,Q,X)}};return[G8.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J),J]}}O9.DocumentFormattingFeature=uB;class lB extends aZ.TextDocumentLanguageFeature{constructor($){super($,LZ.DocumentRangeFormattingRequest.type)}fillClientCapabilities($){let Z=(0,aZ.ensure)((0,aZ.ensure)($,"textDocument"),"rangeFormatting");Z.dynamicRegistration=!0,Z.rangesSupport=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.documentRangeFormattingProvider);if(!J)return;this.register({id:T7.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideDocumentRangeFormattingEdits:(Y,Q,X,z)=>{let B=this._client,j=(O,N,U,E)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),range:B.code2ProtocolConverter.asRange(N),options:B.code2ProtocolConverter.asFormattingOptions(U,VJ.fromConfiguration(O))};return B.sendRequest(LZ.DocumentRangeFormattingRequest.type,T,E).then((C)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asTextEdits(C,E)},(C)=>{return B.handleFailedRequest(LZ.DocumentRangeFormattingRequest.type,E,C,null)})},H=B.middleware;return H.provideDocumentRangeFormattingEdits?H.provideDocumentRangeFormattingEdits(Y,Q,X,z,j):j(Y,Q,X,z)}};if($.rangesSupport)J.provideDocumentRangesFormattingEdits=(Y,Q,X,z)=>{let B=this._client,j=(O,N,U,E)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),ranges:B.code2ProtocolConverter.asRanges(N),options:B.code2ProtocolConverter.asFormattingOptions(U,VJ.fromConfiguration(O))};return B.sendRequest(LZ.DocumentRangesFormattingRequest.type,T,E).then((C)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asTextEdits(C,E)},(C)=>{return B.handleFailedRequest(LZ.DocumentRangesFormattingRequest.type,E,C,null)})},H=B.middleware;return H.provideDocumentRangesFormattingEdits?H.provideDocumentRangesFormattingEdits(Y,Q,X,z,j):j(Y,Q,X,z)};return[G8.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J),J]}}O9.DocumentRangeFormattingFeature=lB;class cB extends aZ.TextDocumentLanguageFeature{constructor($){super($,LZ.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities($){(0,aZ.ensure)((0,aZ.ensure)($,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.documentOnTypeFormattingProvider);if(!J)return;this.register({id:T7.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideOnTypeFormattingEdits:(Q,X,z,B,j)=>{let H=this._client,O=(U,E,T,C,x)=>{let h={textDocument:H.code2ProtocolConverter.asTextDocumentIdentifier(U),position:H.code2ProtocolConverter.asPosition(E),ch:T,options:H.code2ProtocolConverter.asFormattingOptions(C,VJ.fromConfiguration(U))};return H.sendRequest(LZ.DocumentOnTypeFormattingRequest.type,h,x).then((d)=>{if(x.isCancellationRequested)return null;return H.protocol2CodeConverter.asTextEdits(d,x)},(d)=>{return H.handleFailedRequest(LZ.DocumentOnTypeFormattingRequest.type,x,d,null)})},N=H.middleware;return N.provideOnTypeFormattingEdits?N.provideOnTypeFormattingEdits(Q,X,z,B,j,O):O(Q,X,z,B,j)}},Y=$.moreTriggerCharacter||[];return[G8.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J,$.firstTriggerCharacter,...Y),J]}}O9.DocumentOnTypeFormattingFeature=cB});var sB=D((B8)=>{Object.defineProperty(B8,"__esModule",{value:!0});B8.RenameFeature=void 0;var QH=require("vscode"),S9=Z$(),XH=l$(),nB=XZ(),q7=N$();class aB extends q7.TextDocumentLanguageFeature{constructor($){super($,S9.RenameRequest.type)}fillClientCapabilities($){let Z=(0,q7.ensure)((0,q7.ensure)($,"textDocument"),"rename");Z.dynamicRegistration=!0,Z.prepareSupport=!0,Z.prepareSupportDefaultBehavior=S9.PrepareSupportDefaultBehavior.Identifier,Z.honorsChangeAnnotations=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.renameProvider);if(!J)return;if(nB.boolean($.renameProvider))J.prepareProvider=!1;this.register({id:XH.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideRenameEdits:(Y,Q,X,z)=>{let B=this._client,j=(O,N,U,E)=>{let T={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),position:B.code2ProtocolConverter.asPosition(N),newName:U};return B.sendRequest(S9.RenameRequest.type,T,E).then((C)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asWorkspaceEdit(C,E)},(C)=>{return B.handleFailedRequest(S9.RenameRequest.type,E,C,null,!1)})},H=B.middleware;return H.provideRenameEdits?H.provideRenameEdits(Y,Q,X,z,j):j(Y,Q,X,z)},prepareRename:$.prepareProvider?(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{let U={textDocument:z.code2ProtocolConverter.asTextDocumentIdentifier(H),position:z.code2ProtocolConverter.asPosition(O)};return z.sendRequest(S9.PrepareRenameRequest.type,U,N).then((E)=>{if(N.isCancellationRequested)return null;if(S9.Range.is(E))return z.protocol2CodeConverter.asRange(E);else if(this.isDefaultBehavior(E))return E.defaultBehavior===!0?null:Promise.reject(Error("The element can't be renamed."));else if(E&&S9.Range.is(E.range))return{range:z.protocol2CodeConverter.asRange(E.range),placeholder:E.placeholder};return Promise.reject(Error("The element can't be renamed."))},(E)=>{if(typeof E.message==="string")throw Error(E.message);else throw Error("The element can't be renamed.")})},j=z.middleware;return j.prepareRename?j.prepareRename(Y,Q,X,B):B(Y,Q,X)}:void 0};return[this.registerProvider(Z,J),J]}registerProvider($,Z){return QH.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}isDefaultBehavior($){let Z=$;return Z&&nB.boolean(Z.defaultBehavior)}}B8.RenameFeature=aB});var oB=D((j8)=>{Object.defineProperty(j8,"__esModule",{value:!0});j8.DocumentLinkFeature=void 0;var zH=require("vscode"),pJ=Z$(),C7=N$(),GH=l$();class rB extends C7.TextDocumentLanguageFeature{constructor($){super($,pJ.DocumentLinkRequest.type)}fillClientCapabilities($){let Z=(0,C7.ensure)((0,C7.ensure)($,"textDocument"),"documentLink");Z.dynamicRegistration=!0,Z.tooltipSupport=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.documentLinkProvider);if(!J)return;this.register({id:GH.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideDocumentLinks:(Y,Q)=>{let X=this._client,z=(j,H)=>{return X.sendRequest(pJ.DocumentLinkRequest.type,X.code2ProtocolConverter.asDocumentLinkParams(j),H).then((O)=>{if(H.isCancellationRequested)return null;return X.protocol2CodeConverter.asDocumentLinks(O,H)},(O)=>{return X.handleFailedRequest(pJ.DocumentLinkRequest.type,H,O,null)})},B=X.middleware;return B.provideDocumentLinks?B.provideDocumentLinks(Y,Q,z):z(Y,Q)},resolveDocumentLink:$.resolveProvider?(Y,Q)=>{let X=this._client,z=(j,H)=>{return X.sendRequest(pJ.DocumentLinkResolveRequest.type,X.code2ProtocolConverter.asDocumentLink(j),H).then((O)=>{if(H.isCancellationRequested)return j;return X.protocol2CodeConverter.asDocumentLink(O)},(O)=>{return X.handleFailedRequest(pJ.DocumentLinkResolveRequest.type,H,O,j)})},B=X.middleware;return B.resolveDocumentLink?B.resolveDocumentLink(Y,Q,z):z(Y,Q)}:void 0};return[zH.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J),J]}}j8.DocumentLinkFeature=rB});var $3=D((K8)=>{Object.defineProperty(K8,"__esModule",{value:!0});K8.ExecuteCommandFeature=void 0;var BH=require("vscode"),S7=Z$(),jH=l$(),tB=N$();class eB{constructor($){this._client=$,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return S7.ExecuteCommandRequest.type}fillClientCapabilities($){(0,tB.ensure)((0,tB.ensure)($,"workspace"),"executeCommand").dynamicRegistration=!0}initialize($){if(!$.executeCommandProvider)return;this.register({id:jH.generateUuid(),registerOptions:Object.assign({},$.executeCommandProvider)})}register($){let Z=this._client,J=Z.middleware,Y=(Q,X)=>{let z={command:Q,arguments:X};return Z.sendRequest(S7.ExecuteCommandRequest.type,z).then(void 0,(B)=>{return Z.handleFailedRequest(S7.ExecuteCommandRequest.type,void 0,B,void 0)})};if($.registerOptions.commands){let Q=[];for(let X of $.registerOptions.commands)Q.push(BH.commands.registerCommand(X,(...z)=>{return J.executeCommand?J.executeCommand(X,z,Y):Y(X,z)}));this._commands.set($.id,Q)}}unregister($){let Z=this._commands.get($);if(Z)Z.forEach((J)=>J.dispose())}clear(){this._commands.forEach(($)=>{$.forEach((Z)=>Z.dispose())}),this._commands.clear()}}K8.ExecuteCommandFeature=eB});var J3=D((W8)=>{Object.defineProperty(W8,"__esModule",{value:!0});W8.FileSystemWatcherFeature=void 0;var KH=require("vscode"),D9=Z$(),V8=N$();class Z3{constructor($,Z){this._client=$,this._notifyFileEvent=Z,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return D9.DidChangeWatchedFilesNotification.type}fillClientCapabilities($){(0,V8.ensure)((0,V8.ensure)($,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,V8.ensure)((0,V8.ensure)($,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize($,Z){}register($){if(!Array.isArray($.registerOptions.watchers))return;let Z=[];for(let J of $.registerOptions.watchers){let Y=this._client.protocol2CodeConverter.asGlobPattern(J.globPattern);if(Y===void 0)continue;let Q=!0,X=!0,z=!0;if(J.kind!==void 0&&J.kind!==null)Q=(J.kind&D9.WatchKind.Create)!==0,X=(J.kind&D9.WatchKind.Change)!==0,z=(J.kind&D9.WatchKind.Delete)!==0;let B=KH.workspace.createFileSystemWatcher(Y,!Q,!X,!z);this.hookListeners(B,Q,X,z,Z),Z.push(B)}this._watchers.set($.id,Z)}registerRaw($,Z){let J=[];for(let Y of Z)this.hookListeners(Y,!0,!0,!0,J);this._watchers.set($,J)}hookListeners($,Z,J,Y,Q){if(Z)$.onDidCreate((X)=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(X),type:D9.FileChangeType.Created}),null,Q);if(J)$.onDidChange((X)=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(X),type:D9.FileChangeType.Changed}),null,Q);if(Y)$.onDidDelete((X)=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(X),type:D9.FileChangeType.Deleted}),null,Q)}unregister($){let Z=this._watchers.get($);if(Z)for(let J of Z)J.dispose()}clear(){this._watchers.forEach(($)=>{for(let Z of $)Z.dispose()}),this._watchers.clear()}}W8.FileSystemWatcherFeature=Z3});var Q3=D((H8)=>{Object.defineProperty(H8,"__esModule",{value:!0});H8.ColorProviderFeature=void 0;var VH=require("vscode"),dJ=Z$(),D7=N$();class Y3 extends D7.TextDocumentLanguageFeature{constructor($){super($,dJ.DocumentColorRequest.type)}fillClientCapabilities($){(0,D7.ensure)((0,D7.ensure)($,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize($,Z){let[J,Y]=this.getRegistration(Z,$.colorProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J={provideColorPresentations:(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{let U={color:H,textDocument:z.code2ProtocolConverter.asTextDocumentIdentifier(O.document),range:z.code2ProtocolConverter.asRange(O.range)};return z.sendRequest(dJ.ColorPresentationRequest.type,U,N).then((E)=>{if(N.isCancellationRequested)return null;return this._client.protocol2CodeConverter.asColorPresentations(E,N)},(E)=>{return z.handleFailedRequest(dJ.ColorPresentationRequest.type,N,E,null)})},j=z.middleware;return j.provideColorPresentations?j.provideColorPresentations(Y,Q,X,B):B(Y,Q,X)},provideDocumentColors:(Y,Q)=>{let X=this._client,z=(j,H)=>{let O={textDocument:X.code2ProtocolConverter.asTextDocumentIdentifier(j)};return X.sendRequest(dJ.DocumentColorRequest.type,O,H).then((N)=>{if(H.isCancellationRequested)return null;return this._client.protocol2CodeConverter.asColorInformations(N,H)},(N)=>{return X.handleFailedRequest(dJ.DocumentColorRequest.type,H,N,null)})},B=X.middleware;return B.provideDocumentColors?B.provideDocumentColors(Y,Q,z):z(Y,Q)}};return[VH.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J),J]}}H8.ColorProviderFeature=Y3});var z3=D((A8)=>{Object.defineProperty(A8,"__esModule",{value:!0});A8.ImplementationFeature=void 0;var WH=require("vscode"),b7=Z$(),R7=N$();class X3 extends R7.TextDocumentLanguageFeature{constructor($){super($,b7.ImplementationRequest.type)}fillClientCapabilities($){let Z=(0,R7.ensure)((0,R7.ensure)($,"textDocument"),"implementation");Z.dynamicRegistration=!0,Z.linkSupport=!0}initialize($,Z){let[J,Y]=this.getRegistration(Z,$.implementationProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J={provideImplementation:(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{return z.sendRequest(b7.ImplementationRequest.type,z.code2ProtocolConverter.asTextDocumentPositionParams(H,O),N).then((U)=>{if(N.isCancellationRequested)return null;return z.protocol2CodeConverter.asDefinitionResult(U,N)},(U)=>{return z.handleFailedRequest(b7.ImplementationRequest.type,N,U,null)})},j=z.middleware;return j.provideImplementation?j.provideImplementation(Y,Q,X,B):B(Y,Q,X)}};return[this.registerProvider(Z,J),J]}registerProvider($,Z){return WH.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}A8.ImplementationFeature=X3});var B3=D((O8)=>{Object.defineProperty(O8,"__esModule",{value:!0});O8.TypeDefinitionFeature=void 0;var HH=require("vscode"),y7=Z$(),mJ=N$();class G3 extends mJ.TextDocumentLanguageFeature{constructor($){super($,y7.TypeDefinitionRequest.type)}fillClientCapabilities($){(0,mJ.ensure)((0,mJ.ensure)($,"textDocument"),"typeDefinition").dynamicRegistration=!0;let Z=(0,mJ.ensure)((0,mJ.ensure)($,"textDocument"),"typeDefinition");Z.dynamicRegistration=!0,Z.linkSupport=!0}initialize($,Z){let[J,Y]=this.getRegistration(Z,$.typeDefinitionProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J={provideTypeDefinition:(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{return z.sendRequest(y7.TypeDefinitionRequest.type,z.code2ProtocolConverter.asTextDocumentPositionParams(H,O),N).then((U)=>{if(N.isCancellationRequested)return null;return z.protocol2CodeConverter.asDefinitionResult(U,N)},(U)=>{return z.handleFailedRequest(y7.TypeDefinitionRequest.type,N,U,null)})},j=z.middleware;return j.provideTypeDefinition?j.provideTypeDefinition(Y,Q,X,B):B(Y,Q,X)}};return[this.registerProvider(Z,J),J]}registerProvider($,Z){return HH.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}O8.TypeDefinitionFeature=G3});var K3=D((WJ)=>{Object.defineProperty(WJ,"__esModule",{value:!0});WJ.WorkspaceFoldersFeature=WJ.arrayDiff=void 0;var AH=l$(),E8=require("vscode"),uJ=Z$();function _7($,Z){if($===void 0||$===null)return;return $[Z]}function x7($,Z){return $.filter((J)=>Z.indexOf(J)<0)}WJ.arrayDiff=x7;class j3{constructor($){this._client=$,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return uJ.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams($){let Z=E8.workspace.workspaceFolders;if(this.initializeWithFolders(Z),Z===void 0)$.workspaceFolders=null;else $.workspaceFolders=Z.map((J)=>this.asProtocol(J))}initializeWithFolders($){this._initialFolders=$}fillClientCapabilities($){$.workspace=$.workspace||{},$.workspace.workspaceFolders=!0}initialize($){let Z=this._client;Z.onRequest(uJ.WorkspaceFoldersRequest.type,(Q)=>{let X=()=>{let B=E8.workspace.workspaceFolders;if(B===void 0)return null;return B.map((H)=>{return this.asProtocol(H)})},z=Z.middleware.workspace;return z&&z.workspaceFolders?z.workspaceFolders(Q,X):X(Q)});let J=_7(_7(_7($,"workspace"),"workspaceFolders"),"changeNotifications"),Y;if(typeof J==="string")Y=J;else if(J===!0)Y=AH.generateUuid();if(Y)this.register({id:Y,registerOptions:void 0})}sendInitialEvent($){let Z;if(this._initialFolders&&$){let J=x7(this._initialFolders,$),Y=x7($,this._initialFolders);if(Y.length>0||J.length>0)Z=this.doSendEvent(Y,J)}else if(this._initialFolders)Z=this.doSendEvent([],this._initialFolders);else if($)Z=this.doSendEvent($,[]);if(Z!==void 0)Z.catch((J)=>{this._client.error(`Sending notification ${uJ.DidChangeWorkspaceFoldersNotification.type.method} failed`,J)})}doSendEvent($,Z){let J={event:{added:$.map((Y)=>this.asProtocol(Y)),removed:Z.map((Y)=>this.asProtocol(Y))}};return this._client.sendNotification(uJ.DidChangeWorkspaceFoldersNotification.type,J)}register($){let Z=$.id,J=this._client,Y=E8.workspace.onDidChangeWorkspaceFolders((Q)=>{let X=(j)=>{return this.doSendEvent(j.added,j.removed)},z=J.middleware.workspace;(z&&z.didChangeWorkspaceFolders?z.didChangeWorkspaceFolders(Q,X):X(Q)).catch((j)=>{this._client.error(`Sending notification ${uJ.DidChangeWorkspaceFoldersNotification.type.method} failed`,j)})});this._listeners.set(Z,Y),this.sendInitialEvent(E8.workspace.workspaceFolders)}unregister($){let Z=this._listeners.get($);if(Z===void 0)return;this._listeners.delete($),Z.dispose()}clear(){for(let $ of this._listeners.values())$.dispose();this._listeners.clear()}asProtocol($){if($===void 0)return null;return{uri:this._client.code2ProtocolConverter.asUri($.uri),name:$.name}}}WJ.WorkspaceFoldersFeature=j3});var H3=D((U8)=>{Object.defineProperty(U8,"__esModule",{value:!0});U8.FoldingRangeFeature=void 0;var V3=require("vscode"),b9=Z$(),lJ=N$();class W3 extends lJ.TextDocumentLanguageFeature{constructor($){super($,b9.FoldingRangeRequest.type)}fillClientCapabilities($){let Z=(0,lJ.ensure)((0,lJ.ensure)($,"textDocument"),"foldingRange");Z.dynamicRegistration=!0,Z.rangeLimit=5000,Z.lineFoldingOnly=!0,Z.foldingRangeKind={valueSet:[b9.FoldingRangeKind.Comment,b9.FoldingRangeKind.Imports,b9.FoldingRangeKind.Region]},Z.foldingRange={collapsedText:!1},(0,lJ.ensure)((0,lJ.ensure)($,"workspace"),"foldingRange").refreshSupport=!0}initialize($,Z){this._client.onRequest(b9.FoldingRangeRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeFoldingRange.fire()});let[J,Y]=this.getRegistration(Z,$.foldingRangeProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J=new V3.EventEmitter,Y={onDidChangeFoldingRanges:J.event,provideFoldingRanges:(Q,X,z)=>{let B=this._client,j=(O,N,U)=>{let E={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O)};return B.sendRequest(b9.FoldingRangeRequest.type,E,U).then((T)=>{if(U.isCancellationRequested)return null;return B.protocol2CodeConverter.asFoldingRanges(T,U)},(T)=>{return B.handleFailedRequest(b9.FoldingRangeRequest.type,U,T,null)})},H=B.middleware;return H.provideFoldingRanges?H.provideFoldingRanges(Q,X,z,j):j(Q,X,z)}};return[V3.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),Y),{provider:Y,onDidChangeFoldingRange:J}]}}U8.FoldingRangeFeature=W3});var O3=D((w8)=>{Object.defineProperty(w8,"__esModule",{value:!0});w8.DeclarationFeature=void 0;var OH=require("vscode"),h7=Z$(),f7=N$();class A3 extends f7.TextDocumentLanguageFeature{constructor($){super($,h7.DeclarationRequest.type)}fillClientCapabilities($){let Z=(0,f7.ensure)((0,f7.ensure)($,"textDocument"),"declaration");Z.dynamicRegistration=!0,Z.linkSupport=!0}initialize($,Z){let[J,Y]=this.getRegistration(Z,$.declarationProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J={provideDeclaration:(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{return z.sendRequest(h7.DeclarationRequest.type,z.code2ProtocolConverter.asTextDocumentPositionParams(H,O),N).then((U)=>{if(N.isCancellationRequested)return null;return z.protocol2CodeConverter.asDeclarationResult(U,N)},(U)=>{return z.handleFailedRequest(h7.DeclarationRequest.type,N,U,null)})},j=z.middleware;return j.provideDeclaration?j.provideDeclaration(Y,Q,X,B):B(Y,Q,X)}};return[this.registerProvider(Z,J),J]}registerProvider($,Z){return OH.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}w8.DeclarationFeature=A3});var U3=D((N8)=>{Object.defineProperty(N8,"__esModule",{value:!0});N8.SelectionRangeFeature=void 0;var EH=require("vscode"),k7=Z$(),v7=N$();class E3 extends v7.TextDocumentLanguageFeature{constructor($){super($,k7.SelectionRangeRequest.type)}fillClientCapabilities($){let Z=(0,v7.ensure)((0,v7.ensure)($,"textDocument"),"selectionRange");Z.dynamicRegistration=!0}initialize($,Z){let[J,Y]=this.getRegistration(Z,$.selectionRangeProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J={provideSelectionRanges:(Y,Q,X)=>{let z=this._client,B=async(H,O,N)=>{let U={textDocument:z.code2ProtocolConverter.asTextDocumentIdentifier(H),positions:z.code2ProtocolConverter.asPositionsSync(O,N)};return z.sendRequest(k7.SelectionRangeRequest.type,U,N).then((E)=>{if(N.isCancellationRequested)return null;return z.protocol2CodeConverter.asSelectionRanges(E,N)},(E)=>{return z.handleFailedRequest(k7.SelectionRangeRequest.type,N,E,null)})},j=z.middleware;return j.provideSelectionRanges?j.provideSelectionRanges(Y,Q,X,B):B(Y,Q,X)}};return[this.registerProvider(Z,J),J]}registerProvider($,Z){return EH.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}N8.SelectionRangeFeature=E3});var L3=D((L8)=>{Object.defineProperty(L8,"__esModule",{value:!0});L8.ProgressFeature=void 0;var w3=Z$(),UH=e6();function wH($,Z){if($[Z]===void 0)$[Z]=Object.create(null);return $[Z]}class N3{constructor($){this._client=$,this.activeParts=new Set}getState(){return{kind:"window",id:w3.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities($){wH($,"window").workDoneProgress=!0}initialize(){let $=this._client,Z=(Y)=>{this.activeParts.delete(Y)},J=(Y)=>{this.activeParts.add(new UH.ProgressPart(this._client,Y.token,Z))};$.onRequest(w3.WorkDoneProgressCreateRequest.type,J)}clear(){for(let $ of this.activeParts)$.done();this.activeParts.clear()}}L8.ProgressFeature=N3});var M3=D((F8)=>{Object.defineProperty(F8,"__esModule",{value:!0});F8.CallHierarchyFeature=void 0;var NH=require("vscode"),R9=Z$(),g7=N$();class F3{constructor($){this.client=$,this.middleware=$.middleware}prepareCallHierarchy($,Z,J){let Y=this.client,Q=this.middleware,X=(z,B,j)=>{let H=Y.code2ProtocolConverter.asTextDocumentPositionParams(z,B);return Y.sendRequest(R9.CallHierarchyPrepareRequest.type,H,j).then((O)=>{if(j.isCancellationRequested)return null;return Y.protocol2CodeConverter.asCallHierarchyItems(O,j)},(O)=>{return Y.handleFailedRequest(R9.CallHierarchyPrepareRequest.type,j,O,null)})};return Q.prepareCallHierarchy?Q.prepareCallHierarchy($,Z,J,X):X($,Z,J)}provideCallHierarchyIncomingCalls($,Z){let J=this.client,Y=this.middleware,Q=(X,z)=>{let B={item:J.code2ProtocolConverter.asCallHierarchyItem(X)};return J.sendRequest(R9.CallHierarchyIncomingCallsRequest.type,B,z).then((j)=>{if(z.isCancellationRequested)return null;return J.protocol2CodeConverter.asCallHierarchyIncomingCalls(j,z)},(j)=>{return J.handleFailedRequest(R9.CallHierarchyIncomingCallsRequest.type,z,j,null)})};return Y.provideCallHierarchyIncomingCalls?Y.provideCallHierarchyIncomingCalls($,Z,Q):Q($,Z)}provideCallHierarchyOutgoingCalls($,Z){let J=this.client,Y=this.middleware,Q=(X,z)=>{let B={item:J.code2ProtocolConverter.asCallHierarchyItem(X)};return J.sendRequest(R9.CallHierarchyOutgoingCallsRequest.type,B,z).then((j)=>{if(z.isCancellationRequested)return null;return J.protocol2CodeConverter.asCallHierarchyOutgoingCalls(j,z)},(j)=>{return J.handleFailedRequest(R9.CallHierarchyOutgoingCallsRequest.type,z,j,null)})};return Y.provideCallHierarchyOutgoingCalls?Y.provideCallHierarchyOutgoingCalls($,Z,Q):Q($,Z)}}class P3 extends g7.TextDocumentLanguageFeature{constructor($){super($,R9.CallHierarchyPrepareRequest.type)}fillClientCapabilities($){let Z=$,J=(0,g7.ensure)((0,g7.ensure)(Z,"textDocument"),"callHierarchy");J.dynamicRegistration=!0}initialize($,Z){let[J,Y]=this.getRegistration(Z,$.callHierarchyProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=this._client,J=new F3(Z);return[NH.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector($.documentSelector),J),J]}}F8.CallHierarchyFeature=P3});var T3=D((M8)=>{Object.defineProperty(M8,"__esModule",{value:!0});M8.SemanticTokensFeature=void 0;var P8=require("vscode"),Q$=Z$(),cJ=N$(),LH=XZ();class I3 extends cJ.TextDocumentLanguageFeature{constructor($){super($,Q$.SemanticTokensRegistrationType.type)}fillClientCapabilities($){let Z=(0,cJ.ensure)((0,cJ.ensure)($,"textDocument"),"semanticTokens");Z.dynamicRegistration=!0,Z.tokenTypes=[Q$.SemanticTokenTypes.namespace,Q$.SemanticTokenTypes.type,Q$.SemanticTokenTypes.class,Q$.SemanticTokenTypes.enum,Q$.SemanticTokenTypes.interface,Q$.SemanticTokenTypes.struct,Q$.SemanticTokenTypes.typeParameter,Q$.SemanticTokenTypes.parameter,Q$.SemanticTokenTypes.variable,Q$.SemanticTokenTypes.property,Q$.SemanticTokenTypes.enumMember,Q$.SemanticTokenTypes.event,Q$.SemanticTokenTypes.function,Q$.SemanticTokenTypes.method,Q$.SemanticTokenTypes.macro,Q$.SemanticTokenTypes.keyword,Q$.SemanticTokenTypes.modifier,Q$.SemanticTokenTypes.comment,Q$.SemanticTokenTypes.string,Q$.SemanticTokenTypes.number,Q$.SemanticTokenTypes.regexp,Q$.SemanticTokenTypes.operator,Q$.SemanticTokenTypes.decorator],Z.tokenModifiers=[Q$.SemanticTokenModifiers.declaration,Q$.SemanticTokenModifiers.definition,Q$.SemanticTokenModifiers.readonly,Q$.SemanticTokenModifiers.static,Q$.SemanticTokenModifiers.deprecated,Q$.SemanticTokenModifiers.abstract,Q$.SemanticTokenModifiers.async,Q$.SemanticTokenModifiers.modification,Q$.SemanticTokenModifiers.documentation,Q$.SemanticTokenModifiers.defaultLibrary],Z.formats=[Q$.TokenFormat.Relative],Z.requests={range:!0,full:{delta:!0}},Z.multilineTokenSupport=!1,Z.overlappingTokenSupport=!1,Z.serverCancelSupport=!0,Z.augmentsSyntaxTokens=!0,(0,cJ.ensure)((0,cJ.ensure)($,"workspace"),"semanticTokens").refreshSupport=!0}initialize($,Z){this._client.onRequest(Q$.SemanticTokensRefreshRequest.type,async()=>{for(let X of this.getAllProviders())X.onDidChangeSemanticTokensEmitter.fire()});let[Y,Q]=this.getRegistration(Z,$.semanticTokensProvider);if(!Y||!Q)return;this.register({id:Y,registerOptions:Q})}registerLanguageProvider($){let Z=$.documentSelector,J=LH.boolean($.full)?$.full:$.full!==void 0,Y=$.full!==void 0&&typeof $.full!=="boolean"&&$.full.delta===!0,Q=new P8.EventEmitter,X=J?{onDidChangeSemanticTokens:Q.event,provideDocumentSemanticTokens:(U,E)=>{let T=this._client,C=T.middleware,x=(h,d)=>{let k={textDocument:T.code2ProtocolConverter.asTextDocumentIdentifier(h)};return T.sendRequest(Q$.SemanticTokensRequest.type,k,d).then((V$)=>{if(d.isCancellationRequested)return null;return T.protocol2CodeConverter.asSemanticTokens(V$,d)},(V$)=>{return T.handleFailedRequest(Q$.SemanticTokensRequest.type,d,V$,null)})};return C.provideDocumentSemanticTokens?C.provideDocumentSemanticTokens(U,E,x):x(U,E)},provideDocumentSemanticTokensEdits:Y?(U,E,T)=>{let C=this._client,x=C.middleware,h=(d,k,V$)=>{let e={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(d),previousResultId:k};return C.sendRequest(Q$.SemanticTokensDeltaRequest.type,e,V$).then(async(l)=>{if(V$.isCancellationRequested)return null;if(Q$.SemanticTokens.is(l))return await C.protocol2CodeConverter.asSemanticTokens(l,V$);else return await C.protocol2CodeConverter.asSemanticTokensEdits(l,V$)},(l)=>{return C.handleFailedRequest(Q$.SemanticTokensDeltaRequest.type,V$,l,null)})};return x.provideDocumentSemanticTokensEdits?x.provideDocumentSemanticTokensEdits(U,E,T,h):h(U,E,T)}:void 0}:void 0,B=$.range===!0?{provideDocumentRangeSemanticTokens:(U,E,T)=>{let C=this._client,x=C.middleware,h=(d,k,V$)=>{let e={textDocument:C.code2ProtocolConverter.asTextDocumentIdentifier(d),range:C.code2ProtocolConverter.asRange(k)};return C.sendRequest(Q$.SemanticTokensRangeRequest.type,e,V$).then((l)=>{if(V$.isCancellationRequested)return null;return C.protocol2CodeConverter.asSemanticTokens(l,V$)},(l)=>{return C.handleFailedRequest(Q$.SemanticTokensRangeRequest.type,V$,l,null)})};return x.provideDocumentRangeSemanticTokens?x.provideDocumentRangeSemanticTokens(U,E,T,h):h(U,E,T)}}:void 0,j=[],H=this._client,O=H.protocol2CodeConverter.asSemanticTokensLegend($.legend),N=H.protocol2CodeConverter.asDocumentSelector(Z);if(X!==void 0)j.push(P8.languages.registerDocumentSemanticTokensProvider(N,X,O));if(B!==void 0)j.push(P8.languages.registerDocumentRangeSemanticTokensProvider(N,B,O));return[new P8.Disposable(()=>j.forEach((U)=>U.dispose())),{range:B,full:X,onDidChangeSemanticTokensEmitter:Q}]}}M8.SemanticTokensFeature=I3});var x3=D((l0)=>{Object.defineProperty(l0,"__esModule",{value:!0});l0.WillDeleteFilesFeature=l0.WillRenameFilesFeature=l0.WillCreateFilesFeature=l0.DidDeleteFilesFeature=l0.DidRenameFilesFeature=l0.DidCreateFilesFeature=void 0;var VZ=require("vscode"),FH=iY(),sZ=Z$(),PH=l$();function q3($,Z){if($[Z]===void 0)$[Z]={};return $[Z]}function MH($,Z){return $[Z]}function C3($,Z,J){$[Z]=J}class y9{constructor($,Z,J,Y,Q){this._client=$,this._event=Z,this._registrationType=J,this._clientCapability=Y,this._serverCapability=Q,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities($){let Z=q3(q3($,"workspace"),"fileOperations");C3(Z,"dynamicRegistration",!0),C3(Z,this._clientCapability,!0)}initialize($){let Z=$.workspace?.fileOperations,J=Z!==void 0?MH(Z,this._serverCapability):void 0;if(J?.filters!==void 0)try{this.register({id:PH.generateUuid(),registerOptions:{filters:J.filters}})}catch(Y){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${Y}`)}}register($){if(!this._listener)this._listener=this._event(this.send,this);let Z=$.registerOptions.filters.map((J)=>{let Y=new FH.Minimatch(J.pattern.glob,y9.asMinimatchOptions(J.pattern.options));if(!Y.makeRe())throw Error(`Invalid pattern ${J.pattern.glob}!`);return{scheme:J.scheme,matcher:Y,kind:J.pattern.matches}});this._filters.set($.id,Z)}unregister($){if(this._filters.delete($),this._filters.size===0&&this._listener)this._listener.dispose(),this._listener=void 0}clear(){if(this._filters.clear(),this._listener)this._listener.dispose(),this._listener=void 0}getFileType($){return y9.getFileType($)}async filter($,Z){let J=await Promise.all($.files.map(async(Q)=>{let X=Z(Q),z=X.fsPath.replace(/\\/g,"/");for(let B of this._filters.values())for(let j of B){if(j.scheme!==void 0&&j.scheme!==X.scheme)continue;if(j.matcher.match(z)){if(j.kind===void 0)return!0;let H=await this.getFileType(X);if(H===void 0)return this._client.error(`Failed to determine file type for ${X.toString()}.`),!0;if(H===VZ.FileType.File&&j.kind===sZ.FileOperationPatternKind.file||H===VZ.FileType.Directory&&j.kind===sZ.FileOperationPatternKind.folder)return!0}else if(j.kind===sZ.FileOperationPatternKind.folder){if(await y9.getFileType(X)===VZ.FileType.Directory&&j.matcher.match(`${z}/`))return!0}}return!1})),Y=$.files.filter((Q,X)=>J[X]);return{...$,files:Y}}static async getFileType($){try{return(await VZ.workspace.fs.stat($)).type}catch(Z){return}}static asMinimatchOptions($){let Z={dot:!0};if($?.ignoreCase===!0)Z.nocase=!0;return Z}}class p7 extends y9{constructor($,Z,J,Y,Q,X,z){super($,Z,J,Y,Q);this._notificationType=J,this._accessUri=X,this._createParams=z}async send($){let Z=await this.filter($,this._accessUri);if(Z.files.length){let J=async(Y)=>{return this._client.sendNotification(this._notificationType,this._createParams(Y))};return this.doSend(Z,J)}}}class d7 extends p7{constructor(){super(...arguments);this._fsPathFileTypes=new Map}async getFileType($){let Z=$.fsPath;if(this._fsPathFileTypes.has(Z))return this._fsPathFileTypes.get(Z);let J=await y9.getFileType($);if(J)this._fsPathFileTypes.set(Z,J);return J}async cacheFileTypes($,Z){await this.filter($,Z)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister($){if(super.unregister($),this.filterSize()===0&&this._willListener)this._willListener.dispose(),this._willListener=void 0}clear(){if(super.clear(),this._willListener)this._willListener.dispose(),this._willListener=void 0}}class S3 extends p7{constructor($){super($,VZ.workspace.onDidCreateFiles,sZ.DidCreateFilesNotification.type,"didCreate","didCreate",(Z)=>Z,$.code2ProtocolConverter.asDidCreateFilesParams)}doSend($,Z){let J=this._client.middleware.workspace;return J?.didCreateFiles?J.didCreateFiles($,Z):Z($)}}l0.DidCreateFilesFeature=S3;class D3 extends d7{constructor($){super($,VZ.workspace.onDidRenameFiles,sZ.DidRenameFilesNotification.type,"didRename","didRename",(Z)=>Z.oldUri,$.code2ProtocolConverter.asDidRenameFilesParams)}register($){if(!this._willListener)this._willListener=VZ.workspace.onWillRenameFiles(this.willRename,this);super.register($)}willRename($){$.waitUntil(this.cacheFileTypes($,(Z)=>Z.oldUri))}doSend($,Z){this.clearFileTypeCache();let J=this._client.middleware.workspace;return J?.didRenameFiles?J.didRenameFiles($,Z):Z($)}}l0.DidRenameFilesFeature=D3;class b3 extends d7{constructor($){super($,VZ.workspace.onDidDeleteFiles,sZ.DidDeleteFilesNotification.type,"didDelete","didDelete",(Z)=>Z,$.code2ProtocolConverter.asDidDeleteFilesParams)}register($){if(!this._willListener)this._willListener=VZ.workspace.onWillDeleteFiles(this.willDelete,this);super.register($)}willDelete($){$.waitUntil(this.cacheFileTypes($,(Z)=>Z))}doSend($,Z){this.clearFileTypeCache();let J=this._client.middleware.workspace;return J?.didDeleteFiles?J.didDeleteFiles($,Z):Z($)}}l0.DidDeleteFilesFeature=b3;class I8 extends y9{constructor($,Z,J,Y,Q,X,z){super($,Z,J,Y,Q);this._requestType=J,this._accessUri=X,this._createParams=z}async send($){let Z=this.waitUntil($);$.waitUntil(Z)}async waitUntil($){let Z=await this.filter($,this._accessUri);if(Z.files.length){let J=(Y)=>{return this._client.sendRequest(this._requestType,this._createParams(Y),Y.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit)};return this.doSend(Z,J)}else return}}class R3 extends I8{constructor($){super($,VZ.workspace.onWillCreateFiles,sZ.WillCreateFilesRequest.type,"willCreate","willCreate",(Z)=>Z,$.code2ProtocolConverter.asWillCreateFilesParams)}doSend($,Z){let J=this._client.middleware.workspace;return J?.willCreateFiles?J.willCreateFiles($,Z):Z($)}}l0.WillCreateFilesFeature=R3;class y3 extends I8{constructor($){super($,VZ.workspace.onWillRenameFiles,sZ.WillRenameFilesRequest.type,"willRename","willRename",(Z)=>Z.oldUri,$.code2ProtocolConverter.asWillRenameFilesParams)}doSend($,Z){let J=this._client.middleware.workspace;return J?.willRenameFiles?J.willRenameFiles($,Z):Z($)}}l0.WillRenameFilesFeature=y3;class _3 extends I8{constructor($){super($,VZ.workspace.onWillDeleteFiles,sZ.WillDeleteFilesRequest.type,"willDelete","willDelete",(Z)=>Z,$.code2ProtocolConverter.asWillDeleteFilesParams)}doSend($,Z){let J=this._client.middleware.workspace;return J?.willDeleteFiles?J.willDeleteFiles($,Z):Z($)}}l0.WillDeleteFilesFeature=_3});var f3=D((T8)=>{Object.defineProperty(T8,"__esModule",{value:!0});T8.LinkedEditingFeature=void 0;var IH=require("vscode"),m7=Z$(),u7=N$();class h3 extends u7.TextDocumentLanguageFeature{constructor($){super($,m7.LinkedEditingRangeRequest.type)}fillClientCapabilities($){let Z=(0,u7.ensure)((0,u7.ensure)($,"textDocument"),"linkedEditingRange");Z.dynamicRegistration=!0}initialize($,Z){let[J,Y]=this.getRegistration(Z,$.linkedEditingRangeProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J={provideLinkedEditingRanges:(Y,Q,X)=>{let z=this._client,B=(H,O,N)=>{return z.sendRequest(m7.LinkedEditingRangeRequest.type,z.code2ProtocolConverter.asTextDocumentPositionParams(H,O),N).then((U)=>{if(N.isCancellationRequested)return null;return z.protocol2CodeConverter.asLinkedEditingRanges(U,N)},(U)=>{return z.handleFailedRequest(m7.LinkedEditingRangeRequest.type,N,U,null)})},j=z.middleware;return j.provideLinkedEditingRange?j.provideLinkedEditingRange(Y,Q,X,B):B(Y,Q,X)}};return[this.registerProvider(Z,J),J]}registerProvider($,Z){return IH.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}T8.LinkedEditingFeature=h3});var g3=D((q8)=>{Object.defineProperty(q8,"__esModule",{value:!0});q8.TypeHierarchyFeature=void 0;var TH=require("vscode"),_9=Z$(),l7=N$();class k3{constructor($){this.client=$,this.middleware=$.middleware}prepareTypeHierarchy($,Z,J){let Y=this.client,Q=this.middleware,X=(z,B,j)=>{let H=Y.code2ProtocolConverter.asTextDocumentPositionParams(z,B);return Y.sendRequest(_9.TypeHierarchyPrepareRequest.type,H,j).then((O)=>{if(j.isCancellationRequested)return null;return Y.protocol2CodeConverter.asTypeHierarchyItems(O,j)},(O)=>{return Y.handleFailedRequest(_9.TypeHierarchyPrepareRequest.type,j,O,null)})};return Q.prepareTypeHierarchy?Q.prepareTypeHierarchy($,Z,J,X):X($,Z,J)}provideTypeHierarchySupertypes($,Z){let J=this.client,Y=this.middleware,Q=(X,z)=>{let B={item:J.code2ProtocolConverter.asTypeHierarchyItem(X)};return J.sendRequest(_9.TypeHierarchySupertypesRequest.type,B,z).then((j)=>{if(z.isCancellationRequested)return null;return J.protocol2CodeConverter.asTypeHierarchyItems(j,z)},(j)=>{return J.handleFailedRequest(_9.TypeHierarchySupertypesRequest.type,z,j,null)})};return Y.provideTypeHierarchySupertypes?Y.provideTypeHierarchySupertypes($,Z,Q):Q($,Z)}provideTypeHierarchySubtypes($,Z){let J=this.client,Y=this.middleware,Q=(X,z)=>{let B={item:J.code2ProtocolConverter.asTypeHierarchyItem(X)};return J.sendRequest(_9.TypeHierarchySubtypesRequest.type,B,z).then((j)=>{if(z.isCancellationRequested)return null;return J.protocol2CodeConverter.asTypeHierarchyItems(j,z)},(j)=>{return J.handleFailedRequest(_9.TypeHierarchySubtypesRequest.type,z,j,null)})};return Y.provideTypeHierarchySubtypes?Y.provideTypeHierarchySubtypes($,Z,Q):Q($,Z)}}class v3 extends l7.TextDocumentLanguageFeature{constructor($){super($,_9.TypeHierarchyPrepareRequest.type)}fillClientCapabilities($){let Z=(0,l7.ensure)((0,l7.ensure)($,"textDocument"),"typeHierarchy");Z.dynamicRegistration=!0}initialize($,Z){let[J,Y]=this.getRegistration(Z,$.typeHierarchyProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=this._client,J=new k3(Z);return[TH.languages.registerTypeHierarchyProvider(Z.protocol2CodeConverter.asDocumentSelector($.documentSelector),J),J]}}q8.TypeHierarchyFeature=v3});var m3=D((S8)=>{Object.defineProperty(S8,"__esModule",{value:!0});S8.InlineValueFeature=void 0;var p3=require("vscode"),C8=Z$(),iJ=N$();class d3 extends iJ.TextDocumentLanguageFeature{constructor($){super($,C8.InlineValueRequest.type)}fillClientCapabilities($){(0,iJ.ensure)((0,iJ.ensure)($,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,iJ.ensure)((0,iJ.ensure)($,"workspace"),"inlineValue").refreshSupport=!0}initialize($,Z){this._client.onRequest(C8.InlineValueRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeInlineValues.fire()});let[J,Y]=this.getRegistration(Z,$.inlineValueProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J=new p3.EventEmitter,Y={onDidChangeInlineValues:J.event,provideInlineValues:(Q,X,z,B)=>{let j=this._client,H=(N,U,E,T)=>{let C={textDocument:j.code2ProtocolConverter.asTextDocumentIdentifier(N),range:j.code2ProtocolConverter.asRange(U),context:j.code2ProtocolConverter.asInlineValueContext(E)};return j.sendRequest(C8.InlineValueRequest.type,C,T).then((x)=>{if(T.isCancellationRequested)return null;return j.protocol2CodeConverter.asInlineValues(x,T)},(x)=>{return j.handleFailedRequest(C8.InlineValueRequest.type,T,x,null)})},O=j.middleware;return O.provideInlineValues?O.provideInlineValues(Q,X,z,B,H):H(Q,X,z,B)}};return[this.registerProvider(Z,Y),{provider:Y,onDidChangeInlineValues:J}]}registerProvider($,Z){return p3.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}S8.InlineValueFeature=d3});var c3=D((D8)=>{Object.defineProperty(D8,"__esModule",{value:!0});D8.InlayHintsFeature=void 0;var u3=require("vscode"),HJ=Z$(),nJ=N$();class l3 extends nJ.TextDocumentLanguageFeature{constructor($){super($,HJ.InlayHintRequest.type)}fillClientCapabilities($){let Z=(0,nJ.ensure)((0,nJ.ensure)($,"textDocument"),"inlayHint");Z.dynamicRegistration=!0,Z.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,nJ.ensure)((0,nJ.ensure)($,"workspace"),"inlayHint").refreshSupport=!0}initialize($,Z){this._client.onRequest(HJ.InlayHintRefreshRequest.type,async()=>{for(let Q of this.getAllProviders())Q.onDidChangeInlayHints.fire()});let[J,Y]=this.getRegistration(Z,$.inlayHintProvider);if(!J||!Y)return;this.register({id:J,registerOptions:Y})}registerLanguageProvider($){let Z=$.documentSelector,J=new u3.EventEmitter,Y={onDidChangeInlayHints:J.event,provideInlayHints:(Q,X,z)=>{let B=this._client,j=async(O,N,U)=>{let E={textDocument:B.code2ProtocolConverter.asTextDocumentIdentifier(O),range:B.code2ProtocolConverter.asRange(N)};try{let T=await B.sendRequest(HJ.InlayHintRequest.type,E,U);if(U.isCancellationRequested)return null;return B.protocol2CodeConverter.asInlayHints(T,U)}catch(T){return B.handleFailedRequest(HJ.InlayHintRequest.type,U,T,null)}},H=B.middleware;return H.provideInlayHints?H.provideInlayHints(Q,X,z,j):j(Q,X,z)}};return Y.resolveInlayHint=$.resolveProvider===!0?(Q,X)=>{let z=this._client,B=async(H,O)=>{try{let N=await z.sendRequest(HJ.InlayHintResolveRequest.type,z.code2ProtocolConverter.asInlayHint(H),O);if(O.isCancellationRequested)return null;let U=z.protocol2CodeConverter.asInlayHint(N,O);return O.isCancellationRequested?null:U}catch(N){return z.handleFailedRequest(HJ.InlayHintResolveRequest.type,O,N,null)}},j=z.middleware;return j.resolveInlayHint?j.resolveInlayHint(Q,X,B):B(Q,X)}:void 0,[this.registerProvider(Z,Y),{provider:Y,onDidChangeInlayHints:J}]}registerProvider($,Z){return u3.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector($),Z)}}D8.InlayHintsFeature=l3});var n3=D((b8)=>{Object.defineProperty(b8,"__esModule",{value:!0});b8.InlineCompletionItemFeature=void 0;var qH=require("vscode"),c7=Z$(),i7=N$(),CH=l$();class i3 extends i7.TextDocumentLanguageFeature{constructor($){super($,c7.InlineCompletionRequest.type)}fillClientCapabilities($){let Z=(0,i7.ensure)((0,i7.ensure)($,"textDocument"),"inlineCompletion");Z.dynamicRegistration=!0}initialize($,Z){let J=this.getRegistrationOptions(Z,$.inlineCompletionProvider);if(!J)return;this.register({id:CH.generateUuid(),registerOptions:J})}registerLanguageProvider($){let Z=$.documentSelector,J={provideInlineCompletionItems:(Y,Q,X,z)=>{let B=this._client,j=this._client.middleware,H=(O,N,U,E)=>{return B.sendRequest(c7.InlineCompletionRequest.type,B.code2ProtocolConverter.asInlineCompletionParams(O,N,U),E).then((T)=>{if(E.isCancellationRequested)return null;return B.protocol2CodeConverter.asInlineCompletionResult(T,E)},(T)=>{return B.handleFailedRequest(c7.InlineCompletionRequest.type,E,T,null)})};return j.provideInlineCompletionItems?j.provideInlineCompletionItems(Y,Q,X,z,H):H(Y,Q,X,z)}};return[qH.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(Z),J),J]}}b8.InlineCompletionItemFeature=i3});var r7=D((H0)=>{Object.defineProperty(H0,"__esModule",{value:!0});H0.ProposedFeatures=H0.BaseLanguageClient=H0.MessageTransports=H0.SuspendMode=H0.State=H0.CloseAction=H0.ErrorAction=H0.RevealOutputChannelOn=void 0;var C$=require("vscode"),v=Z$(),SH=N5(),DH=P5(),PZ=XZ(),R8=kY(),a3=l$(),bH=e6(),FZ=N$(),RH=j7(),s3=jB(),r3=HB(),AJ=LB(),yH=PB(),_H=IB(),xH=qB(),hH=DB(),fH=RB(),kH=L7(),vH=hB(),gH=kB(),pH=gB(),dH=mB(),n7=iB(),mH=sB(),uH=oB(),lH=$3(),cH=J3(),iH=Q3(),nH=z3(),aH=B3(),sH=K3(),rH=H3(),oH=O3(),tH=U3(),eH=L3(),$A=M3(),ZA=T3(),OJ=x3(),JA=f3(),YA=g3(),QA=m3(),XA=c3(),zA=n3(),x9;(function($){$[$.Debug=0]="Debug",$[$.Info=1]="Info",$[$.Warn=2]="Warn",$[$.Error=3]="Error",$[$.Never=4]="Never"})(x9||(H0.RevealOutputChannelOn=x9={}));var sJ;(function($){$[$.Continue=1]="Continue",$[$.Shutdown=2]="Shutdown"})(sJ||(H0.ErrorAction=sJ={}));var E9;(function($){$[$.DoNotRestart=1]="DoNotRestart",$[$.Restart=2]="Restart"})(E9||(H0.CloseAction=E9={}));var aJ;(function($){$[$.Stopped=1]="Stopped",$[$.Starting=3]="Starting",$[$.Running=2]="Running"})(aJ||(H0.State=aJ={}));var o3;(function($){$.off="off",$.on="on"})(o3||(H0.SuspendMode=o3={}));var a7;(function($){function Z(J){if(J===void 0||J===null)return!1;if(typeof J==="boolean"||typeof J==="object"&&J!==null&&PZ.stringArray(J.enabledCommands))return J;return!1}$.sanitizeIsTrusted=Z})(a7||(a7={}));class e3{constructor($,Z){this.client=$,this.maxRestartCount=Z,this.restarts=[]}error($,Z,J){if(J&&J<=3)return{action:sJ.Continue};return{action:sJ.Shutdown}}closed(){if(this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount)return{action:E9.Restart};else if(this.restarts[this.restarts.length-1]-this.restarts[0]<=180000)return{action:E9.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`};else return this.restarts.shift(),{action:E9.Restart}}}var K$;(function($){$.Initial="initial",$.Starting="starting",$.StartFailed="startFailed",$.Running="running",$.Stopping="stopping",$.Stopped="stopped"})(K$||(K$={}));var t3;(function($){function Z(J){return J&&v.MessageReader.is(J.reader)&&v.MessageWriter.is(J.writer)}$.is=Z})(t3||(H0.MessageTransports=t3={}));class h9{constructor($,Z,J){this._traceFormat=v.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new R8.Semaphore(1),this._id=$,this._name=Z,J=J||{};let Y={isTrusted:!1,supportHtml:!1};if(J.markdown!==void 0)Y.isTrusted=a7.sanitizeIsTrusted(J.markdown.isTrusted),Y.supportHtml=J.markdown.supportHtml===!0;if(this._clientOptions={documentSelector:J.documentSelector??[],synchronize:J.synchronize??{},diagnosticCollectionName:J.diagnosticCollectionName,outputChannelName:J.outputChannelName??this._name,revealOutputChannelOn:J.revealOutputChannelOn??x9.Error,stdioEncoding:J.stdioEncoding??"utf8",initializationOptions:J.initializationOptions,initializationFailedHandler:J.initializationFailedHandler,progressOnInitialization:!!J.progressOnInitialization,errorHandler:J.errorHandler??this.createDefaultErrorHandler(J.connectionOptions?.maxRestartCount),middleware:J.middleware??{},uriConverters:J.uriConverters,workspaceFolder:J.workspaceFolder,connectionOptions:J.connectionOptions,markdown:Y,diagnosticPullOptions:J.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:J.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=K$.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,J.outputChannel)this._outputChannel=J.outputChannel,this._disposeOutputChannel=!1;else this._outputChannel=void 0,this._disposeOutputChannel=!0;this._traceOutputChannel=J.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new R8.Semaphore(1),this._pendingChangeDelayer=new R8.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new R8.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new v.Emitter,this._stateChangeEmitter=new v.Emitter,this._trace=v.Trace.Off,this._tracer={log:(Q,X)=>{if(PZ.string(Q))this.logTrace(Q,X);else this.logObjectTrace(Q)}},this._c2p=SH.createConverter(J.uriConverters?J.uriConverters.code2Protocol:void 0),this._p2c=DH.createConverter(J.uriConverters?J.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){if(!this._outputChannel)this._outputChannel=C$.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name);return this._outputChannel}get traceOutputChannel(){if(this._traceOutputChannel)return this._traceOutputChannel;return this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state($){let Z=this.getPublicState();this._state=$;let J=this.getPublicState();if(J!==Z)this._stateChangeEmitter.fire({oldState:Z,newState:J})}getPublicState(){switch(this.$state){case K$.Starting:return aJ.Starting;case K$.Running:return aJ.Running;default:return aJ.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest($,...Z){if(this.$state===K$.StartFailed||this.$state===K$.Stopping||this.$state===K$.Stopped)return Promise.reject(new v.ResponseError(v.ErrorCodes.ConnectionInactive,"Client is not running"));let J=await this.$start();if(this._didChangeTextDocumentFeature.syncKind===v.TextDocumentSyncKind.Full)await this.sendPendingFullTextDocumentChanges(J);let Y=this._clientOptions.middleware?.sendRequest;if(Y!==void 0){let Q=void 0,X=void 0;if(Z.length===1)if(v.CancellationToken.is(Z[0]))X=Z[0];else Q=Z[0];else if(Z.length===2)Q=Z[0],X=Z[1];return Y($,Q,X,(z,B,j)=>{let H=[];if(B!==void 0)H.push(B);if(j!==void 0)H.push(j);return J.sendRequest(z,...H)})}else return J.sendRequest($,...Z)}onRequest($,Z){let J=typeof $==="string"?$:$.method;this._requestHandlers.set(J,Z);let Y=this.activeConnection(),Q;if(Y!==void 0)this._requestDisposables.set(J,Y.onRequest($,Z)),Q={dispose:()=>{let X=this._requestDisposables.get(J);if(X!==void 0)X.dispose(),this._requestDisposables.delete(J)}};else this._pendingRequestHandlers.set(J,Z),Q={dispose:()=>{this._pendingRequestHandlers.delete(J);let X=this._requestDisposables.get(J);if(X!==void 0)X.dispose(),this._requestDisposables.delete(J)}};return{dispose:()=>{this._requestHandlers.delete(J),Q.dispose()}}}async sendNotification($,Z){if(this.$state===K$.StartFailed||this.$state===K$.Stopping||this.$state===K$.Stopped)return Promise.reject(new v.ResponseError(v.ErrorCodes.ConnectionInactive,"Client is not running"));let J=this._didChangeTextDocumentFeature.syncKind===v.TextDocumentSyncKind.Full,Y;if(J&&typeof $!=="string"&&$.method===v.DidOpenTextDocumentNotification.method)Y=Z?.textDocument.uri,this._pendingOpenNotifications.add(Y);let Q=await this.$start();if(J)await this.sendPendingFullTextDocumentChanges(Q);if(Y!==void 0)this._pendingOpenNotifications.delete(Y);let X=this._clientOptions.middleware?.sendNotification;return X?X($,Q.sendNotification.bind(Q),Z):Q.sendNotification($,Z)}onNotification($,Z){let J=typeof $==="string"?$:$.method;this._notificationHandlers.set(J,Z);let Y=this.activeConnection(),Q;if(Y!==void 0)this._notificationDisposables.set(J,Y.onNotification($,Z)),Q={dispose:()=>{let X=this._notificationDisposables.get(J);if(X!==void 0)X.dispose(),this._notificationDisposables.delete(J)}};else this._pendingNotificationHandlers.set(J,Z),Q={dispose:()=>{this._pendingNotificationHandlers.delete(J);let X=this._notificationDisposables.get(J);if(X!==void 0)X.dispose(),this._notificationDisposables.delete(J)}};return{dispose:()=>{this._notificationHandlers.delete(J),Q.dispose()}}}async sendProgress($,Z,J){if(this.$state===K$.StartFailed||this.$state===K$.Stopping||this.$state===K$.Stopped)return Promise.reject(new v.ResponseError(v.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress($,Z,J)}catch(Y){throw this.error(`Sending progress for token ${Z} failed.`,Y),Y}}onProgress($,Z,J){this._progressHandlers.set(Z,{type:$,handler:J});let Y=this.activeConnection(),Q,X=this._clientOptions.middleware?.handleWorkDoneProgress,z=v.WorkDoneProgress.is($)&&X!==void 0?(B)=>{X(Z,B,()=>J(B))}:J;if(Y!==void 0)this._progressDisposables.set(Z,Y.onProgress($,Z,z)),Q={dispose:()=>{let B=this._progressDisposables.get(Z);if(B!==void 0)B.dispose(),this._progressDisposables.delete(Z)}};else this._pendingProgressHandlers.set(Z,{type:$,handler:J}),Q={dispose:()=>{this._pendingProgressHandlers.delete(Z);let B=this._progressDisposables.get(Z);if(B!==void 0)B.dispose(),this._progressDisposables.delete(Z)}};return{dispose:()=>{this._progressHandlers.delete(Z),Q.dispose()}}}createDefaultErrorHandler($){if($!==void 0&&$<0)throw Error(`Invalid maxRestartCount: ${$}`);return new e3(this,$??4)}async setTrace($){this._trace=$;let Z=this.activeConnection();if(Z!==void 0)await Z.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String($){if($ instanceof v.ResponseError){let Z=$;return`  Message: ${Z.message}
  Code: ${Z.code} ${Z.data?`
`+Z.data.toString():""}`}if($ instanceof Error){if(PZ.string($.stack))return $.stack;return $.message}if(PZ.string($))return $;return $.toString()}debug($,Z,J=!0){this.logOutputMessage(v.MessageType.Debug,x9.Debug,"Debug",$,Z,J)}info($,Z,J=!0){this.logOutputMessage(v.MessageType.Info,x9.Info,"Info",$,Z,J)}warn($,Z,J=!0){this.logOutputMessage(v.MessageType.Warning,x9.Warn,"Warn",$,Z,J)}error($,Z,J=!0){this.logOutputMessage(v.MessageType.Error,x9.Error,"Error",$,Z,J)}logOutputMessage($,Z,J,Y,Q,X){if(this.outputChannel.appendLine(`[${J.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${Y}`),Q!==null&&Q!==void 0)this.outputChannel.appendLine(this.data2String(Q));if(X==="force"||X&&this._clientOptions.revealOutputChannelOn<=Z)this.showNotificationMessage($,Y)}showNotificationMessage($,Z){Z=Z??"A request has failed. See the output for more information.",($===v.MessageType.Error?C$.window.showErrorMessage:$===v.MessageType.Warning?C$.window.showWarningMessage:C$.window.showInformationMessage)(Z,"Go to output").then((Y)=>{if(Y!==void 0)this.outputChannel.show(!0)})}logTrace($,Z){if(this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${$}`),Z)this.traceOutputChannel.appendLine(this.data2String(Z))}logObjectTrace($){if($.isLSPMessage&&$.type)this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `);else this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `);if($)this.traceOutputChannel.appendLine(`${JSON.stringify($)}`)}needsStart(){return this.$state===K$.Initial||this.$state===K$.Stopping||this.$state===K$.Stopped}needsStop(){return this.$state===K$.Starting||this.$state===K$.Running}activeConnection(){return this.$state===K$.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===K$.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw Error("Client got disposed and can't be restarted.");if(this.$state===K$.Stopping)throw Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[$,Z,J]=this.createOnStartPromise();if(this._onStart=$,this._diagnostics===void 0)this._diagnostics=this._clientOptions.diagnosticCollectionName?C$.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):C$.languages.createDiagnosticCollection();for(let[Y,Q]of this._notificationHandlers)if(!this._pendingNotificationHandlers.has(Y))this._pendingNotificationHandlers.set(Y,Q);for(let[Y,Q]of this._requestHandlers)if(!this._pendingRequestHandlers.has(Y))this._pendingRequestHandlers.set(Y,Q);for(let[Y,Q]of this._progressHandlers)if(!this._pendingProgressHandlers.has(Y))this._pendingProgressHandlers.set(Y,Q);this.$state=K$.Starting;try{let Y=await this.createConnection();Y.onNotification(v.LogMessageNotification.type,(Q)=>{switch(Q.type){case v.MessageType.Error:this.error(Q.message,void 0,!1);break;case v.MessageType.Warning:this.warn(Q.message,void 0,!1);break;case v.MessageType.Info:this.info(Q.message,void 0,!1);break;case v.MessageType.Debug:this.debug(Q.message,void 0,!1);break;default:this.outputChannel.appendLine(Q.message)}}),Y.onNotification(v.ShowMessageNotification.type,(Q)=>{switch(Q.type){case v.MessageType.Error:C$.window.showErrorMessage(Q.message);break;case v.MessageType.Warning:C$.window.showWarningMessage(Q.message);break;case v.MessageType.Info:C$.window.showInformationMessage(Q.message);break;default:C$.window.showInformationMessage(Q.message)}}),Y.onRequest(v.ShowMessageRequest.type,(Q)=>{let X;switch(Q.type){case v.MessageType.Error:X=C$.window.showErrorMessage;break;case v.MessageType.Warning:X=C$.window.showWarningMessage;break;case v.MessageType.Info:X=C$.window.showInformationMessage;break;default:X=C$.window.showInformationMessage}let z=Q.actions||[];return X(Q.message,...z)}),Y.onNotification(v.TelemetryEventNotification.type,(Q)=>{this._telemetryEmitter.fire(Q)}),Y.onRequest(v.ShowDocumentRequest.type,async(Q)=>{let X=async(B)=>{let j=this.protocol2CodeConverter.asUri(B.uri);try{if(B.external===!0)return{success:await C$.env.openExternal(j)};else{let H={};if(B.selection!==void 0)H.selection=this.protocol2CodeConverter.asRange(B.selection);if(B.takeFocus===void 0||B.takeFocus===!1)H.preserveFocus=!0;else if(B.takeFocus===!0)H.preserveFocus=!1;return await C$.window.showTextDocument(j,H),{success:!0}}}catch(H){return{success:!1}}},z=this._clientOptions.middleware.window?.showDocument;if(z!==void 0)return z(Q,X);else return X(Q)}),Y.listen(),await this.initialize(Y),Z()}catch(Y){this.$state=K$.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,Y,"force"),J(Y)}return this._onStart}createOnStartPromise(){let $,Z;return[new Promise((Y,Q)=>{$=Y,Z=Q}),$,Z]}async initialize($){this.refreshTrace($,!1);let Z=this._clientOptions.initializationOptions,[J,Y]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],Q={processId:null,clientInfo:{name:C$.env.appName,version:C$.version},locale:this.getLocale(),rootPath:J?J:null,rootUri:J?this._c2p.asUri(C$.Uri.file(J)):null,capabilities:this.computeClientCapabilities(),initializationOptions:PZ.func(Z)?Z():Z,trace:v.Trace.toString(this._trace),workspaceFolders:Y};if(this.fillInitializeParams(Q),this._clientOptions.progressOnInitialization){let X=a3.generateUuid(),z=new bH.ProgressPart($,X);Q.workDoneToken=X;try{let B=await this.doInitialize($,Q);return z.done(),B}catch(B){throw z.cancel(),B}}else return this.doInitialize($,Q)}async doInitialize($,Z){try{let J=await $.initialize(Z);if(J.capabilities.positionEncoding!==void 0&&J.capabilities.positionEncoding!==v.PositionEncodingKind.UTF16)throw Error(`Unsupported position encoding (${J.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=J,this.$state=K$.Running;let Y=void 0;if(PZ.number(J.capabilities.textDocumentSync))if(J.capabilities.textDocumentSync===v.TextDocumentSyncKind.None)Y={openClose:!1,change:v.TextDocumentSyncKind.None,save:void 0};else Y={openClose:!0,change:J.capabilities.textDocumentSync,save:{includeText:!1}};else if(J.capabilities.textDocumentSync!==void 0&&J.capabilities.textDocumentSync!==null)Y=J.capabilities.textDocumentSync;this._capabilities=Object.assign({},J.capabilities,{resolvedTextDocumentSync:Y}),$.onNotification(v.PublishDiagnosticsNotification.type,(Q)=>this.handleDiagnostics(Q)),$.onRequest(v.RegistrationRequest.type,(Q)=>this.handleRegistrationRequest(Q)),$.onRequest("client/registerFeature",(Q)=>this.handleRegistrationRequest(Q)),$.onRequest(v.UnregistrationRequest.type,(Q)=>this.handleUnregistrationRequest(Q)),$.onRequest("client/unregisterFeature",(Q)=>this.handleUnregistrationRequest(Q)),$.onRequest(v.ApplyWorkspaceEditRequest.type,(Q)=>this.handleApplyWorkspaceEdit(Q));for(let[Q,X]of this._pendingNotificationHandlers)this._notificationDisposables.set(Q,$.onNotification(Q,X));this._pendingNotificationHandlers.clear();for(let[Q,X]of this._pendingRequestHandlers)this._requestDisposables.set(Q,$.onRequest(Q,X));this._pendingRequestHandlers.clear();for(let[Q,X]of this._pendingProgressHandlers)this._progressDisposables.set(Q,$.onProgress(X.type,Q,X.handler));return this._pendingProgressHandlers.clear(),await $.sendNotification(v.InitializedNotification.type,{}),this.hookFileEvents($),this.hookConfigurationChanged($),this.initializeFeatures($),J}catch(J){if(this._clientOptions.initializationFailedHandler)if(this._clientOptions.initializationFailedHandler(J))this.initialize($);else this.stop();else if(J instanceof v.ResponseError&&J.data&&J.data.retry)C$.window.showErrorMessage(J.message,{title:"Retry",id:"retry"}).then((Y)=>{if(Y&&Y.id==="retry")this.initialize($);else this.stop()});else{if(J&&J.message)C$.window.showErrorMessage(J.message);this.error("Server initialization failed.",J),this.stop()}throw J}}_clientGetRootPath(){let $=C$.workspace.workspaceFolders;if(!$||$.length===0)return;let Z=$[0];if(Z.uri.scheme==="file")return Z.uri.fsPath;return}stop($=2000){return this.shutdown("stop",$)}dispose($=2000){try{return this._disposed="disposing",this.stop($)}finally{this._disposed="disposed"}}async shutdown($,Z){if(this.$state===K$.Stopped||this.$state===K$.Initial)return;if(this.$state===K$.Stopping)if(this._onStop!==void 0)return this._onStop;else throw Error("Client is stopping but no stop promise available.");let J=this.activeConnection();if(J===void 0||this.$state!==K$.Running)throw Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=K$.Stopping,this.cleanUp($);let Y=new Promise((X)=>{(0,v.RAL)().timer.setTimeout(X,Z)}),Q=(async(X)=>{return await X.shutdown(),await X.exit(),X})(J);return this._onStop=Promise.race([Y,Q]).then((X)=>{if(X!==void 0)X.end(),X.dispose();else throw this.error("Stopping server timed out",void 0,!1),Error("Stopping the server timed out")},(X)=>{throw this.error("Stopping server failed",X,!1),X}).finally(()=>{this.$state=K$.Stopped,$==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp($){this._fileEvents=[],this._fileEventDelayer.cancel();let Z=this._listeners.splice(0,this._listeners.length);for(let J of Z)J.dispose();if(this._syncedDocuments)this._syncedDocuments.clear();for(let J of Array.from(this._features.entries()).map((Y)=>Y[1]).reverse())J.clear();if($==="stop"&&this._diagnostics!==void 0)this._diagnostics.dispose(),this._diagnostics=void 0;if(this._idleInterval!==void 0)this._idleInterval.dispose(),this._idleInterval=void 0}cleanUpChannel(){if(this._outputChannel!==void 0&&this._disposeOutputChannel)this._outputChannel.dispose(),this._outputChannel=void 0}notifyFileEvent($){let Z=this;async function J(Q){return Z._fileEvents.push(Q),Z._fileEventDelayer.trigger(async()=>{await Z.sendNotification(v.DidChangeWatchedFilesNotification.type,{changes:Z._fileEvents}),Z._fileEvents=[]})}let Y=this.clientOptions.middleware?.workspace;((Y?.didChangeWatchedFile)?Y.didChangeWatchedFile($,J):J($)).catch((Q)=>{Z.error("Notify file events failed.",Q)})}async sendPendingFullTextDocumentChanges($){return this._pendingChangeSemaphore.lock(async()=>{try{let Z=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(Z.length===0)return;for(let J of Z){let Y=this.code2ProtocolConverter.asChangeTextDocumentParams(J);await $.sendNotification(v.DidChangeTextDocumentNotification.type,Y),this._didChangeTextDocumentFeature.notificationSent(J,v.DidChangeTextDocumentNotification.type,Y)}}catch(Z){throw this.error("Sending pending changes failed",Z,!1),Z}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let $=this.activeConnection();if($===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges($)}).catch(($)=>this.error("Delivering pending changes failed",$,!1))}handleDiagnostics($){if(!this._diagnostics)return;let Z=$.uri;if(this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===Z)this._diagnosticQueueState.tokenSource.cancel();this._diagnosticQueue.set($.uri,$.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,v.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let $=this._diagnosticQueue.entries().next();if($.done===!0)return;let[Z,J]=$.value;this._diagnosticQueue.delete(Z);let Y=new C$.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:Z,tokenSource:Y},this._p2c.asDiagnostics(J,Y.token).then((Q)=>{if(!Y.token.isCancellationRequested){let X=this._p2c.asUri(Z),z=this.clientOptions.middleware;if(z.handleDiagnostics)z.handleDiagnostics(X,Q,(B,j)=>this.setDiagnostics(B,j));else this.setDiagnostics(X,Q)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics($,Z){if(!this._diagnostics)return;this._diagnostics.set($,Z)}getLocale(){return C$.env.language}async $start(){if(this.$state===K$.StartFailed)throw Error("Previous start failed. Can't restart server.");await this.start();let $=this.activeConnection();if($===void 0)throw Error("Starting server failed");return $}async createConnection(){let $=(Y,Q,X)=>{this.handleConnectionError(Y,Q,X).catch((z)=>this.error("Handling connection error failed",z))},Z=()=>{this.handleConnectionClosed().catch((Y)=>this.error("Handling connection close failed",Y))},J=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=GA(J.reader,J.writer,$,Z,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===K$.Stopped)return;try{if(this._connection!==void 0)this._connection.dispose()}catch(Z){}let $={action:E9.DoNotRestart};if(this.$state!==K$.Stopping)try{$=await this._clientOptions.errorHandler.closed()}catch(Z){}if(this._connection=void 0,$.action===E9.DoNotRestart){if(this.error($.message??"Connection to server got closed. Server will not be restarted.",void 0,$.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===K$.Starting)this.$state=K$.StartFailed;else this.$state=K$.Stopped;this._onStop=Promise.resolve(),this._onStart=void 0}else if($.action===E9.Restart)this.info($.message??"Connection to server got closed. Server will restart.",!$.handled),this.cleanUp("restart"),this.$state=K$.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch((Z)=>this.error("Restarting server failed",Z,"force"))}async handleConnectionError($,Z,J){let Y=await this._clientOptions.errorHandler.error($,Z,J);if(Y.action===sJ.Shutdown)this.error(Y.message??`Client ${this._name}: connection to server is erroring.
${$.message}
Shutting down server.`,void 0,Y.handled===!0?!1:"force"),this.stop().catch((Q)=>{this.error("Stopping server failed",Q,!1)});else this.error(Y.message??`Client ${this._name}: connection to server is erroring.
${$.message}`,void 0,Y.handled===!0?!1:"force")}hookConfigurationChanged($){this._listeners.push(C$.workspace.onDidChangeConfiguration(()=>{this.refreshTrace($,!0)}))}refreshTrace($,Z=!1){let J=C$.workspace.getConfiguration(this._id),Y=v.Trace.Off,Q=v.TraceFormat.Text;if(J){let X=J.get("trace.server","off");if(typeof X==="string")Y=v.Trace.fromString(X);else Y=v.Trace.fromString(J.get("trace.server.verbosity","off")),Q=v.TraceFormat.fromString(J.get("trace.server.format","text"))}this._trace=Y,this._traceFormat=Q,$.trace(this._trace,this._tracer,{sendNotification:Z,traceFormat:this._traceFormat}).catch((X)=>{this.error("Updating trace failed with error",X,!1)})}hookFileEvents($){let Z=this._clientOptions.synchronize.fileEvents;if(!Z)return;let J;if(PZ.array(Z))J=Z;else J=[Z];if(!J)return;this._dynamicFeatures.get(v.DidChangeWatchedFilesNotification.type.method).registerRaw(a3.generateUuid(),J)}registerFeatures($){for(let Z of $)this.registerFeature(Z)}registerFeature($){if(this._features.push($),FZ.DynamicFeature.is($)){let Z=$.registrationType;this._dynamicFeatures.set(Z.method,$)}}getFeature($){return this._dynamicFeatures.get($)}hasDedicatedTextSynchronizationFeature($){let Z=this.getFeature(v.NotebookDocumentSyncRegistrationType.method);if(Z===void 0||!(Z instanceof s3.NotebookDocumentSyncFeature))return!1;return Z.handles($)}registerBuiltinFeatures(){let $=new Map;if(this.registerFeature(new r3.ConfigurationFeature(this)),this.registerFeature(new AJ.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new AJ.DidChangeTextDocumentFeature(this,$),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new AJ.WillSaveFeature(this)),this.registerFeature(new AJ.WillSaveWaitUntilFeature(this)),this.registerFeature(new AJ.DidSaveTextDocumentFeature(this)),this.registerFeature(new AJ.DidCloseTextDocumentFeature(this,this._syncedDocuments,$)),this.registerFeature(new cH.FileSystemWatcherFeature(this,(Z)=>this.notifyFileEvent(Z))),this.registerFeature(new yH.CompletionItemFeature(this)),this.registerFeature(new _H.HoverFeature(this)),this.registerFeature(new hH.SignatureHelpFeature(this)),this.registerFeature(new xH.DefinitionFeature(this)),this.registerFeature(new gH.ReferencesFeature(this)),this.registerFeature(new fH.DocumentHighlightFeature(this)),this.registerFeature(new kH.DocumentSymbolFeature(this)),this.registerFeature(new vH.WorkspaceSymbolFeature(this)),this.registerFeature(new pH.CodeActionFeature(this)),this.registerFeature(new dH.CodeLensFeature(this)),this.registerFeature(new n7.DocumentFormattingFeature(this)),this.registerFeature(new n7.DocumentRangeFormattingFeature(this)),this.registerFeature(new n7.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new mH.RenameFeature(this)),this.registerFeature(new uH.DocumentLinkFeature(this)),this.registerFeature(new lH.ExecuteCommandFeature(this)),this.registerFeature(new r3.SyncConfigurationFeature(this)),this.registerFeature(new aH.TypeDefinitionFeature(this)),this.registerFeature(new nH.ImplementationFeature(this)),this.registerFeature(new iH.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0)this.registerFeature(new sH.WorkspaceFoldersFeature(this));this.registerFeature(new rH.FoldingRangeFeature(this)),this.registerFeature(new oH.DeclarationFeature(this)),this.registerFeature(new tH.SelectionRangeFeature(this)),this.registerFeature(new eH.ProgressFeature(this)),this.registerFeature(new $A.CallHierarchyFeature(this)),this.registerFeature(new ZA.SemanticTokensFeature(this)),this.registerFeature(new JA.LinkedEditingFeature(this)),this.registerFeature(new OJ.DidCreateFilesFeature(this)),this.registerFeature(new OJ.DidRenameFilesFeature(this)),this.registerFeature(new OJ.DidDeleteFilesFeature(this)),this.registerFeature(new OJ.WillCreateFilesFeature(this)),this.registerFeature(new OJ.WillRenameFilesFeature(this)),this.registerFeature(new OJ.WillDeleteFilesFeature(this)),this.registerFeature(new YA.TypeHierarchyFeature(this)),this.registerFeature(new QA.InlineValueFeature(this)),this.registerFeature(new XA.InlayHintsFeature(this)),this.registerFeature(new RH.DiagnosticFeature(this)),this.registerFeature(new s3.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(s7.createAll(this))}fillInitializeParams($){for(let Z of this._features)if(PZ.func(Z.fillInitializeParams))Z.fillInitializeParams($)}computeClientCapabilities(){let $={};(0,FZ.ensure)($,"workspace").applyEdit=!0;let Z=(0,FZ.ensure)((0,FZ.ensure)($,"workspace"),"workspaceEdit");Z.documentChanges=!0,Z.resourceOperations=[v.ResourceOperationKind.Create,v.ResourceOperationKind.Rename,v.ResourceOperationKind.Delete],Z.failureHandling=v.FailureHandlingKind.TextOnlyTransactional,Z.normalizesLineEndings=!0,Z.changeAnnotationSupport={groupsOnLabel:!0};let J=(0,FZ.ensure)((0,FZ.ensure)($,"textDocument"),"publishDiagnostics");J.relatedInformation=!0,J.versionSupport=!1,J.tagSupport={valueSet:[v.DiagnosticTag.Unnecessary,v.DiagnosticTag.Deprecated]},J.codeDescriptionSupport=!0,J.dataSupport=!0;let Y=(0,FZ.ensure)($,"window"),Q=(0,FZ.ensure)(Y,"showMessage");Q.messageActionItem={additionalPropertiesSupport:!0};let X=(0,FZ.ensure)(Y,"showDocument");X.support=!0;let z=(0,FZ.ensure)($,"general");if(z.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(h9.RequestsToCancelOnContentModified)},z.regularExpressions={engine:"ECMAScript",version:"ES2020"},z.markdown={parser:"marked",version:"1.1.0"},z.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml)z.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"];for(let B of this._features)B.fillClientCapabilities($);return $}initializeFeatures($){let Z=this._clientOptions.documentSelector;for(let J of this._features)if(PZ.func(J.preInitialize))J.preInitialize(this._capabilities,Z);for(let J of this._features)J.initialize(this._capabilities,Z)}async handleRegistrationRequest($){let Z=this.clientOptions.middleware?.handleRegisterCapability;if(Z)return Z($,(J)=>this.doRegisterCapability(J));else return this.doRegisterCapability($)}async doRegisterCapability($){if(!this.isRunning()){for(let Z of $.registrations)this._ignoredRegistrations.add(Z.id);return}for(let Z of $.registrations){let J=this._dynamicFeatures.get(Z.method);if(J===void 0)return Promise.reject(Error(`No feature implementation for ${Z.method} found. Registration failed.`));let Y=Z.registerOptions??{};Y.documentSelector=Y.documentSelector??this._clientOptions.documentSelector;let Q={id:Z.id,registerOptions:Y};try{J.register(Q)}catch(X){return Promise.reject(X)}}}async handleUnregistrationRequest($){let Z=this.clientOptions.middleware?.handleUnregisterCapability;if(Z)return Z($,(J)=>this.doUnregisterCapability(J));else return this.doUnregisterCapability($)}async doUnregisterCapability($){for(let Z of $.unregisterations){if(this._ignoredRegistrations.has(Z.id))continue;let J=this._dynamicFeatures.get(Z.method);if(!J)return Promise.reject(Error(`No feature implementation for ${Z.method} found. Unregistration failed.`));J.unregister(Z.id)}}async handleApplyWorkspaceEdit($){let Z=$.edit,J=await this.workspaceEditLock.lock(()=>{return this._p2c.asWorkspaceEdit(Z)}),Y=new Map;C$.workspace.textDocuments.forEach((X)=>Y.set(X.uri.toString(),X));let Q=!1;if(Z.documentChanges){for(let X of Z.documentChanges)if(v.TextDocumentEdit.is(X)&&X.textDocument.version&&X.textDocument.version>=0){let z=this._p2c.asUri(X.textDocument.uri).toString(),B=Y.get(z);if(B&&B.version!==X.textDocument.version){Q=!0;break}}}if(Q)return Promise.resolve({applied:!1});return PZ.asPromise(C$.workspace.applyEdit(J).then((X)=>{return{applied:X}}))}handleFailedRequest($,Z,J,Y,Q=!0){if(J instanceof v.ResponseError){if(J.code===v.ErrorCodes.PendingResponseRejected||J.code===v.ErrorCodes.ConnectionInactive)return Y;if(J.code===v.LSPErrorCodes.RequestCancelled||J.code===v.LSPErrorCodes.ServerCancelled)if(Z!==void 0&&Z.isCancellationRequested)return Y;else if(J.data!==void 0)throw new FZ.LSPCancellationError(J.data);else throw new C$.CancellationError;else if(J.code===v.LSPErrorCodes.ContentModified)if(h9.RequestsToCancelOnContentModified.has($.method)||h9.CancellableResolveCalls.has($.method))throw new C$.CancellationError;else return Y}throw this.error(`Request ${$.method} failed.`,J,Q),J}}H0.BaseLanguageClient=h9;h9.RequestsToCancelOnContentModified=new Set([v.SemanticTokensRequest.method,v.SemanticTokensRangeRequest.method,v.SemanticTokensDeltaRequest.method]);h9.CancellableResolveCalls=new Set([v.CompletionResolveRequest.method,v.CodeLensResolveRequest.method,v.CodeActionResolveRequest.method,v.InlayHintResolveRequest.method,v.DocumentLinkResolveRequest.method,v.WorkspaceSymbolResolveRequest.method]);class $j{error($){(0,v.RAL)().console.error($)}warn($){(0,v.RAL)().console.warn($)}info($){(0,v.RAL)().console.info($)}log($){(0,v.RAL)().console.log($)}}function GA($,Z,J,Y,Q){let X=new $j,z=(0,v.createProtocolConnection)($,Z,X,Q);return z.onError((j)=>{J(j[0],j[1],j[2])}),z.onClose(Y),{listen:()=>z.listen(),sendRequest:z.sendRequest,onRequest:z.onRequest,hasPendingResponse:z.hasPendingResponse,sendNotification:z.sendNotification,onNotification:z.onNotification,onProgress:z.onProgress,sendProgress:z.sendProgress,trace:(j,H,O)=>{let N={sendNotification:!1,traceFormat:v.TraceFormat.Text};if(O===void 0)return z.trace(j,H,N);else if(PZ.boolean(O))return z.trace(j,H,O);else return z.trace(j,H,O)},initialize:(j)=>{return z.sendRequest(v.InitializeRequest.type,j)},shutdown:()=>{return z.sendRequest(v.ShutdownRequest.type,void 0)},exit:()=>{return z.sendNotification(v.ExitNotification.type)},end:()=>z.end(),dispose:()=>z.dispose()}}var s7;(function($){function Z(J){return[new zA.InlineCompletionItemFeature(J)]}$.createAll=Z})(s7||(H0.ProposedFeatures=s7={}))});var Jj=D((y8)=>{var __dirname="/Users/chrisbreuer/Code/home/node_modules/.bun/vscode-languageclient@9.0.1/node_modules/vscode-languageclient/lib/node";Object.defineProperty(y8,"__esModule",{value:!0});y8.terminate=void 0;var Zj=require("child_process"),BA=require("path"),jA=process.platform==="win32",KA=process.platform==="darwin",VA=process.platform==="linux";function WA($,Z){if(jA)try{let Q={stdio:["pipe","pipe","ignore"]};if(Z)Q.cwd=Z;return Zj.execFileSync("taskkill",["/T","/F","/PID",$.pid.toString()],Q),!0}catch(Q){return!1}else if(VA||KA)try{var J=(0,BA.join)(__dirname,"terminateProcess.sh"),Y=Zj.spawnSync(J,[$.pid.toString()]);return Y.error?!1:!0}catch(Q){return!1}else return $.kill("SIGKILL"),!0}y8.terminate=WA});var o7=D((SE,Yj)=>{Yj.exports=Z$()});var rJ=D((DE,Qj)=>{var HA=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...$)=>console.error("SEMVER",...$):()=>{};Qj.exports=HA});var _8=D((bE,Xj)=>{var AA=Number.MAX_SAFE_INTEGER||9007199254740991,OA=["major","premajor","minor","preminor","patch","prepatch","prerelease"];Xj.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:AA,RELEASE_TYPES:OA,SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var x8=D((vZ,zj)=>{var{MAX_SAFE_COMPONENT_LENGTH:t7,MAX_SAFE_BUILD_LENGTH:EA,MAX_LENGTH:UA}=_8(),wA=rJ();vZ=zj.exports={};var NA=vZ.re=[],LA=vZ.safeRe=[],c=vZ.src=[],FA=vZ.safeSrc=[],i=vZ.t={},PA=0,e7="[a-zA-Z0-9-]",MA=[["\\s",1],["\\d",UA],[e7,EA]],IA=($)=>{for(let[Z,J]of MA)$=$.split(`${Z}*`).join(`${Z}{0,${J}}`).split(`${Z}+`).join(`${Z}{1,${J}}`);return $},X$=($,Z,J)=>{let Y=IA(Z),Q=PA++;wA($,Q,Z),i[$]=Q,c[Q]=Z,FA[Q]=Y,NA[Q]=new RegExp(Z,J?"g":void 0),LA[Q]=new RegExp(Y,J?"g":void 0)};X$("NUMERICIDENTIFIER","0|[1-9]\\d*");X$("NUMERICIDENTIFIERLOOSE","\\d+");X$("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${e7}*`);X$("MAINVERSION",`(${c[i.NUMERICIDENTIFIER]})\\.(${c[i.NUMERICIDENTIFIER]})\\.(${c[i.NUMERICIDENTIFIER]})`);X$("MAINVERSIONLOOSE",`(${c[i.NUMERICIDENTIFIERLOOSE]})\\.(${c[i.NUMERICIDENTIFIERLOOSE]})\\.(${c[i.NUMERICIDENTIFIERLOOSE]})`);X$("PRERELEASEIDENTIFIER",`(?:${c[i.NONNUMERICIDENTIFIER]}|${c[i.NUMERICIDENTIFIER]})`);X$("PRERELEASEIDENTIFIERLOOSE",`(?:${c[i.NONNUMERICIDENTIFIER]}|${c[i.NUMERICIDENTIFIERLOOSE]})`);X$("PRERELEASE",`(?:-(${c[i.PRERELEASEIDENTIFIER]}(?:\\.${c[i.PRERELEASEIDENTIFIER]})*))`);X$("PRERELEASELOOSE",`(?:-?(${c[i.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[i.PRERELEASEIDENTIFIERLOOSE]})*))`);X$("BUILDIDENTIFIER",`${e7}+`);X$("BUILD",`(?:\\+(${c[i.BUILDIDENTIFIER]}(?:\\.${c[i.BUILDIDENTIFIER]})*))`);X$("FULLPLAIN",`v?${c[i.MAINVERSION]}${c[i.PRERELEASE]}?${c[i.BUILD]}?`);X$("FULL",`^${c[i.FULLPLAIN]}$`);X$("LOOSEPLAIN",`[v=\\s]*${c[i.MAINVERSIONLOOSE]}${c[i.PRERELEASELOOSE]}?${c[i.BUILD]}?`);X$("LOOSE",`^${c[i.LOOSEPLAIN]}$`);X$("GTLT","((?:<|>)?=?)");X$("XRANGEIDENTIFIERLOOSE",`${c[i.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);X$("XRANGEIDENTIFIER",`${c[i.NUMERICIDENTIFIER]}|x|X|\\*`);X$("XRANGEPLAIN",`[v=\\s]*(${c[i.XRANGEIDENTIFIER]})(?:\\.(${c[i.XRANGEIDENTIFIER]})(?:\\.(${c[i.XRANGEIDENTIFIER]})(?:${c[i.PRERELEASE]})?${c[i.BUILD]}?)?)?`);X$("XRANGEPLAINLOOSE",`[v=\\s]*(${c[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[i.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[i.XRANGEIDENTIFIERLOOSE]})(?:${c[i.PRERELEASELOOSE]})?${c[i.BUILD]}?)?)?`);X$("XRANGE",`^${c[i.GTLT]}\\s*${c[i.XRANGEPLAIN]}$`);X$("XRANGELOOSE",`^${c[i.GTLT]}\\s*${c[i.XRANGEPLAINLOOSE]}$`);X$("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t7}})(?:\\.(\\d{1,${t7}}))?(?:\\.(\\d{1,${t7}}))?`);X$("COERCE",`${c[i.COERCEPLAIN]}(?:$|[^\\d])`);X$("COERCEFULL",c[i.COERCEPLAIN]+`(?:${c[i.PRERELEASE]})?(?:${c[i.BUILD]})?(?:$|[^\\d])`);X$("COERCERTL",c[i.COERCE],!0);X$("COERCERTLFULL",c[i.COERCEFULL],!0);X$("LONETILDE","(?:~>?)");X$("TILDETRIM",`(\\s*)${c[i.LONETILDE]}\\s+`,!0);vZ.tildeTrimReplace="$1~";X$("TILDE",`^${c[i.LONETILDE]}${c[i.XRANGEPLAIN]}$`);X$("TILDELOOSE",`^${c[i.LONETILDE]}${c[i.XRANGEPLAINLOOSE]}$`);X$("LONECARET","(?:\\^)");X$("CARETTRIM",`(\\s*)${c[i.LONECARET]}\\s+`,!0);vZ.caretTrimReplace="$1^";X$("CARET",`^${c[i.LONECARET]}${c[i.XRANGEPLAIN]}$`);X$("CARETLOOSE",`^${c[i.LONECARET]}${c[i.XRANGEPLAINLOOSE]}$`);X$("COMPARATORLOOSE",`^${c[i.GTLT]}\\s*(${c[i.LOOSEPLAIN]})$|^$`);X$("COMPARATOR",`^${c[i.GTLT]}\\s*(${c[i.FULLPLAIN]})$|^$`);X$("COMPARATORTRIM",`(\\s*)${c[i.GTLT]}\\s*(${c[i.LOOSEPLAIN]}|${c[i.XRANGEPLAIN]})`,!0);vZ.comparatorTrimReplace="$1$2$3";X$("HYPHENRANGE",`^\\s*(${c[i.XRANGEPLAIN]})\\s+-\\s+(${c[i.XRANGEPLAIN]})\\s*$`);X$("HYPHENRANGELOOSE",`^\\s*(${c[i.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[i.XRANGEPLAINLOOSE]})\\s*$`);X$("STAR","(<|>)?=?\\s*\\*");X$("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");X$("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var h8=D((RE,Gj)=>{var TA=Object.freeze({loose:!0}),qA=Object.freeze({}),CA=($)=>{if(!$)return qA;if(typeof $!=="object")return TA;return $};Gj.exports=CA});var Vj=D((yE,Kj)=>{var Bj=/^[0-9]+$/,jj=($,Z)=>{if(typeof $==="number"&&typeof Z==="number")return $===Z?0:$<Z?-1:1;let J=Bj.test($),Y=Bj.test(Z);if(J&&Y)$=+$,Z=+Z;return $===Z?0:J&&!Y?-1:Y&&!J?1:$<Z?-1:1},SA=($,Z)=>jj(Z,$);Kj.exports={compareIdentifiers:jj,rcompareIdentifiers:SA}});var oJ=D((_E,Hj)=>{var f8=rJ(),{MAX_LENGTH:Wj,MAX_SAFE_INTEGER:k8}=_8(),{safeRe:v8,t:g8}=x8(),DA=h8(),{compareIdentifiers:$4}=Vj();class MZ{constructor($,Z){if(Z=DA(Z),$ instanceof MZ)if($.loose===!!Z.loose&&$.includePrerelease===!!Z.includePrerelease)return $;else $=$.version;else if(typeof $!=="string")throw TypeError(`Invalid version. Must be a string. Got type "${typeof $}".`);if($.length>Wj)throw TypeError(`version is longer than ${Wj} characters`);f8("SemVer",$,Z),this.options=Z,this.loose=!!Z.loose,this.includePrerelease=!!Z.includePrerelease;let J=$.trim().match(Z.loose?v8[g8.LOOSE]:v8[g8.FULL]);if(!J)throw TypeError(`Invalid Version: ${$}`);if(this.raw=$,this.major=+J[1],this.minor=+J[2],this.patch=+J[3],this.major>k8||this.major<0)throw TypeError("Invalid major version");if(this.minor>k8||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>k8||this.patch<0)throw TypeError("Invalid patch version");if(!J[4])this.prerelease=[];else this.prerelease=J[4].split(".").map((Y)=>{if(/^[0-9]+$/.test(Y)){let Q=+Y;if(Q>=0&&Q<k8)return Q}return Y});this.build=J[5]?J[5].split("."):[],this.format()}format(){if(this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length)this.version+=`-${this.prerelease.join(".")}`;return this.version}toString(){return this.version}compare($){if(f8("SemVer.compare",this.version,this.options,$),!($ instanceof MZ)){if(typeof $==="string"&&$===this.version)return 0;$=new MZ($,this.options)}if($.version===this.version)return 0;return this.compareMain($)||this.comparePre($)}compareMain($){if(!($ instanceof MZ))$=new MZ($,this.options);if(this.major<$.major)return-1;if(this.major>$.major)return 1;if(this.minor<$.minor)return-1;if(this.minor>$.minor)return 1;if(this.patch<$.patch)return-1;if(this.patch>$.patch)return 1;return 0}comparePre($){if(!($ instanceof MZ))$=new MZ($,this.options);if(this.prerelease.length&&!$.prerelease.length)return-1;else if(!this.prerelease.length&&$.prerelease.length)return 1;else if(!this.prerelease.length&&!$.prerelease.length)return 0;let Z=0;do{let J=this.prerelease[Z],Y=$.prerelease[Z];if(f8("prerelease compare",Z,J,Y),J===void 0&&Y===void 0)return 0;else if(Y===void 0)return 1;else if(J===void 0)return-1;else if(J===Y)continue;else return $4(J,Y)}while(++Z)}compareBuild($){if(!($ instanceof MZ))$=new MZ($,this.options);let Z=0;do{let J=this.build[Z],Y=$.build[Z];if(f8("build compare",Z,J,Y),J===void 0&&Y===void 0)return 0;else if(Y===void 0)return 1;else if(J===void 0)return-1;else if(J===Y)continue;else return $4(J,Y)}while(++Z)}inc($,Z,J){if($.startsWith("pre")){if(!Z&&J===!1)throw Error("invalid increment argument: identifier is empty");if(Z){let Y=`-${Z}`.match(this.options.loose?v8[g8.PRERELEASELOOSE]:v8[g8.PRERELEASE]);if(!Y||Y[1]!==Z)throw Error(`invalid identifier: ${Z}`)}}switch($){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",Z,J);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",Z,J);break;case"prepatch":this.prerelease.length=0,this.inc("patch",Z,J),this.inc("pre",Z,J);break;case"prerelease":if(this.prerelease.length===0)this.inc("patch",Z,J);this.inc("pre",Z,J);break;case"release":if(this.prerelease.length===0)throw Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0)this.major++;this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0)this.minor++;this.patch=0,this.prerelease=[];break;case"patch":if(this.prerelease.length===0)this.patch++;this.prerelease=[];break;case"pre":{let Y=Number(J)?1:0;if(this.prerelease.length===0)this.prerelease=[Y];else{let Q=this.prerelease.length;while(--Q>=0)if(typeof this.prerelease[Q]==="number")this.prerelease[Q]++,Q=-2;if(Q===-1){if(Z===this.prerelease.join(".")&&J===!1)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(Y)}}if(Z){let Q=[Z,Y];if(J===!1)Q=[Z];if($4(this.prerelease[0],Z)===0){if(isNaN(this.prerelease[1]))this.prerelease=Q}else this.prerelease=Q}break}default:throw Error(`invalid increment argument: ${$}`)}if(this.raw=this.format(),this.build.length)this.raw+=`+${this.build.join(".")}`;return this}}Hj.exports=MZ});var Ej=D((xE,Oj)=>{var Aj=oJ(),bA=($,Z,J=!1)=>{if($ instanceof Aj)return $;try{return new Aj($,Z)}catch(Y){if(!J)return null;throw Y}};Oj.exports=bA});var Nj=D((hE,wj)=>{class Uj{constructor(){this.max=1000,this.map=new Map}get($){let Z=this.map.get($);if(Z===void 0)return;else return this.map.delete($),this.map.set($,Z),Z}delete($){return this.map.delete($)}set($,Z){if(!this.delete($)&&Z!==void 0){if(this.map.size>=this.max){let Y=this.map.keys().next().value;this.delete(Y)}this.map.set($,Z)}return this}}wj.exports=Uj});var f9=D((fE,Fj)=>{var Lj=oJ(),RA=($,Z,J)=>new Lj($,J).compare(new Lj(Z,J));Fj.exports=RA});var Mj=D((kE,Pj)=>{var yA=f9(),_A=($,Z,J)=>yA($,Z,J)===0;Pj.exports=_A});var Tj=D((vE,Ij)=>{var xA=f9(),hA=($,Z,J)=>xA($,Z,J)!==0;Ij.exports=hA});var Cj=D((gE,qj)=>{var fA=f9(),kA=($,Z,J)=>fA($,Z,J)>0;qj.exports=kA});var Dj=D((pE,Sj)=>{var vA=f9(),gA=($,Z,J)=>vA($,Z,J)>=0;Sj.exports=gA});var Rj=D((dE,bj)=>{var pA=f9(),dA=($,Z,J)=>pA($,Z,J)<0;bj.exports=dA});var _j=D((mE,yj)=>{var mA=f9(),uA=($,Z,J)=>mA($,Z,J)<=0;yj.exports=uA});var hj=D((uE,xj)=>{var lA=Mj(),cA=Tj(),iA=Cj(),nA=Dj(),aA=Rj(),sA=_j(),rA=($,Z,J,Y)=>{switch(Z){case"===":if(typeof $==="object")$=$.version;if(typeof J==="object")J=J.version;return $===J;case"!==":if(typeof $==="object")$=$.version;if(typeof J==="object")J=J.version;return $!==J;case"":case"=":case"==":return lA($,J,Y);case"!=":return cA($,J,Y);case">":return iA($,J,Y);case">=":return nA($,J,Y);case"<":return aA($,J,Y);case"<=":return sA($,J,Y);default:throw TypeError(`Invalid operator: ${Z}`)}};xj.exports=rA});var mj=D((lE,dj)=>{var tJ=Symbol("SemVer ANY");class p8{static get ANY(){return tJ}constructor($,Z){if(Z=fj(Z),$ instanceof p8)if($.loose===!!Z.loose)return $;else $=$.value;if($=$.trim().split(/\s+/).join(" "),J4("comparator",$,Z),this.options=Z,this.loose=!!Z.loose,this.parse($),this.semver===tJ)this.value="";else this.value=this.operator+this.semver.version;J4("comp",this)}parse($){let Z=this.options.loose?kj[vj.COMPARATORLOOSE]:kj[vj.COMPARATOR],J=$.match(Z);if(!J)throw TypeError(`Invalid comparator: ${$}`);if(this.operator=J[1]!==void 0?J[1]:"",this.operator==="=")this.operator="";if(!J[2])this.semver=tJ;else this.semver=new gj(J[2],this.options.loose)}toString(){return this.value}test($){if(J4("Comparator.test",$,this.options.loose),this.semver===tJ||$===tJ)return!0;if(typeof $==="string")try{$=new gj($,this.options)}catch(Z){return!1}return Z4($,this.operator,this.semver,this.options)}intersects($,Z){if(!($ instanceof p8))throw TypeError("a Comparator is required");if(this.operator===""){if(this.value==="")return!0;return new pj($.value,Z).test(this.value)}else if($.operator===""){if($.value==="")return!0;return new pj(this.value,Z).test($.semver)}if(Z=fj(Z),Z.includePrerelease&&(this.value==="<0.0.0-0"||$.value==="<0.0.0-0"))return!1;if(!Z.includePrerelease&&(this.value.startsWith("<0.0.0")||$.value.startsWith("<0.0.0")))return!1;if(this.operator.startsWith(">")&&$.operator.startsWith(">"))return!0;if(this.operator.startsWith("<")&&$.operator.startsWith("<"))return!0;if(this.semver.version===$.semver.version&&this.operator.includes("=")&&$.operator.includes("="))return!0;if(Z4(this.semver,"<",$.semver,Z)&&this.operator.startsWith(">")&&$.operator.startsWith("<"))return!0;if(Z4(this.semver,">",$.semver,Z)&&this.operator.startsWith("<")&&$.operator.startsWith(">"))return!0;return!1}}dj.exports=p8;var fj=h8(),{safeRe:kj,t:vj}=x8(),Z4=hj(),J4=rJ(),gj=oJ(),pj=Y4()});var Y4=D((cE,ij)=>{var oA=/\s+/g;class eJ{constructor($,Z){if(Z=eA(Z),$ instanceof eJ)if($.loose===!!Z.loose&&$.includePrerelease===!!Z.includePrerelease)return $;else return new eJ($.raw,Z);if($ instanceof Q4)return this.raw=$.value,this.set=[[$]],this.formatted=void 0,this;if(this.options=Z,this.loose=!!Z.loose,this.includePrerelease=!!Z.includePrerelease,this.raw=$.trim().replace(oA," "),this.set=this.raw.split("||").map((J)=>this.parseRange(J.trim())).filter((J)=>J.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let J=this.set[0];if(this.set=this.set.filter((Y)=>!lj(Y[0])),this.set.length===0)this.set=[J];else if(this.set.length>1){for(let Y of this.set)if(Y.length===1&&zO(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let $=0;$<this.set.length;$++){if($>0)this.formatted+="||";let Z=this.set[$];for(let J=0;J<Z.length;J++){if(J>0)this.formatted+=" ";this.formatted+=Z[J].toString().trim()}}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange($){let J=((this.options.includePrerelease&&QO)|(this.options.loose&&XO))+":"+$,Y=uj.get(J);if(Y)return Y;let Q=this.options.loose,X=Q?x0[S0.HYPHENRANGELOOSE]:x0[S0.HYPHENRANGE];$=$.replace(X,EO(this.options.includePrerelease)),v$("hyphen replace",$),$=$.replace(x0[S0.COMPARATORTRIM],ZO),v$("comparator trim",$),$=$.replace(x0[S0.TILDETRIM],JO),v$("tilde trim",$),$=$.replace(x0[S0.CARETTRIM],YO),v$("caret trim",$);let z=$.split(" ").map((O)=>GO(O,this.options)).join(" ").split(/\s+/).map((O)=>OO(O,this.options));if(Q)z=z.filter((O)=>{return v$("loose invalid filter",O,this.options),!!O.match(x0[S0.COMPARATORLOOSE])});v$("range list",z);let B=new Map,j=z.map((O)=>new Q4(O,this.options));for(let O of j){if(lj(O))return[O];B.set(O.value,O)}if(B.size>1&&B.has(""))B.delete("");let H=[...B.values()];return uj.set(J,H),H}intersects($,Z){if(!($ instanceof eJ))throw TypeError("a Range is required");return this.set.some((J)=>{return cj(J,Z)&&$.set.some((Y)=>{return cj(Y,Z)&&J.every((Q)=>{return Y.every((X)=>{return Q.intersects(X,Z)})})})})}test($){if(!$)return!1;if(typeof $==="string")try{$=new $O($,this.options)}catch(Z){return!1}for(let Z=0;Z<this.set.length;Z++)if(UO(this.set[Z],$,this.options))return!0;return!1}}ij.exports=eJ;var tA=Nj(),uj=new tA,eA=h8(),Q4=mj(),v$=rJ(),$O=oJ(),{safeRe:x0,t:S0,comparatorTrimReplace:ZO,tildeTrimReplace:JO,caretTrimReplace:YO}=x8(),{FLAG_INCLUDE_PRERELEASE:QO,FLAG_LOOSE:XO}=_8(),lj=($)=>$.value==="<0.0.0-0",zO=($)=>$.value==="",cj=($,Z)=>{let J=!0,Y=$.slice(),Q=Y.pop();while(J&&Y.length)J=Y.every((X)=>{return Q.intersects(X,Z)}),Q=Y.pop();return J},GO=($,Z)=>{return $=$.replace(x0[S0.BUILD],""),v$("comp",$,Z),$=KO($,Z),v$("caret",$),$=BO($,Z),v$("tildes",$),$=WO($,Z),v$("xrange",$),$=AO($,Z),v$("stars",$),$},h0=($)=>!$||$.toLowerCase()==="x"||$==="*",BO=($,Z)=>{return $.trim().split(/\s+/).map((J)=>jO(J,Z)).join(" ")},jO=($,Z)=>{let J=Z.loose?x0[S0.TILDELOOSE]:x0[S0.TILDE];return $.replace(J,(Y,Q,X,z,B)=>{v$("tilde",$,Y,Q,X,z,B);let j;if(h0(Q))j="";else if(h0(X))j=`>=${Q}.0.0 <${+Q+1}.0.0-0`;else if(h0(z))j=`>=${Q}.${X}.0 <${Q}.${+X+1}.0-0`;else if(B)v$("replaceTilde pr",B),j=`>=${Q}.${X}.${z}-${B} <${Q}.${+X+1}.0-0`;else j=`>=${Q}.${X}.${z} <${Q}.${+X+1}.0-0`;return v$("tilde return",j),j})},KO=($,Z)=>{return $.trim().split(/\s+/).map((J)=>VO(J,Z)).join(" ")},VO=($,Z)=>{v$("caret",$,Z);let J=Z.loose?x0[S0.CARETLOOSE]:x0[S0.CARET],Y=Z.includePrerelease?"-0":"";return $.replace(J,(Q,X,z,B,j)=>{v$("caret",$,Q,X,z,B,j);let H;if(h0(X))H="";else if(h0(z))H=`>=${X}.0.0${Y} <${+X+1}.0.0-0`;else if(h0(B))if(X==="0")H=`>=${X}.${z}.0${Y} <${X}.${+z+1}.0-0`;else H=`>=${X}.${z}.0${Y} <${+X+1}.0.0-0`;else if(j)if(v$("replaceCaret pr",j),X==="0")if(z==="0")H=`>=${X}.${z}.${B}-${j} <${X}.${z}.${+B+1}-0`;else H=`>=${X}.${z}.${B}-${j} <${X}.${+z+1}.0-0`;else H=`>=${X}.${z}.${B}-${j} <${+X+1}.0.0-0`;else if(v$("no pr"),X==="0")if(z==="0")H=`>=${X}.${z}.${B}${Y} <${X}.${z}.${+B+1}-0`;else H=`>=${X}.${z}.${B}${Y} <${X}.${+z+1}.0-0`;else H=`>=${X}.${z}.${B} <${+X+1}.0.0-0`;return v$("caret return",H),H})},WO=($,Z)=>{return v$("replaceXRanges",$,Z),$.split(/\s+/).map((J)=>HO(J,Z)).join(" ")},HO=($,Z)=>{$=$.trim();let J=Z.loose?x0[S0.XRANGELOOSE]:x0[S0.XRANGE];return $.replace(J,(Y,Q,X,z,B,j)=>{v$("xRange",$,Y,Q,X,z,B,j);let H=h0(X),O=H||h0(z),N=O||h0(B),U=N;if(Q==="="&&U)Q="";if(j=Z.includePrerelease?"-0":"",H)if(Q===">"||Q==="<")Y="<0.0.0-0";else Y="*";else if(Q&&U){if(O)z=0;if(B=0,Q===">")if(Q=">=",O)X=+X+1,z=0,B=0;else z=+z+1,B=0;else if(Q==="<=")if(Q="<",O)X=+X+1;else z=+z+1;if(Q==="<")j="-0";Y=`${Q+X}.${z}.${B}${j}`}else if(O)Y=`>=${X}.0.0${j} <${+X+1}.0.0-0`;else if(N)Y=`>=${X}.${z}.0${j} <${X}.${+z+1}.0-0`;return v$("xRange return",Y),Y})},AO=($,Z)=>{return v$("replaceStars",$,Z),$.trim().replace(x0[S0.STAR],"")},OO=($,Z)=>{return v$("replaceGTE0",$,Z),$.trim().replace(x0[Z.includePrerelease?S0.GTE0PRE:S0.GTE0],"")},EO=($)=>(Z,J,Y,Q,X,z,B,j,H,O,N,U)=>{if(h0(Y))J="";else if(h0(Q))J=`>=${Y}.0.0${$?"-0":""}`;else if(h0(X))J=`>=${Y}.${Q}.0${$?"-0":""}`;else if(z)J=`>=${J}`;else J=`>=${J}${$?"-0":""}`;if(h0(H))j="";else if(h0(O))j=`<${+H+1}.0.0-0`;else if(h0(N))j=`<${H}.${+O+1}.0-0`;else if(U)j=`<=${H}.${O}.${N}-${U}`;else if($)j=`<${H}.${O}.${+N+1}-0`;else j=`<=${j}`;return`${J} ${j}`.trim()},UO=($,Z,J)=>{for(let Y=0;Y<$.length;Y++)if(!$[Y].test(Z))return!1;if(Z.prerelease.length&&!J.includePrerelease){for(let Y=0;Y<$.length;Y++){if(v$($[Y].semver),$[Y].semver===Q4.ANY)continue;if($[Y].semver.prerelease.length>0){let Q=$[Y].semver;if(Q.major===Z.major&&Q.minor===Z.minor&&Q.patch===Z.patch)return!0}}return!1}return!0}});var aj=D((iE,nj)=>{var wO=Y4(),NO=($,Z,J)=>{try{Z=new wO(Z,J)}catch(Y){return!1}return Z.test($)};nj.exports=NO});var rj=D((e0)=>{var LO=e0&&e0.__createBinding||(Object.create?function($,Z,J,Y){if(Y===void 0)Y=J;var Q=Object.getOwnPropertyDescriptor(Z,J);if(!Q||("get"in Q?!Z.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return Z[J]}};Object.defineProperty($,Y,Q)}:function($,Z,J,Y){if(Y===void 0)Y=J;$[Y]=Z[J]}),X4=e0&&e0.__exportStar||function($,Z){for(var J in $)if(J!=="default"&&!Object.prototype.hasOwnProperty.call(Z,J))LO(Z,$,J)};Object.defineProperty(e0,"__esModule",{value:!0});e0.DiagnosticPullMode=e0.vsdiag=void 0;X4(Z$(),e0);X4(N$(),e0);var sj=j7();Object.defineProperty(e0,"vsdiag",{enumerable:!0,get:function(){return sj.vsdiag}});Object.defineProperty(e0,"DiagnosticPullMode",{enumerable:!0,get:function(){return sj.DiagnosticPullMode}});X4(r7(),e0)});var JK=D((c0)=>{var FO=c0&&c0.__createBinding||(Object.create?function($,Z,J,Y){if(Y===void 0)Y=J;var Q=Object.getOwnPropertyDescriptor(Z,J);if(!Q||("get"in Q?!Z.__esModule:Q.writable||Q.configurable))Q={enumerable:!0,get:function(){return Z[J]}};Object.defineProperty($,Y,Q)}:function($,Z,J,Y){if(Y===void 0)Y=J;$[Y]=Z[J]}),ej=c0&&c0.__exportStar||function($,Z){for(var J in $)if(J!=="default"&&!Object.prototype.hasOwnProperty.call(Z,J))FO(Z,$,J)};Object.defineProperty(c0,"__esModule",{value:!0});c0.SettingMonitor=c0.LanguageClient=c0.TransportKind=void 0;var rZ=require("child_process"),z4=require("fs"),G4=require("path"),w9=require("vscode"),c$=XZ(),oj=r7(),PO=Jj(),s$=o7(),MO=Ej(),IO=aj();ej(o7(),c0);ej(rj(),c0);var tj="^1.82.0",r$;(function($){$[$.stdio=0]="stdio",$[$.ipc=1]="ipc",$[$.pipe=2]="pipe",$[$.socket=3]="socket"})(r$||(c0.TransportKind=r$={}));var U9;(function($){function Z(J){let Y=J;return Y&&Y.kind===r$.socket&&c$.number(Y.port)}$.isSocket=Z})(U9||(U9={}));var B4;(function($){function Z(J){return c$.string(J.command)}$.is=Z})(B4||(B4={}));var j4;(function($){function Z(J){return c$.string(J.module)}$.is=Z})(j4||(j4={}));var K4;(function($){function Z(J){let Y=J;return Y&&Y.writer!==void 0&&Y.reader!==void 0}$.is=Z})(K4||(K4={}));var V4;(function($){function Z(J){let Y=J;return Y&&Y.process!==void 0&&typeof Y.detached==="boolean"}$.is=Z})(V4||(V4={}));class $K extends oj.BaseLanguageClient{constructor($,Z,J,Y,Q){let X,z,B,j,H;if(c$.string(Z))X=$,z=Z,B=J,j=Y,H=!!Q;else X=$.toLowerCase(),z=$,B=Z,j=J,H=Y;if(H===void 0)H=!1;super(X,z,j);this._serverOptions=B,this._forceDebug=H,this._isInDebugMode=H;try{this.checkVersion()}catch(O){if(c$.string(O.message))this.outputChannel.appendLine(O.message);throw O}}checkVersion(){let $=MO(w9.version);if(!$)throw Error(`No valid VS Code version detected. Version string is: ${w9.version}`);if($.prerelease&&$.prerelease.length>0)$.prerelease=[];if(!IO($,tj))throw Error(`The language client requires VS Code version ${tj} but received version ${w9.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){if(await this.stop(),this.isInDebugMode)await new Promise(($)=>setTimeout($,1000)),await this.start();else await this.start()}stop($=2000){return super.stop($).finally(()=>{if(this._serverProcess){let Z=this._serverProcess;if(this._serverProcess=void 0,this._isDetached===void 0||!this._isDetached)this.checkProcessDied(Z);this._isDetached=void 0}})}checkProcessDied($){if(!$||$.pid===void 0)return;setTimeout(()=>{try{if($.pid!==void 0)process.kill($.pid,0),(0,PO.terminate)($)}catch(Z){}},2000)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams($){if(super.fillInitializeParams($),$.processId===null)$.processId=process.pid}createMessageTransports($){function Z(H,O){if(!H&&!O)return;let N=Object.create(null);if(Object.keys(process.env).forEach((U)=>N[U]=process.env[U]),O)N.ELECTRON_RUN_AS_NODE="1",N.ELECTRON_NO_ASAR="1";if(H)Object.keys(H).forEach((U)=>N[U]=H[U]);return N}let J=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],Y=["--debug","--debug-brk","--inspect","--inspect-brk"];function Q(){let H=process.execArgv;if(H)return H.some((O)=>{return J.some((N)=>O.startsWith(N))||Y.some((N)=>O===N)});return!1}function X(H){if(H.stdin===null||H.stdout===null||H.stderr===null)throw Error("Process created without stdio streams")}let z=this._serverOptions;if(c$.func(z))return z().then((H)=>{if(oj.MessageTransports.is(H))return this._isDetached=!!H.detached,H;else if(K4.is(H))return this._isDetached=!!H.detached,{reader:new s$.StreamMessageReader(H.reader),writer:new s$.StreamMessageWriter(H.writer)};else{let O;if(V4.is(H))O=H.process,this._isDetached=H.detached;else O=H,this._isDetached=!1;return O.stderr.on("data",(N)=>this.outputChannel.append(c$.string(N)?N:N.toString($))),{reader:new s$.StreamMessageReader(O.stdout),writer:new s$.StreamMessageWriter(O.stdin)}}});let B,j=z;if(j.run||j.debug)if(this._forceDebug||Q())B=j.debug,this._isInDebugMode=!0;else B=j.run,this._isInDebugMode=!1;else B=z;return this._getServerWorkingDir(B.options).then((H)=>{if(j4.is(B)&&B.module){let O=B,N=O.transport||r$.stdio;if(O.runtime){let U=[],E=O.options??Object.create(null);if(E.execArgv)E.execArgv.forEach((h)=>U.push(h));if(U.push(O.module),O.args)O.args.forEach((h)=>U.push(h));let T=Object.create(null);T.cwd=H,T.env=Z(E.env,!1);let C=this._getRuntimePath(O.runtime,H),x=void 0;if(N===r$.ipc)T.stdio=[null,null,null,"ipc"],U.push("--node-ipc");else if(N===r$.stdio)U.push("--stdio");else if(N===r$.pipe)x=(0,s$.generateRandomPipeName)(),U.push(`--pipe=${x}`);else if(U9.isSocket(N))U.push(`--socket=${N.port}`);if(U.push(`--clientProcessId=${process.pid.toString()}`),N===r$.ipc||N===r$.stdio){let h=rZ.spawn(C,U,T);if(!h||!h.pid)return EJ(h,`Launching server using runtime ${C} failed.`);if(this._serverProcess=h,h.stderr.on("data",(d)=>this.outputChannel.append(c$.string(d)?d:d.toString($))),N===r$.ipc)return h.stdout.on("data",(d)=>this.outputChannel.append(c$.string(d)?d:d.toString($))),Promise.resolve({reader:new s$.IPCMessageReader(h),writer:new s$.IPCMessageWriter(h)});else return Promise.resolve({reader:new s$.StreamMessageReader(h.stdout),writer:new s$.StreamMessageWriter(h.stdin)})}else if(N===r$.pipe)return(0,s$.createClientPipeTransport)(x).then((h)=>{let d=rZ.spawn(C,U,T);if(!d||!d.pid)return EJ(d,`Launching server using runtime ${C} failed.`);return this._serverProcess=d,d.stderr.on("data",(k)=>this.outputChannel.append(c$.string(k)?k:k.toString($))),d.stdout.on("data",(k)=>this.outputChannel.append(c$.string(k)?k:k.toString($))),h.onConnected().then((k)=>{return{reader:k[0],writer:k[1]}})});else if(U9.isSocket(N))return(0,s$.createClientSocketTransport)(N.port).then((h)=>{let d=rZ.spawn(C,U,T);if(!d||!d.pid)return EJ(d,`Launching server using runtime ${C} failed.`);return this._serverProcess=d,d.stderr.on("data",(k)=>this.outputChannel.append(c$.string(k)?k:k.toString($))),d.stdout.on("data",(k)=>this.outputChannel.append(c$.string(k)?k:k.toString($))),h.onConnected().then((k)=>{return{reader:k[0],writer:k[1]}})})}else{let U=void 0;return new Promise((E,T)=>{let C=(O.args&&O.args.slice())??[];if(N===r$.ipc)C.push("--node-ipc");else if(N===r$.stdio)C.push("--stdio");else if(N===r$.pipe)U=(0,s$.generateRandomPipeName)(),C.push(`--pipe=${U}`);else if(U9.isSocket(N))C.push(`--socket=${N.port}`);C.push(`--clientProcessId=${process.pid.toString()}`);let x=O.options??Object.create(null);if(x.env=Z(x.env,!0),x.execArgv=x.execArgv||[],x.cwd=H,x.silent=!0,N===r$.ipc||N===r$.stdio){let h=rZ.fork(O.module,C||[],x);if(X(h),this._serverProcess=h,h.stderr.on("data",(d)=>this.outputChannel.append(c$.string(d)?d:d.toString($))),N===r$.ipc)h.stdout.on("data",(d)=>this.outputChannel.append(c$.string(d)?d:d.toString($))),E({reader:new s$.IPCMessageReader(this._serverProcess),writer:new s$.IPCMessageWriter(this._serverProcess)});else E({reader:new s$.StreamMessageReader(h.stdout),writer:new s$.StreamMessageWriter(h.stdin)})}else if(N===r$.pipe)(0,s$.createClientPipeTransport)(U).then((h)=>{let d=rZ.fork(O.module,C||[],x);X(d),this._serverProcess=d,d.stderr.on("data",(k)=>this.outputChannel.append(c$.string(k)?k:k.toString($))),d.stdout.on("data",(k)=>this.outputChannel.append(c$.string(k)?k:k.toString($))),h.onConnected().then((k)=>{E({reader:k[0],writer:k[1]})},T)},T);else if(U9.isSocket(N))(0,s$.createClientSocketTransport)(N.port).then((h)=>{let d=rZ.fork(O.module,C||[],x);X(d),this._serverProcess=d,d.stderr.on("data",(k)=>this.outputChannel.append(c$.string(k)?k:k.toString($))),d.stdout.on("data",(k)=>this.outputChannel.append(c$.string(k)?k:k.toString($))),h.onConnected().then((k)=>{E({reader:k[0],writer:k[1]})},T)},T)})}}else if(B4.is(B)&&B.command){let O=B,N=B.args!==void 0?B.args.slice(0):[],U=void 0,E=B.transport;if(E===r$.stdio)N.push("--stdio");else if(E===r$.pipe)U=(0,s$.generateRandomPipeName)(),N.push(`--pipe=${U}`);else if(U9.isSocket(E))N.push(`--socket=${E.port}`);else if(E===r$.ipc)throw Error("Transport kind ipc is not support for command executable");let T=Object.assign({},O.options);if(T.cwd=T.cwd||H,E===void 0||E===r$.stdio){let C=rZ.spawn(O.command,N,T);if(!C||!C.pid)return EJ(C,`Launching server using command ${O.command} failed.`);return C.stderr.on("data",(x)=>this.outputChannel.append(c$.string(x)?x:x.toString($))),this._serverProcess=C,this._isDetached=!!T.detached,Promise.resolve({reader:new s$.StreamMessageReader(C.stdout),writer:new s$.StreamMessageWriter(C.stdin)})}else if(E===r$.pipe)return(0,s$.createClientPipeTransport)(U).then((C)=>{let x=rZ.spawn(O.command,N,T);if(!x||!x.pid)return EJ(x,`Launching server using command ${O.command} failed.`);return this._serverProcess=x,this._isDetached=!!T.detached,x.stderr.on("data",(h)=>this.outputChannel.append(c$.string(h)?h:h.toString($))),x.stdout.on("data",(h)=>this.outputChannel.append(c$.string(h)?h:h.toString($))),C.onConnected().then((h)=>{return{reader:h[0],writer:h[1]}})});else if(U9.isSocket(E))return(0,s$.createClientSocketTransport)(E.port).then((C)=>{let x=rZ.spawn(O.command,N,T);if(!x||!x.pid)return EJ(x,`Launching server using command ${O.command} failed.`);return this._serverProcess=x,this._isDetached=!!T.detached,x.stderr.on("data",(h)=>this.outputChannel.append(c$.string(h)?h:h.toString($))),x.stdout.on("data",(h)=>this.outputChannel.append(c$.string(h)?h:h.toString($))),C.onConnected().then((h)=>{return{reader:h[0],writer:h[1]}})})}return Promise.reject(Error("Unsupported server configuration "+JSON.stringify(z,null,4)))}).finally(()=>{if(this._serverProcess!==void 0)this._serverProcess.on("exit",(H,O)=>{if(H!==null)this.error(`Server process exited with code ${H}.`,void 0,!1);if(O!==null)this.error(`Server process exited with signal ${O}.`,void 0,!1)})})}_getRuntimePath($,Z){if(G4.isAbsolute($))return $;let J=this._mainGetRootPath();if(J!==void 0){let Y=G4.join(J,$);if(z4.existsSync(Y))return Y}if(Z!==void 0){let Y=G4.join(Z,$);if(z4.existsSync(Y))return Y}return $}_mainGetRootPath(){let $=w9.workspace.workspaceFolders;if(!$||$.length===0)return;let Z=$[0];if(Z.uri.scheme==="file")return Z.uri.fsPath;return}_getServerWorkingDir($){let Z=$&&$.cwd;if(!Z)Z=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath();if(Z)return new Promise((J)=>{z4.lstat(Z,(Y,Q)=>{J(!Y&&Q.isDirectory()?Z:void 0)})});return Promise.resolve(void 0)}}c0.LanguageClient=$K;class ZK{constructor($,Z){this._client=$,this._setting=Z,this._listeners=[]}start(){return w9.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new w9.Disposable(()=>{if(this._client.needsStop())this._client.stop()})}onDidChangeConfiguration(){let $=this._setting.indexOf("."),Z=$>=0?this._setting.substr(0,$):this._setting,J=$>=0?this._setting.substr($+1):void 0,Y=J?w9.workspace.getConfiguration(Z).get(J,!1):w9.workspace.getConfiguration(Z);if(Y&&this._client.needsStart())this._client.start().catch((Q)=>this._client.error("Start failed after configuration change",Q,"force"));else if(!Y&&this._client.needsStop())this._client.stop().catch((Q)=>this._client.error("Stop failed after configuration change",Q,"force"))}}c0.SettingMonitor=ZK;function EJ($,Z){if($===null)return Promise.reject(Z);return new Promise((J,Y)=>{$.on("error",(Q)=>{Y(`${Z} ${Q}`)}),setImmediate(()=>Y(Z))})}});var QK=D((sE,YK)=>{YK.exports=JK()});var _O={};qK(_O,{deactivate:()=>qO,activate:()=>TO});module.exports=TK(_O);var wK=d$(require("path")),f=d$(require("vscode")),NK=d$(QK(),1);var z0=d$(require("vscode")),$Y=d$(require("path")),UJ=d$(require("fs")),XK=require("child_process");class W4{_isRunning=!1;_process;_outputChannel;_statusBarItem;_profileData=[];constructor(){this._outputChannel=z0.window.createOutputChannel("Home Profiler"),this._statusBarItem=z0.window.createStatusBarItem(z0.StatusBarAlignment.Right,100),this._statusBarItem.text="$(pulse) Home Profiler",this._statusBarItem.command="ion.profiler.viewReport"}async start($){if(this._isRunning){z0.window.showWarningMessage("Profiler is already running");return}let Z=z0.window.activeTextEditor,J=$||Z?.document.uri.fsPath;if(!J){z0.window.showErrorMessage("No Home file to profile");return}let Q=z0.workspace.getConfiguration("home").get("path")||"home";this._isRunning=!0,this._profileData=[],this._statusBarItem.text="$(pulse) Profiling...",this._statusBarItem.show(),this._outputChannel.clear(),this._outputChannel.appendLine(`Starting profiler for ${J}`),this._outputChannel.show();try{this._process=XK.spawn(Q,["profile",J],{cwd:$Y.dirname(J)}),this._process.stdout?.on("data",(X)=>{this.processOutput(X.toString())}),this._process.stderr?.on("data",(X)=>{this._outputChannel.appendLine(`[ERROR] ${X.toString()}`)}),this._process.on("exit",(X)=>{if(this._outputChannel.appendLine(`Profiler exited with code ${X}`),this.stop(),X===0)this.saveReport(),z0.window.showInformationMessage("Profiling complete. View report?","View Report").then((z)=>{if(z==="View Report")this.viewReport()})})}catch(X){this._outputChannel.appendLine(`Failed to start profiler: ${X}`),this.stop(),z0.window.showErrorMessage(`Failed to start profiler: ${X}`)}}stop(){if(this._process)this._process.kill(),this._process=void 0;this._isRunning=!1,this._statusBarItem.text="$(pulse) Home Profiler",this._statusBarItem.hide()}isRunning(){return this._isRunning}processOutput($){let Z=$.split(`
`);for(let J of Z)if(this._outputChannel.appendLine(J),J.startsWith("[PROFILE]"))try{let Y=J.substring(9).trim(),Q=JSON.parse(Y);this._profileData.push(Q)}catch(Y){this._outputChannel.appendLine(`Failed to parse profile data: ${Y}`)}}saveReport(){if(this._profileData.length===0){this._outputChannel.appendLine("No profiler data collected");return}let $=z0.workspace.workspaceFolders?.[0];if(!$)return;let Z=$Y.join($.uri.fsPath,"ion-profile-report.json"),J={timestamp:new Date().toISOString(),summary:this.generateSummary(),data:this._profileData};UJ.writeFileSync(Z,JSON.stringify(J,null,2)),this._outputChannel.appendLine(`Report saved to ${Z}`)}async viewReport(){let $=z0.workspace.workspaceFolders?.[0];if(!$){z0.window.showErrorMessage("No workspace folder open");return}let Z=$Y.join($.uri.fsPath,"ion-profile-report.json");if(!UJ.existsSync(Z)){z0.window.showErrorMessage("No profiler report found. Run the profiler first.");return}let J=JSON.parse(UJ.readFileSync(Z,"utf-8")),Y=z0.window.createWebviewPanel("ionProfiler","Home Profiler Report",z0.ViewColumn.One,{enableScripts:!0});Y.webview.html=this.getReportHtml(J)}generateSummary(){let $=new Map,Z=0;for(let Y of this._profileData)if(Y.type==="function_call"){let Q=$.get(Y.name)||{name:Y.name,callCount:0,totalTime:0,minTime:1/0,maxTime:0,avgTime:0};Q.callCount++,Q.totalTime+=Y.duration,Q.minTime=Math.min(Q.minTime,Y.duration),Q.maxTime=Math.max(Q.maxTime,Y.duration),Z+=Y.duration,$.set(Y.name,Q)}for(let Y of $.values())Y.avgTime=Y.totalTime/Y.callCount;let J=Array.from($.values()).sort((Y,Q)=>Q.totalTime-Y.totalTime);return{totalTime:Z,functionCount:$.size,topFunctions:J.slice(0,10)}}getReportHtml($){let Z=$.summary;return`
            <!DOCTYPE html>
            <html lang="en">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Home Profiler Report</title>
                <style>
                    body {
                        font-family: var(--vscode-font-family);
                        color: var(--vscode-foreground);
                        background-color: var(--vscode-editor-background);
                        padding: 20px;
                    }
                    h1, h2 {
                        color: var(--vscode-editor-foreground);
                    }
                    table {
                        border-collapse: collapse;
                        width: 100%;
                        margin-top: 20px;
                    }
                    th, td {
                        text-align: left;
                        padding: 12px;
                        border-bottom: 1px solid var(--vscode-panel-border);
                    }
                    th {
                        background-color: var(--vscode-editor-selectionBackground);
                        font-weight: bold;
                    }
                    tr:hover {
                        background-color: var(--vscode-list-hoverBackground);
                    }
                    .summary {
                        background-color: var(--vscode-textBlockQuote-background);
                        padding: 15px;
                        border-radius: 5px;
                        margin-bottom: 20px;
                    }
                    .summary-item {
                        margin: 10px 0;
                    }
                    .summary-label {
                        font-weight: bold;
                        color: var(--vscode-textPreformat-foreground);
                    }
                    .bar {
                        background-color: var(--vscode-progressBar-background);
                        height: 20px;
                        border-radius: 3px;
                        margin-top: 5px;
                    }
                </style>
            </head>
            <body>
                <h1>Home Profiler Report</h1>
                <p><em>Generated: ${$.timestamp}</em></p>

                <div class="summary">
                    <h2>Summary</h2>
                    <div class="summary-item">
                        <span class="summary-label">Total Time:</span> ${Z.totalTime.toFixed(2)}ms
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Functions Profiled:</span> ${Z.functionCount}
                    </div>
                </div>

                <h2>Top Functions by Time</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Function</th>
                            <th>Calls</th>
                            <th>Total Time (ms)</th>
                            <th>Avg Time (ms)</th>
                            <th>Min Time (ms)</th>
                            <th>Max Time (ms)</th>
                            <th>% of Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${Z.topFunctions.map((J)=>`
                            <tr>
                                <td><code>${J.name}</code></td>
                                <td>${J.callCount}</td>
                                <td>${J.totalTime.toFixed(2)}</td>
                                <td>${J.avgTime.toFixed(2)}</td>
                                <td>${J.minTime.toFixed(2)}</td>
                                <td>${J.maxTime.toFixed(2)}</td>
                                <td>${(J.totalTime/Z.totalTime*100).toFixed(1)}%</td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>

                <h2>Call Timeline</h2>
                <div id="timeline">
                    ${$.data.slice(0,100).map((J,Y)=>`
                        <div style="margin: 5px 0;">
                            <code>${J.name}</code> - ${J.duration?.toFixed(2)||"N/A"}ms
                        </div>
                    `).join("")}
                </div>
            </body>
            </html>
        `}dispose(){this.stop(),this._outputChannel.dispose(),this._statusBarItem.dispose()}}var S$=d$(require("vscode")),zK=d$(require("https")),GK=d$(require("fs")),BK=d$(require("path")),d8=require("child_process");class H4{REGISTRY_URL="https://registry.home-lang.org";_outputChannel;constructor(){this._outputChannel=S$.window.createOutputChannel("Home Package Manager")}async searchPackages(){let $=await S$.window.showInputBox({prompt:"Search for Home packages",placeHolder:"Enter package name or keywords"});if(!$)return;this._outputChannel.clear(),this._outputChannel.appendLine(`Searching for: ${$}`),this._outputChannel.show();try{let Z=await this.fetchPackages($);if(Z.length===0){S$.window.showInformationMessage("No packages found");return}let J=Z.map((Q)=>({label:Q.name,description:Q.version,detail:Q.description,package:Q})),Y=await S$.window.showQuickPick(J,{placeHolder:"Select a package to install"});if(Y)await this.installPackage(Y.package.name,Y.package.version)}catch(Z){this._outputChannel.appendLine(`Error searching packages: ${Z}`),S$.window.showErrorMessage(`Failed to search packages: ${Z}`)}}async installPackage($,Z){let J=$,Y=Z;if(!J){if(J=await S$.window.showInputBox({prompt:"Enter package name",placeHolder:"package-name"}),!J)return}if(!Y)Y=await S$.window.showInputBox({prompt:"Enter package version (or leave empty for latest)",placeHolder:"latest"});let Q=S$.workspace.workspaceFolders?.[0];if(!Q){S$.window.showErrorMessage("No workspace folder open");return}this._outputChannel.clear(),this._outputChannel.appendLine(`Installing ${J}${Y?`@${Y}`:""}...`),this._outputChannel.show();let z=S$.workspace.getConfiguration("home").get("path")||"home",B=["package","install",J];if(Y&&Y!=="latest")B.push(`--version=${Y}`);return new Promise((j,H)=>{let O=d8.spawn(z,B,{cwd:Q.uri.fsPath});O.stdout?.on("data",(N)=>{this._outputChannel.appendLine(N.toString())}),O.stderr?.on("data",(N)=>{this._outputChannel.appendLine(`[ERROR] ${N.toString()}`)}),O.on("exit",(N)=>{if(N===0)this._outputChannel.appendLine(`Successfully installed ${J}`),S$.window.showInformationMessage(`Package ${J} installed successfully`),j();else this._outputChannel.appendLine(`Installation failed with code ${N}`),S$.window.showErrorMessage(`Failed to install ${J}`),H(Error(`Installation failed with code ${N}`))})})}async publishPackage(){let $=S$.workspace.workspaceFolders?.[0];if(!$){S$.window.showErrorMessage("No workspace folder open");return}let Z=BK.join($.uri.fsPath,"package.home");if(!GK.existsSync(Z)){S$.window.showErrorMessage("No package.home file found in workspace");return}if(await S$.window.showWarningMessage("Publish package to Home registry?","Publish","Cancel")!=="Publish")return;this._outputChannel.clear(),this._outputChannel.appendLine("Publishing package..."),this._outputChannel.show();let Q=S$.workspace.getConfiguration("home").get("path")||"home";return new Promise((X,z)=>{let B=d8.spawn(Q,["package","publish"],{cwd:$.uri.fsPath});B.stdout?.on("data",(j)=>{this._outputChannel.appendLine(j.toString())}),B.stderr?.on("data",(j)=>{this._outputChannel.appendLine(`[ERROR] ${j.toString()}`)}),B.on("exit",(j)=>{if(j===0)this._outputChannel.appendLine("Package published successfully"),S$.window.showInformationMessage("Package published successfully"),X();else this._outputChannel.appendLine(`Publishing failed with code ${j}`),S$.window.showErrorMessage("Failed to publish package"),z(Error(`Publishing failed with code ${j}`))})})}async updatePackages(){let $=S$.workspace.workspaceFolders?.[0];if(!$){S$.window.showErrorMessage("No workspace folder open");return}this._outputChannel.clear(),this._outputChannel.appendLine("Updating packages..."),this._outputChannel.show();let J=S$.workspace.getConfiguration("home").get("path")||"home";return new Promise((Y,Q)=>{let X=d8.spawn(J,["package","update"],{cwd:$.uri.fsPath});X.stdout?.on("data",(z)=>{this._outputChannel.appendLine(z.toString())}),X.stderr?.on("data",(z)=>{this._outputChannel.appendLine(`[ERROR] ${z.toString()}`)}),X.on("exit",(z)=>{if(z===0)this._outputChannel.appendLine("Packages updated successfully"),S$.window.showInformationMessage("Packages updated successfully"),Y();else this._outputChannel.appendLine(`Update failed with code ${z}`),S$.window.showErrorMessage("Failed to update packages"),Q(Error(`Update failed with code ${z}`))})})}async fetchPackages($){return new Promise((Z,J)=>{let Y=`${this.REGISTRY_URL}/search?q=${encodeURIComponent($)}`;zK.get(Y,(Q)=>{let X="";Q.on("data",(z)=>{X+=z}),Q.on("end",()=>{try{let z=JSON.parse(X);Z(z.packages||[])}catch(z){J(z)}})}).on("error",(Q)=>{J(Q)})})}dispose(){this._outputChannel.dispose()}}var A0=d$(require("vscode")),A4=d$(require("fs")),O4=d$(require("path"));class E4{samples=[];_isRunning=!1;_startTime=0;_outputChannel;sampleInterval=1;functionProfiles=new Map;constructor(){this._outputChannel=A0.window.createOutputChannel("Home CPU Profiler")}start($=1){if(this._isRunning){A0.window.showWarningMessage("CPU profiler is already running");return}this._isRunning=!0,this._startTime=Date.now(),this.samples=[],this.functionProfiles.clear(),this.sampleInterval=$,this._outputChannel.clear(),this._outputChannel.appendLine("CPU profiler started"),this._outputChannel.appendLine(`Sample interval: ${$}ms`),this._outputChannel.show()}stop(){if(!this._isRunning){A0.window.showWarningMessage("CPU profiler is not running");return}this._isRunning=!1;let $=Date.now()-this._startTime;this._outputChannel.appendLine(`
CPU profiling stopped`),this._outputChannel.appendLine(`Duration: ${$}ms`),this._outputChannel.appendLine(`Total samples: ${this.samples.length}`),this._outputChannel.appendLine(`Sample rate: ${(this.samples.length/($/1000)).toFixed(2)} samples/sec`),this.analyzeSamples()}recordSample($,Z=0){if(!this._isRunning)return;this.samples.push({timestamp:Date.now(),stackTrace:$,threadId:Z})}analyzeSamples(){for(let Z of this.samples)this.processSample(Z);this._outputChannel.appendLine(`
Top functions by total time:`);let $=Array.from(this.functionProfiles.values()).sort((Z,J)=>J.totalTime-Z.totalTime).slice(0,10);for(let Z of $)this._outputChannel.appendLine(`  ${Z.name}: ${Z.totalTime.toFixed(2)}ms (${Z.callCount} calls)`)}processSample($){for(let Z=0;Z<$.stackTrace.length;Z++){let J=$.stackTrace[Z],Y=this.getFunctionKey(J,Z),Q=this.functionProfiles.get(Y);if(!Q)Q={name:J,file:"",line:0,selfTime:0,totalTime:0,callCount:0,children:new Map},this.functionProfiles.set(Y,Q);if(Q.callCount++,Q.totalTime+=this.sampleInterval,Z===0)Q.selfTime+=this.sampleInterval}}generateFlameGraph(){let $={name:"root",value:0,children:[]};for(let Z of this.samples)this.addSampleToFlameGraph($,Z.stackTrace.slice().reverse());return this.calculateFlameGraphValues($),$}addSampleToFlameGraph($,Z){if(Z.length===0)return;let J=Z[0],Y=$.children.find((Q)=>Q.name===J);if(!Y)Y={name:J,value:0,children:[]},$.children.push(Y);if(Z.length>1)this.addSampleToFlameGraph(Y,Z.slice(1))}calculateFlameGraphValues($){if($.children.length===0)return $.value=this.sampleInterval,$.value;let Z=0;for(let J of $.children)Z+=this.calculateFlameGraphValues(J);return $.value=Z,Z}async generateFlameGraphHTML(){let $=this.generateFlameGraph(),Z=A0.workspace.workspaceFolders?.[0];if(!Z){A0.window.showErrorMessage("No workspace folder open");return}let J=O4.join(Z.uri.fsPath,"ion-flamegraph.html"),Y=this.getFlameGraphHTML($);if(A4.writeFileSync(J,Y),this._outputChannel.appendLine(`
Flame graph saved to ${J}`),await A0.window.showInformationMessage("Flame graph generated","Open Flame Graph")==="Open Flame Graph"){let X=A0.Uri.file(J);await A0.commands.executeCommand("vscode.open",X)}}exportToChromeDevTools(){let $=[],Z=new Map,J=1;for(let[X,z]of this.functionProfiles)$.push({id:J,callFrame:{functionName:z.name,scriptId:"0",url:z.file,lineNumber:z.line,columnNumber:0},hitCount:z.callCount,children:[]}),Z.set(X,J),J++;let Y=[],Q=[];for(let X=0;X<this.samples.length;X++){let B=this.samples[X].stackTrace[0]||"unknown",j=this.getFunctionKey(B,0),H=Z.get(j)||0;if(Y.push(H),X===0)Q.push(0);else Q.push(this.samples[X].timestamp-this.samples[X-1].timestamp)}return{nodes:$,startTime:this._startTime*1000,endTime:(this._startTime+this.samples.length*this.sampleInterval)*1000,samples:Y,timeDeltas:Q}}async saveChromeProfile(){let $=this.exportToChromeDevTools(),Z=A0.workspace.workspaceFolders?.[0];if(!Z){A0.window.showErrorMessage("No workspace folder open");return}let J=O4.join(Z.uri.fsPath,"ion-cpu-profile.json");if(A4.writeFileSync(J,JSON.stringify($,null,2)),this._outputChannel.appendLine(`
Chrome profile saved to ${J}`),await A0.window.showInformationMessage("Chrome DevTools profile saved","Open in Chrome DevTools")==="Open in Chrome DevTools")A0.window.showInformationMessage("Open Chrome DevTools, go to Performance tab, and load the profile file")}getFunctionKey($,Z){return`${$}@${Z}`}getFlameGraphHTML($){return`
<!DOCTYPE html>
<html>
<head>
    <title>Home CPU Flame Graph</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: monospace;
            background: #1e1e1e;
            color: #fff;
        }
        h1 { margin-bottom: 20px; }
        #flamegraph {
            width: 100%;
            height: 600px;
            border: 1px solid #444;
        }
        .frame {
            cursor: pointer;
            stroke: #000;
            stroke-width: 0.5;
        }
        .frame:hover {
            stroke: #fff;
            stroke-width: 2;
        }
        text {
            pointer-events: none;
            font-size: 12px;
        }
        #info {
            margin-top: 20px;
            padding: 10px;
            background: #2d2d2d;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Home CPU Flame Graph</h1>
    <div id="info">Click on a frame to zoom. Ctrl+Click to reset.</div>
    <svg id="flamegraph"></svg>

    <script>
        const data = ${JSON.stringify($)};
        const width = document.getElementById('flamegraph').clientWidth;
        const height = 600;
        const colors = [
            '#e74c3c', '#3498db', '#2ecc71', '#f39c12',
            '#9b59b6', '#1abc9c', '#34495e', '#e67e22'
        ];

        function getColor(name) {
            let hash = 0;
            for (let i = 0; i < name.length; i++) {
                hash = name.charCodeAt(i) + ((hash << 5) - hash);
            }
            return colors[Math.abs(hash) % colors.length];
        }

        function renderFlameGraph(node, x, y, width, depth = 0) {
            const svg = document.getElementById('flamegraph');
            const rectHeight = 20;

            if (width < 1) return;

            const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');
            rect.setAttribute('x', x);
            rect.setAttribute('y', y);
            rect.setAttribute('width', width);
            rect.setAttribute('height', rectHeight);
            rect.setAttribute('fill', getColor(node.name));
            rect.classList.add('frame');

            const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            text.setAttribute('x', x + 4);
            text.setAttribute('y', y + 14);
            text.setAttribute('fill', '#fff');
            text.textContent = width > 50 ? node.name : '';

            rect.addEventListener('click', (e) => {
                if (e.ctrlKey) {
                    location.reload();
                } else {
                    zoomToNode(node);
                }
            });

            svg.appendChild(rect);
            svg.appendChild(text);

            // Render children
            let childX = x;
            const totalValue = node.children.reduce((sum, c) => sum + c.value, 0);

            for (const child of node.children) {
                const childWidth = (child.value / totalValue) * width;
                renderFlameGraph(child, childX, y + rectHeight, childWidth, depth + 1);
                childX += childWidth;
            }
        }

        function zoomToNode(node) {
            const svg = document.getElementById('flamegraph');
            svg.innerHTML = '';
            renderFlameGraph(node, 0, 0, width);
        }

        // Initial render
        renderFlameGraph(data, 0, 0, width);
    </script>
</body>
</html>
        `}dispose(){this._outputChannel.dispose()}}var $Z=d$(require("vscode")),jK=d$(require("fs")),KK=d$(require("path"));class U4{events=[];objectLifetimes=new Map;_isRunning=!1;_startTime=0;_outputChannel;heapHistory=[];constructor(){this._outputChannel=$Z.window.createOutputChannel("Home GC Profiler")}start(){if(this._isRunning){$Z.window.showWarningMessage("GC profiler is already running");return}this._isRunning=!0,this._startTime=Date.now(),this.events=[],this.objectLifetimes.clear(),this.heapHistory=[],this._outputChannel.clear(),this._outputChannel.appendLine("GC profiler started"),this._outputChannel.show()}stop(){if(!this._isRunning)return $Z.window.showWarningMessage("GC profiler is not running"),this.getStatistics();this._isRunning=!1;let $=this.getStatistics();return this._outputChannel.appendLine(`
GC profiling stopped`),this._outputChannel.appendLine(`Total collections: ${$.totalCollections}`),this._outputChannel.appendLine(`Minor collections: ${$.minorCollections}`),this._outputChannel.appendLine(`Major collections: ${$.majorCollections}`),this._outputChannel.appendLine(`Total pause time: ${$.totalPauseTime.toFixed(2)}ms`),this._outputChannel.appendLine(`Average pause time: ${$.averagePauseTime.toFixed(2)}ms`),this._outputChannel.appendLine(`Max pause time: ${$.maxPauseTime.toFixed(2)}ms`),$}recordGCEvent($){if(!this._isRunning)return;this.events.push($),this._outputChannel.appendLine(`[GC] ${$.type} gen${$.generation} ${$.duration.toFixed(2)}ms ${this.formatBytes($.heapSizeBefore)} → ${this.formatBytes($.heapSizeAfter)} (-${this.formatBytes($.heapSizeBefore-$.heapSizeAfter)})`),this.heapHistory.push({timestamp:$.timestamp,size:$.heapSizeAfter,generation:$.generation})}recordObjectAllocation($,Z,J,Y){if(!this._isRunning)return;this.objectLifetimes.set($,{address:$,type:Z,allocatedAt:Date.now(),generation:J,size:Y})}recordObjectCollection($){if(!this._isRunning)return;let Z=this.objectLifetimes.get($);if(Z)Z.collectedAt=Date.now()}getStatistics(){let $=Date.now()-this._startTime,Z=this.events.filter((B)=>B.type==="minor").length,J=this.events.filter((B)=>B.type==="major").length,Y=this.events.reduce((B,j)=>B+j.duration,0),Q=Math.max(...this.events.map((B)=>B.duration),0),X=this.events.reduce((B,j)=>B+(j.heapSizeBefore-j.heapSizeAfter),0),z=this.events.length>0?this.events[this.events.length-1].heapSizeAfter-this.events[0].heapSizeBefore:0;return{totalCollections:this.events.length,minorCollections:Z,majorCollections:J,totalPauseTime:Y,averagePauseTime:this.events.length>0?Y/this.events.length:0,maxPauseTime:Q,totalBytesCollected:X,heapGrowth:z,collectionFrequency:this.events.length/$*1000}}getGenerationStats(){let $=new Map;for(let Z of this.events){if(!$.has(Z.generation))$.set(Z.generation,{generation:Z.generation,collections:0,totalSize:0,objectCount:0,survivalRate:0});let J=$.get(Z.generation);if(J.collections++,J.totalSize+=Z.heapSizeAfter,Z.objectsCollected+Z.objectsSurvived>0)J.survivalRate=Z.objectsSurvived/(Z.objectsCollected+Z.objectsSurvived)}return Array.from($.values()).sort((Z,J)=>Z.generation-J.generation)}analyzeObjectLifetimes(){let $=[],Z=new Map;for(let X of this.objectLifetimes.values())if(X.collectedAt){let z=X.collectedAt-X.allocatedAt;if($.push(z),!Z.has(X.type))Z.set(X.type,[]);Z.get(X.type).push(z)}let J=$.length>0?$.reduce((X,z)=>X+z,0)/$.length:0,Y=$.length>0?$.sort((X,z)=>X-z)[Math.floor($.length/2)]:0,Q=new Map;for(let[X,z]of Z){let B=z.reduce((j,H)=>j+H,0)/z.length;Q.set(X,B)}return{averageLifetime:J,medianLifetime:Y,shortLived:$.filter((X)=>X<1000).length,longLived:$.filter((X)=>X>60000).length,typeLifetimes:Q}}detectGCPressure(){let $=this.getStatistics(),Z=this.events.slice(-10),J=$.collectionFrequency>10,Y=$.averagePauseTime>100,Q=$.heapGrowth>0&&$.heapGrowth>10485760,X=Z.filter((H)=>H.type==="minor").length>8,z=Z.filter((H)=>H.type==="major").length>2,B=[],j="low";if(J)B.push("High GC frequency"),j="high";if(Y)B.push("Long GC pause times"),j=j==="high"?"high":"medium";if(Q)B.push("Rapid heap growth"),j=j==="high"?"high":"medium";if(X)B.push("Frequent minor collections");if(z)B.push("Frequent major collections"),j="high";return{hasPressure:B.length>0,severity:j,issues:B,recommendations:this.generateRecommendations(B)}}generateRecommendations($){let Z=[];if($.includes("High GC frequency"))Z.push("Reduce object allocation rate"),Z.push("Consider object pooling for frequently allocated types");if($.includes("Long GC pause times"))Z.push("Increase heap size"),Z.push("Consider incremental GC mode");if($.includes("Rapid heap growth"))Z.push("Check for memory leaks"),Z.push("Review object retention patterns");if($.includes("Frequent major collections"))Z.push("Increase young generation size"),Z.push("Review object promotion patterns");return Z}async generateReport(){let $=this.getStatistics(),Z=this.getGenerationStats(),J=this.analyzeObjectLifetimes(),Y=this.detectGCPressure(),Q=$Z.workspace.workspaceFolders?.[0];if(!Q){$Z.window.showErrorMessage("No workspace folder open");return}let X=KK.join(Q.uri.fsPath,"ion-gc-report.html"),z=this.generateReportHTML($,Z,J,Y);if(jK.writeFileSync(X,z),this._outputChannel.appendLine(`
Report saved to ${X}`),await $Z.window.showInformationMessage("GC report generated","Open Report")==="Open Report"){let j=$Z.Uri.file(X);await $Z.commands.executeCommand("vscode.open",j)}}formatBytes($){if($===0)return"0 B";let Z=1024,J=["B","KB","MB","GB"],Y=Math.floor(Math.log($)/Math.log(Z));return`${parseFloat(($/Math.pow(Z,Y)).toFixed(2))} ${J[Y]}`}generateReportHTML($,Z,J,Y){return`
<!DOCTYPE html>
<html>
<head>
    <title>Home GC Profiler Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 { color: #333; }
        h2 { color: #666; margin-top: 30px; }
        .stat-box {
            display: inline-block;
            padding: 20px;
            margin: 10px;
            background: #f5f5f5;
            border-radius: 8px;
            min-width: 200px;
        }
        .stat-label { font-size: 12px; color: #666; }
        .stat-value { font-size: 24px; font-weight: bold; color: #333; }
        .alert {
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .alert.high { background: #ffebee; border-left: 4px solid #f44336; }
        .alert.medium { background: #fff3e0; border-left: 4px solid #ff9800; }
        .alert.low { background: #e8f5e9; border-left: 4px solid #4caf50; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th { background: #f5f5f5; }
    </style>
</head>
<body>
    <h1>Home GC Profiler Report</h1>
    <p>Generated: ${new Date().toISOString()}</p>

    ${Y.hasPressure?`
    <div class="alert ${Y.severity}">
        <h3>⚠️ GC Pressure Detected (${Y.severity})</h3>
        <ul>
            ${Y.issues.map((Q)=>`<li>${Q}</li>`).join("")}
        </ul>
        <h4>Recommendations:</h4>
        <ul>
            ${Y.recommendations.map((Q)=>`<li>${Q}</li>`).join("")}
        </ul>
    </div>
    `:'<div class="alert low"><h3>✓ No GC pressure detected</h3></div>'}

    <h2>Summary</h2>
    <div>
        <div class="stat-box">
            <div class="stat-label">Total Collections</div>
            <div class="stat-value">${$.totalCollections}</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Total Pause Time</div>
            <div class="stat-value">${$.totalPauseTime.toFixed(2)}ms</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Avg Pause Time</div>
            <div class="stat-value">${$.averagePauseTime.toFixed(2)}ms</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Max Pause Time</div>
            <div class="stat-value">${$.maxPauseTime.toFixed(2)}ms</div>
        </div>
    </div>

    <h2>Generation Statistics</h2>
    <table>
        <thead>
            <tr>
                <th>Generation</th>
                <th>Collections</th>
                <th>Survival Rate</th>
            </tr>
        </thead>
        <tbody>
            ${Z.map((Q)=>`
                <tr>
                    <td>Gen ${Q.generation}</td>
                    <td>${Q.collections}</td>
                    <td>${(Q.survivalRate*100).toFixed(1)}%</td>
                </tr>
            `).join("")}
        </tbody>
    </table>

    <h2>Object Lifetimes</h2>
    <div>
        <div class="stat-box">
            <div class="stat-label">Average Lifetime</div>
            <div class="stat-value">${(J.averageLifetime/1000).toFixed(2)}s</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Short-Lived Objects</div>
            <div class="stat-value">${J.shortLived}</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Long-Lived Objects</div>
            <div class="stat-value">${J.longLived}</div>
        </div>
    </div>
</body>
</html>
        `}dispose(){this._outputChannel.dispose()}}var ZZ=d$(require("vscode")),VK=d$(require("fs")),WK=d$(require("path"));class w4{allocations=new Map;allocationHistory=[];snapshots=[];_outputChannel;_isRunning=!1;_startTime=0;_peakUsage=0;constructor(){this._outputChannel=ZZ.window.createOutputChannel("Home Memory Profiler")}start(){if(this._isRunning){ZZ.window.showWarningMessage("Memory profiler is already running");return}this._isRunning=!0,this._startTime=Date.now(),this.allocations.clear(),this.allocationHistory=[],this.snapshots=[],this._peakUsage=0,this._outputChannel.clear(),this._outputChannel.appendLine("Memory profiler started"),this._outputChannel.show()}stop(){if(!this._isRunning)return ZZ.window.showWarningMessage("Memory profiler is not running"),this.getStatistics();this._isRunning=!1;let $=this.getStatistics();if(this._outputChannel.appendLine(`
Memory profiling stopped`),this._outputChannel.appendLine(`Duration: ${Date.now()-this._startTime}ms`),this._outputChannel.appendLine(`Total allocations: ${$.totalAllocations}`),this._outputChannel.appendLine(`Total deallocations: ${$.totalDeallocations}`),this._outputChannel.appendLine(`Current allocations: ${$.currentAllocations}`),this._outputChannel.appendLine(`Peak memory usage: ${this.formatBytes($.peakMemoryUsage)}`),$.leaks.length>0)this._outputChannel.appendLine(`
⚠️  Potential memory leaks detected: ${$.leaks.length}`);return $}recordAllocation($,Z,J,Y){if(!this._isRunning)return;let Q={address:$,size:Z,type:J,timestamp:Date.now(),stackTrace:Y,freed:!1};this.allocations.set($,Q),this.allocationHistory.push(Q);let X=this.getCurrentUsage();if(X>this._peakUsage)this._peakUsage=X;this._outputChannel.appendLine(`[ALLOC] ${$} ${this.formatBytes(Z)} ${J}`)}recordDeallocation($){if(!this._isRunning)return;let Z=this.allocations.get($);if(Z)Z.freed=!0,Z.freedAt=Date.now(),this.allocations.delete($),this._outputChannel.appendLine(`[FREE]  ${$} ${this.formatBytes(Z.size)}`);else this._outputChannel.appendLine(`[WARN]  Attempted to free unknown address: ${$}`)}takeSnapshot(){let $=Array.from(this.allocations.values()),Z=this.allocationHistory.reduce((Q,X)=>Q+X.size,0),J=this.allocationHistory.filter((Q)=>Q.freed).reduce((Q,X)=>Q+X.size,0),Y={timestamp:Date.now(),totalAllocated:Z,totalFreed:J,currentUsage:this.getCurrentUsage(),allocations:$,fragmentation:this.calculateFragmentation()};return this.snapshots.push(Y),Y}compareSnapshots($,Z){let J=new Set($.allocations.map((z)=>z.address)),Y=new Set(Z.allocations.map((z)=>z.address)),Q=Z.allocations.filter((z)=>!J.has(z.address)),X=$.allocations.filter((z)=>!Y.has(z.address));return{timeDelta:Z.timestamp-$.timestamp,usageDelta:Z.currentUsage-$.currentUsage,newAllocations:Q,freedAllocations:X,newAllocationCount:Q.length,freedAllocationCount:X.length,netAllocationCount:Q.length-X.length}}detectLeaks(){let $=Date.now(),Z=[];for(let J of this.allocations.values()){let Y=$-J.timestamp,Q="low",X="";if(Y>60000)Q="high",X="Long-lived allocation (>1 minute)";else if(Y>30000)Q="medium",X="Moderately long-lived allocation (>30 seconds)";else if(J.size>1048576)Q="medium",X="Large allocation (>1MB)";if(Q!=="low")Z.push({allocation:J,age:Y,suspicionLevel:Q,reason:X})}return Z.sort((J,Y)=>{let Q={high:3,medium:2,low:1};return Q[Y.suspicionLevel]-Q[J.suspicionLevel]})}getStatistics(){let $=new Map;for(let J of this.allocationHistory){let Y=$.get(J.type)||0;$.set(J.type,Y+1)}let Z=this.allocationHistory.reduce((J,Y)=>J+Y.size,0);return{totalAllocations:this.allocationHistory.length,totalDeallocations:this.allocationHistory.filter((J)=>J.freed).length,currentAllocations:this.allocations.size,peakMemoryUsage:this._peakUsage,averageAllocationSize:this.allocationHistory.length>0?Z/this.allocationHistory.length:0,allocationsByType:$,leaks:this.detectLeaks()}}async generateReport(){let $=this.getStatistics(),Z=ZZ.workspace.workspaceFolders?.[0];if(!Z){ZZ.window.showErrorMessage("No workspace folder open");return}let J=WK.join(Z.uri.fsPath,"ion-memory-report.html"),Y=this.generateReportHTML($);if(VK.writeFileSync(J,Y),this._outputChannel.appendLine(`
Report saved to ${J}`),await ZZ.window.showInformationMessage("Memory report generated","Open Report")==="Open Report"){let X=ZZ.Uri.file(J);await ZZ.commands.executeCommand("vscode.open",X)}}getCurrentUsage(){return Array.from(this.allocations.values()).reduce(($,Z)=>$+Z.size,0)}calculateFragmentation(){let $=Array.from(this.allocations.values());if($.length===0)return 0;let Z=$.map((Y)=>Y.size).sort((Y,Q)=>Y-Q),J=Z.reduce((Y,Q)=>{let X=this.getCurrentUsage()/Z.length;return Y+Math.pow(Q-X,2)},0)/Z.length;return Math.sqrt(J)/(this.getCurrentUsage()/Z.length)}formatBytes($){if($===0)return"0 B";let Z=1024,J=["B","KB","MB","GB","TB"],Y=Math.floor(Math.log($)/Math.log(Z));return`${parseFloat(($/Math.pow(Z,Y)).toFixed(2))} ${J[Y]}`}generateReportHTML($){let Z=Array.from($.allocationsByType.entries()).map(([Y,Q])=>`<tr><td>${Y}</td><td>${Q}</td></tr>`).join(""),J=$.leaks.map((Y)=>`
                <tr class="${Y.suspicionLevel}">
                    <td>${Y.allocation.address}</td>
                    <td>${this.formatBytes(Y.allocation.size)}</td>
                    <td>${Y.allocation.type}</td>
                    <td>${(Y.age/1000).toFixed(2)}s</td>
                    <td>${Y.suspicionLevel}</td>
                    <td>${Y.reason}</td>
                </tr>
            `).join("");return`
<!DOCTYPE html>
<html>
<head>
    <title>Home Memory Profiler Report</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 { color: #333; }
        h2 { color: #666; margin-top: 30px; }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        tr:hover { background-color: #f5f5f5; }
        .high { background-color: #ffebee; }
        .medium { background-color: #fff3e0; }
        .low { background-color: #f1f8e9; }
        .stat-box {
            display: inline-block;
            padding: 20px;
            margin: 10px;
            background: #f5f5f5;
            border-radius: 8px;
            min-width: 200px;
        }
        .stat-label { font-size: 12px; color: #666; }
        .stat-value { font-size: 24px; font-weight: bold; color: #333; }
    </style>
</head>
<body>
    <h1>Home Memory Profiler Report</h1>
    <p>Generated: ${new Date().toISOString()}</p>

    <h2>Summary</h2>
    <div>
        <div class="stat-box">
            <div class="stat-label">Total Allocations</div>
            <div class="stat-value">${$.totalAllocations}</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Total Deallocations</div>
            <div class="stat-value">${$.totalDeallocations}</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Current Allocations</div>
            <div class="stat-value">${$.currentAllocations}</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Peak Memory Usage</div>
            <div class="stat-value">${this.formatBytes($.peakMemoryUsage)}</div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Avg Allocation Size</div>
            <div class="stat-value">${this.formatBytes($.averageAllocationSize)}</div>
        </div>
    </div>

    <h2>Allocations by Type</h2>
    <table>
        <thead>
            <tr>
                <th>Type</th>
                <th>Count</th>
            </tr>
        </thead>
        <tbody>
            ${Z}
        </tbody>
    </table>

    <h2>Potential Memory Leaks</h2>
    ${$.leaks.length>0?`
        <table>
            <thead>
                <tr>
                    <th>Address</th>
                    <th>Size</th>
                    <th>Type</th>
                    <th>Age</th>
                    <th>Suspicion</th>
                    <th>Reason</th>
                </tr>
            </thead>
            <tbody>
                ${J}
            </tbody>
        </table>
    `:"<p>No memory leaks detected!</p>"}
</body>
</html>
        `}dispose(){this._outputChannel.dispose()}}class N4{threads=new Map;syncEvents=[];resourceOwners=new Map;threadWaiting=new Map;detectedDeadlocks=[];detectedRaces=[];registerThread($,Z,J="running"){this.threads.set($,{id:$,name:Z,state:J,stackFrames:[],currentLine:0,currentFile:""})}updateThreadState($,Z){let J=this.threads.get($);if(J)J.state=Z}updateThreadStack($,Z){let J=this.threads.get($);if(J){if(J.stackFrames=Z,Z.length>0)J.currentFile=Z[0].file,J.currentLine=Z[0].line}}getAllThreads(){return Array.from(this.threads.values())}getActiveThreads(){return Array.from(this.threads.values()).filter(($)=>$.state==="running"||$.state==="stopped")}recordSyncEvent($,Z,J,Y){let Q={timestamp:Date.now(),type:$,threadId:Z,resourceId:J,stackTrace:Y};if(this.syncEvents.push(Q),$==="lock")this.resourceOwners.set(J,Z),this.threadWaiting.delete(Z);else if($==="unlock")this.resourceOwners.delete(J);else if($==="wait")this.threadWaiting.set(Z,J),this.updateThreadState(Z,"waiting");if($==="lock"||$==="wait")this.detectDeadlocks()}detectDeadlocks(){let $=this.buildWaitGraph(),Z=this.findCycles($);for(let J of Z)if(J.length>1){let Y=this.analyzeDeadlock(J);if(Y)this.detectedDeadlocks.push(Y)}}buildWaitGraph(){let $=new Map;for(let[Z,J]of this.threadWaiting){let Y=this.resourceOwners.get(J);if(Y!==void 0){if(!$.has(Z))$.set(Z,[]);$.get(Z).push(Y)}}return $}findCycles($){let Z=[],J=new Set,Y=new Set,Q=(X,z)=>{J.add(X),Y.add(X),z.push(X);let B=$.get(X)||[];for(let j of B)if(!J.has(j))Q(j,[...z]);else if(Y.has(j)){let H=z.indexOf(j);if(H!==-1)Z.push(z.slice(H))}Y.delete(X)};for(let X of $.keys())if(!J.has(X))Q(X,[]);return Z}analyzeDeadlock($){let Z=[];for(let J=0;J<$.length;J++){let Y=$[J],Q=$[(J+1)%$.length],X=this.threadWaiting.get(Y);if(!X)continue;let z=Array.from(this.resourceOwners.entries()).find(([B,j])=>j===Y)?.[0];if(z)Z.push({threadId:Y,holdsResource:z,waitsForResource:X,blockedByThread:Q})}if(Z.length===0)return null;return{detectedAt:Date.now(),threads:$,resources:Z.map((J)=>J.holdsResource),description:this.generateDeadlockDescription(Z),cycle:Z}}generateDeadlockDescription($){return $.map((J)=>`Thread ${J.threadId} holds ${J.holdsResource} and waits for ${J.waitsForResource}`).join(", ")}getDeadlocks(){return this.detectedDeadlocks}detectRaceCondition($,Z,J,Y){let Q=this.findRecentAccessToVariable($,Z);if(Q&&(J==="write"||Q.operation==="write")){let X={timestamp:Date.now(),variable:$,thread1:{id:Q.threadId,operation:Q.operation,stackTrace:Q.stackTrace},thread2:{id:Z,operation:J,stackTrace:Y}};this.detectedRaces.push(X)}}findRecentAccessToVariable($,Z){return null}getRaceConditions(){return this.detectedRaces}getSyncTimeline(){return this.syncEvents.sort(($,Z)=>$.timestamp-Z.timestamp)}getThreadSyncEvents($){return this.syncEvents.filter((Z)=>Z.threadId===$)}getResourceContention(){let $=new Map;for(let Z of this.syncEvents){if(!$.has(Z.resourceId))$.set(Z.resourceId,{resourceId:Z.resourceId,lockAttempts:0,lockAcquired:0,contentionEvents:0,averageWaitTime:0,maxWaitTime:0});let J=$.get(Z.resourceId);if(Z.type==="lock")J.lockAttempts++,J.lockAcquired++;else if(Z.type==="wait")J.contentionEvents++}return $}clear(){this.threads.clear(),this.syncEvents=[],this.resourceOwners.clear(),this.threadWaiting.clear(),this.detectedDeadlocks=[],this.detectedRaces=[]}}class L4{snapshots=[];currentSnapshotIndex=-1;maxSnapshots=1e4;recordingEnabled=!0;recordSnapshot($){if(!this.recordingEnabled)return;if(this.currentSnapshotIndex<this.snapshots.length-1)this.snapshots=this.snapshots.slice(0,this.currentSnapshotIndex+1);if(this.snapshots.push($),this.currentSnapshotIndex=this.snapshots.length-1,this.snapshots.length>this.maxSnapshots)this.snapshots.shift(),this.currentSnapshotIndex--}stepBack(){if(this.currentSnapshotIndex<=0)return null;return this.currentSnapshotIndex--,this.snapshots[this.currentSnapshotIndex]}stepForward(){if(this.currentSnapshotIndex>=this.snapshots.length-1)return null;return this.currentSnapshotIndex++,this.snapshots[this.currentSnapshotIndex]}reverseExecute(){for(let $=this.currentSnapshotIndex-1;$>=0;$--)if(this.isAtBreakpoint(this.snapshots[$]))return this.currentSnapshotIndex=$,this.snapshots[$];if(this.snapshots.length>0)return this.currentSnapshotIndex=0,this.snapshots[0];return null}getCurrentSnapshot(){if(this.currentSnapshotIndex<0||this.currentSnapshotIndex>=this.snapshots.length)return null;return this.snapshots[this.currentSnapshotIndex]}getSnapshotBySequence($){return this.snapshots.find((Z)=>Z.sequenceNumber===$)||null}getSnapshotRange($,Z){return this.snapshots.filter((J)=>J.sequenceNumber>=$&&J.sequenceNumber<=Z)}compareSnapshots($,Z){let J={variableChanges:[],heapChanges:[],stackChanges:[],registerChanges:[]};Z.variables.forEach((X)=>{let z=$.variables.find((B)=>B.name===X.name);if(!z||z.value!==X.value)J.variableChanges.push({name:X.name,oldValue:z?.value||"undefined",newValue:X.value})});let Y=new Set($.heap.allocations.map((X)=>X.address)),Q=new Set(Z.heap.allocations.map((X)=>X.address));if(Z.heap.allocations.forEach((X)=>{if(!Y.has(X.address))J.heapChanges.push({type:"allocation",address:X.address,size:X.size})}),$.heap.allocations.forEach((X)=>{if(!Q.has(X.address))J.heapChanges.push({type:"deallocation",address:X.address,size:X.size})}),$.stackFrames.length!==Z.stackFrames.length)J.stackChanges.push({type:Z.stackFrames.length>$.stackFrames.length?"push":"pop",depth:Math.abs(Z.stackFrames.length-$.stackFrames.length)});if($.registers.pc!==Z.registers.pc)J.registerChanges.push({register:"pc",oldValue:$.registers.pc,newValue:Z.registers.pc});return J}clearHistory(){this.snapshots=[],this.currentSnapshotIndex=-1}getTimeline(){return this.snapshots.map(($,Z)=>({sequenceNumber:$.sequenceNumber,timestamp:$.timestamp,line:$.stackFrames[0]?.line||0,source:$.stackFrames[0]?.source||"",isCurrent:Z===this.currentSnapshotIndex,isBreakpoint:this.isAtBreakpoint($)}))}setRecording($){this.recordingEnabled=$}getStatistics(){let $=this.snapshots.reduce((Z,J)=>Z+J.heap.totalSize,0);return{totalSnapshots:this.snapshots.length,currentPosition:this.currentSnapshotIndex,memoryUsage:$,timeRange:{start:this.snapshots[0]?.timestamp||0,end:this.snapshots[this.snapshots.length-1]?.timestamp||0},canStepBack:this.currentSnapshotIndex>0,canStepForward:this.currentSnapshotIndex<this.snapshots.length-1}}exportHistory(){return JSON.stringify({version:"1.0",snapshots:this.snapshots,currentIndex:this.currentSnapshotIndex,exportedAt:new Date().toISOString()},null,2)}importHistory($){try{let Z=JSON.parse($);if(Z.version!=="1.0")return!1;return this.snapshots=Z.snapshots,this.currentSnapshotIndex=Z.currentIndex,!0}catch(Z){return!1}}isAtBreakpoint($){return!1}}var m8=d$(require("vscode")),HK=["namespace","class","enum","interface","struct","typeParameter","type","parameter","variable","property","enumMember","function","method","macro","keyword","modifier","comment","string","number","regexp","operator"],AK=["declaration","definition","readonly","static","deprecated","abstract","async","modification","documentation","defaultLibrary"],F4=new m8.SemanticTokensLegend(HK,AK);class P4{async provideDocumentSemanticTokens($,Z){let J=new m8.SemanticTokensBuilder(F4);for(let Y=0;Y<$.lineCount;Y++){let Q=$.lineAt(Y);this.parseLineForTokens(Q,J)}return J.build()}parseLineForTokens($,Z){let J=$.text,Y=/\b(fn)\s+([a-zA-Z_][a-zA-Z0-9_]*)/g,Q;while((Q=Y.exec(J))!==null)Z.push($.lineNumber,Q.index,Q[1].length,this.getTokenType("keyword"),0),Z.push($.lineNumber,Q.index+Q[1].length+1,Q[2].length,this.getTokenType("function"),this.getTokenModifier("declaration"));let X=/\b(struct|enum|union|trait)\s+([A-Z][a-zA-Z0-9_]*)/g;while((Q=X.exec(J))!==null)Z.push($.lineNumber,Q.index+Q[1].length+1,Q[2].length,this.getTokenType("struct"),this.getTokenModifier("declaration"));let z=/:\s*([A-Z][a-zA-Z0-9_]*)/g;while((Q=z.exec(J))!==null)Z.push($.lineNumber,Q.index+Q[0].indexOf(Q[1]),Q[1].length,this.getTokenType("type"),0);let B=/\(([^)]*)\)/g;while((Q=B.exec(J))!==null){let U=Q[1],E=/([a-zA-Z_][a-zA-Z0-9_]*)\s*:/g,T,C=Q.index+1;while((T=E.exec(U))!==null)Z.push($.lineNumber,C+T.index,T[1].length,this.getTokenType("parameter"),0)}let j=/@([a-zA-Z_][a-zA-Z0-9_]*)/g;while((Q=j.exec(J))!==null)Z.push($.lineNumber,Q.index,Q[0].length,this.getTokenType("macro"),0);let H=/\b(async|await)\b/g;while((Q=H.exec(J))!==null)Z.push($.lineNumber,Q.index,Q[1].length,this.getTokenType("keyword"),this.getTokenModifier("async"));let O=/\b(let|const)(\s+mut)?\s+([a-zA-Z_][a-zA-Z0-9_]*)/g;while((Q=O.exec(J))!==null){let U=Q[3],E=Q.index+Q[1].length+(Q[2]?Q[2].length:0)+1,T=Q[1]==="const"?this.getTokenModifier("readonly"):Q[2]?0:this.getTokenModifier("readonly");Z.push($.lineNumber,E,U.length,this.getTokenType("variable"),T)}let N=/\b([A-Z][a-zA-Z0-9_]*)::([A-Z][a-zA-Z0-9_]*)/g;while((Q=N.exec(J))!==null)Z.push($.lineNumber,Q.index+Q[1].length+2,Q[2].length,this.getTokenType("enumMember"),0)}getTokenType($){let Z=HK.indexOf($);return Z>=0?Z:0}getTokenModifier(...$){let Z=0;for(let J of $){let Y=AK.indexOf(J);if(Y>=0)Z|=1<<Y}return Z}}var G$=d$(require("vscode"));class u8{static providedCodeActionKinds=[G$.CodeActionKind.QuickFix,G$.CodeActionKind.Refactor,G$.CodeActionKind.RefactorExtract,G$.CodeActionKind.RefactorInline,G$.CodeActionKind.RefactorRewrite,G$.CodeActionKind.Source];provideCodeActions($,Z,J,Y){let Q=[];return Q.push(...this.createAddImportActions($,Z,J)),Q.push(...this.createAddErrorHandlingActions($,Z,J)),Q.push(...this.createConvertToAsyncActions($,Z)),Q.push(...this.createExtractFunctionActions($,Z)),Q.push(...this.createExtractVariableActions($,Z)),Q.push(...this.createImplementTraitActions($,Z)),Q.push(...this.createAddTestActions($,Z)),Q.push(...this.createOrganizeImportsActions($)),Q}createAddImportActions($,Z,J){let Y=[];for(let Q of J.diagnostics)if(Q.message.includes("undefined")||Q.message.includes("not found")){let X=new G$.CodeAction("Add missing import",G$.CodeActionKind.QuickFix);X.diagnostics=[Q],X.isPreferred=!0,X.edit=new G$.WorkspaceEdit;let z="import "+this.extractIdentifier(Q.message)+`
`;X.edit.insert($.uri,new G$.Position(0,0),z),Y.push(X)}return Y}createAddErrorHandlingActions($,Z,J){let Y=[],Q=$.lineAt(Z.start.line);if(Q.text.match(/=\s*[a-zA-Z_][a-zA-Z0-9_]*\([^)]*\)/)){let X=new G$.CodeAction("Wrap in try-catch",G$.CodeActionKind.QuickFix);X.edit=new G$.WorkspaceEdit;let z=Q.text.match(/^\s*/)?.[0]||"",B=`${z}try {
${Q.text}
${z}} catch (e) {
${z}    // Handle error
${z}}`;X.edit.replace($.uri,Q.range,B),Y.push(X)}return Y}createConvertToAsyncActions($,Z){let J=[],Y=$.lineAt(Z.start.line);if(Y.text.match(/^(\s*)fn\s+([a-zA-Z_][a-zA-Z0-9_]*)/)&&!Y.text.includes("async")){let X=new G$.CodeAction("Convert to async function",G$.CodeActionKind.Refactor);X.edit=new G$.WorkspaceEdit;let z=Y.text.replace(/\bfn\b/,"async fn");X.edit.replace($.uri,Y.range,z),J.push(X)}return J}createExtractFunctionActions($,Z){let J=[];if(Z.start.line<Z.end.line){let Y=new G$.CodeAction("Extract to function",G$.CodeActionKind.RefactorExtract);Y.edit=new G$.WorkspaceEdit;let Q=$.getText(Z),X=$.lineAt(Z.start.line).text.match(/^\s*/)?.[0]||"";Y.edit.replace($.uri,Z,`${X}extracted_function()`);let z=`
${X}fn extracted_function() {
${Q}
${X}}
`;Y.edit.insert($.uri,new G$.Position(Z.end.line+1,0),z),J.push(Y)}return J}createExtractVariableActions($,Z){let J=[];if(!Z.isEmpty){let Y=new G$.CodeAction("Extract to variable",G$.CodeActionKind.RefactorExtract);Y.edit=new G$.WorkspaceEdit;let Q=$.getText(Z),X=$.lineAt(Z.start.line).text.match(/^\s*/)?.[0]||"";Y.edit.replace($.uri,Z,"extracted_value");let z=`${X}let extracted_value = ${Q}
`;Y.edit.insert($.uri,new G$.Position(Z.start.line,0),z),J.push(Y)}return J}createImplementTraitActions($,Z){let J=[],Q=$.lineAt(Z.start.line).text.match(/^(\s*)(struct|enum)\s+([A-Z][a-zA-Z0-9_]*)/);if(Q){let X=new G$.CodeAction(`Generate trait implementation for ${Q[3]}`,G$.CodeActionKind.Source);X.edit=new G$.WorkspaceEdit;let z=Q[1],B=Q[3],j=`
${z}impl TraitName for ${B} {
${z}    fn method(&self) -> void {
${z}        // TODO: Implementation
${z}    }
${z}}
`,H=this.findClosingBrace($,Z.start.line);if(H!==-1)X.edit.insert($.uri,new G$.Position(H+1,0),j);J.push(X)}return J}createAddTestActions($,Z){let J=[],Y=$.lineAt(Z.start.line),Q=Y.text.match(/^(\s*)fn\s+([a-zA-Z_][a-zA-Z0-9_]*)/);if(Q&&!Y.text.includes("@test")){let X=new G$.CodeAction("Generate test for this function",G$.CodeActionKind.Source);X.edit=new G$.WorkspaceEdit;let z=Q[1],B=Q[2],j=`
${z}@test fn test_${B}() {
${z}    // Arrange
${z}    
${z}    // Act
${z}    let result = ${B}()
${z}    
${z}    // Assert
${z}    assert(true, "Test ${B}")
${z}}
`,H=this.findClosingBrace($,Z.start.line);if(H!==-1)X.edit.insert($.uri,new G$.Position(H+1,0),j);J.push(X)}return J}createOrganizeImportsActions($){let Z=[],J=new G$.CodeAction("Organize imports",G$.CodeActionKind.SourceOrganizeImports);J.edit=new G$.WorkspaceEdit;let Y=[],Q=[];for(let X=0;X<$.lineCount;X++){let z=$.lineAt(X);if(z.text.match(/^import\s+/))Y.push(z.text),Q.push(z.range)}if(Y.length>0){let X=[...Y].sort();for(let z=0;z<Q.length;z++)J.edit.replace($.uri,Q[z],X[z]);Z.push(J)}return Z}findClosingBrace($,Z){let J=0,Y=!1;for(let Q=Z;Q<$.lineCount;Q++){let X=$.lineAt(Q).text;for(let z of X)if(z==="{")J++,Y=!0;else if(z==="}"){if(J--,Y&&J===0)return Q}}return-1}extractIdentifier($){let Z=$.match(/['"`]([a-zA-Z_][a-zA-Z0-9_]*)['"`]/);return Z?Z[1]:"module"}}var D0=d$(require("vscode"));class M4{provideInlayHints($,Z,J){let Y=[];for(let Q=Z.start.line;Q<=Z.end.line;Q++){let X=$.lineAt(Q),z=X.text;Y.push(...this.provideTypeHints(X,z)),Y.push(...this.provideParameterHints(X,z)),Y.push(...this.provideReturnTypeHints(X,z)),Y.push(...this.provideClosureTypeHints(X,z))}return Y}provideTypeHints($,Z){let J=[],Y=/\b(let|const)\s+(mut\s+)?([a-zA-Z_][a-zA-Z0-9_]*)\s*=\s*([^;\n]+)/g,Q;while((Q=Y.exec(Z))!==null){let X=Q[3],z=Q[4].trim(),B=this.inferType(z);if(B){let j=new D0.Position($.lineNumber,Q.index+Q[1].length+(Q[2]?.length||0)+1+X.length),H=new D0.InlayHint(j,`: ${B}`,D0.InlayHintKind.Type);H.paddingLeft=!1,H.paddingRight=!1,J.push(H)}}return J}provideParameterHints($,Z){let J=[],Y=/([a-zA-Z_][a-zA-Z0-9_]*)\s*\(([^)]+)\)/g,Q;while((Q=Y.exec(Z))!==null){let X=Q[1],B=Q[2].split(",").map((H)=>H.trim()),j=Q.index+X.length+1;B.forEach((H,O)=>{if(!H.includes(":")&&!H.match(/^["'`]/)){let N=new D0.Position($.lineNumber,j),U=new D0.InlayHint(N,`param${O}: `,D0.InlayHintKind.Parameter);U.paddingLeft=!1,U.paddingRight=!1,J.push(U)}j+=H.length+2})}return J}provideReturnTypeHints($,Z){let J=[],Q=/\bfn\s+([a-zA-Z_][a-zA-Z0-9_]*)\s*(<[^>]+>)?\s*\(([^)]*)\)\s*\{/.exec(Z);if(Q&&!Z.includes("->")){let X=Z.indexOf(")",Q.index);if(X!==-1){let z=new D0.Position($.lineNumber,X+1),B=new D0.InlayHint(z," -> void",D0.InlayHintKind.Type);B.paddingLeft=!0,B.paddingRight=!1,J.push(B)}}return J}provideClosureTypeHints($,Z){let J=[],Y=/\|([^|]+)\|/g,Q;while((Q=Y.exec(Z))!==null)Q[1].split(",").map((B)=>B.trim()).forEach((B)=>{if(!B.includes(":")){let j=Q.index+1+Q[1].indexOf(B)+B.length,H=new D0.Position($.lineNumber,j),O=new D0.InlayHint(H,": T",D0.InlayHintKind.Type);O.paddingLeft=!1,O.paddingRight=!1,J.push(O)}});return J}inferType($){if(/^\d+$/.test($))return"i32";if(/^\d+\.\d+$/.test($))return"f64";if($==="true"||$==="false")return"bool";if(/^["']/.test($))return"string";if(/^\[/.test($))return"Array<T>";if(/^\w+\s*\{/.test($)){let Z=$.match(/^(\w+)\s*\{/);return Z?Z[1]:null}return null}}var i$=d$(require("vscode"));class I4{_onDidChangeCodeLenses=new i$.EventEmitter;onDidChangeCodeLenses=this._onDidChangeCodeLenses.event;provideCodeLenses($,Z){let J=[];for(let Y=0;Y<$.lineCount;Y++){let Q=$.lineAt(Y),X=Q.text,z=/^\s*@test\s+fn\s+([a-zA-Z_][a-zA-Z0-9_]*)/;if(z.test(X))J.push(...this.createTestCodeLenses($,Q,Y));if(/^\s*(?:pub\s+)?fn\s+([a-zA-Z_][a-zA-Z0-9_]*)/.test(X)&&!z.test(X))J.push(...this.createFunctionCodeLenses($,Q,Y));if(X.match(/^\s*fn\s+main\s*\(/))J.push(...this.createMainCodeLenses($,Q,Y));if(X.match(/^\s*impl\s+\w+\s+for\s+\w+/))J.push(...this.createImplCodeLenses($,Q,Y))}return J}resolveCodeLens($,Z){return $}createTestCodeLenses($,Z,J){let Y=[],Q=new i$.Range(J,0,J,Z.text.length),X=Z.text.match(/@test\s+fn\s+([a-zA-Z_][a-zA-Z0-9_]*)/);if(!X)return Y;let z=X[1];return Y.push(new i$.CodeLens(Q,{title:"▶ Run Test",command:"home.runTest",arguments:[$.uri.fsPath,z]})),Y.push(new i$.CodeLens(Q,{title:"\uD83D\uDC1B Debug Test",command:"home.debugTest",arguments:[$.uri.fsPath,z]})),Y}createFunctionCodeLenses($,Z,J){let Y=[],Q=new i$.Range(J,0,J,Z.text.length);return Y.push(new i$.CodeLens(Q,{title:"$(references) 0 references",command:"editor.action.showReferences",arguments:[$.uri,Q.start,[]]})),Y.push(new i$.CodeLens(Q,{title:"$(beaker) Generate Test",command:"home.generateTest",arguments:[$.uri,J]})),Y}createMainCodeLenses($,Z,J){let Y=[],Q=new i$.Range(J,0,J,Z.text.length);return Y.push(new i$.CodeLens(Q,{title:"▶ Run Program",command:"home.run",arguments:[]})),Y.push(new i$.CodeLens(Q,{title:"\uD83D\uDC1B Debug Program",command:"home.debugProgram",arguments:[$.uri.fsPath]})),Y.push(new i$.CodeLens(Q,{title:"\uD83D\uDD28 Build",command:"home.build",arguments:[]})),Y}createImplCodeLenses($,Z,J){let Y=[],Q=new i$.Range(J,0,J,Z.text.length);return Y.push(new i$.CodeLens(Q,{title:"$(symbol-interface) Go to Trait",command:"editor.action.goToTypeDefinition",arguments:[]})),Y.push(new i$.CodeLens(Q,{title:"$(symbol-method) Find Implementations",command:"editor.action.findImplementation",arguments:[]})),Y}refresh(){this._onDidChangeCodeLenses.fire()}}var B$=d$(require("vscode"));class OK{async provideWorkspaceSymbols($,Z){let J=[],Y=await B$.workspace.findFiles("**/*.{home,hm}","**/node_modules/**");for(let Q of Y){if(Z.isCancellationRequested)break;let X=await B$.workspace.openTextDocument(Q),z=await this.extractSymbols(X,$);J.push(...z)}return J}async extractSymbols($,Z){let J=[],Y=Z.toLowerCase();for(let Q=0;Q<$.lineCount;Q++){let z=$.lineAt(Q).text,B=z.match(/^\s*(?:pub\s+)?fn\s+([a-zA-Z_][a-zA-Z0-9_]*)/);if(B&&B[1].toLowerCase().includes(Y)){let E=new B$.Range(Q,0,Q,z.length);J.push(new B$.SymbolInformation(B[1],B$.SymbolKind.Function,"",new B$.Location($.uri,E)))}let j=z.match(/^\s*(?:pub\s+)?struct\s+([A-Z][a-zA-Z0-9_]*)/);if(j&&j[1].toLowerCase().includes(Y)){let E=new B$.Range(Q,0,Q,z.length);J.push(new B$.SymbolInformation(j[1],B$.SymbolKind.Struct,"",new B$.Location($.uri,E)))}let H=z.match(/^\s*(?:pub\s+)?enum\s+([A-Z][a-zA-Z0-9_]*)/);if(H&&H[1].toLowerCase().includes(Y)){let E=new B$.Range(Q,0,Q,z.length);J.push(new B$.SymbolInformation(H[1],B$.SymbolKind.Enum,"",new B$.Location($.uri,E)))}let O=z.match(/^\s*(?:pub\s+)?trait\s+([A-Z][a-zA-Z0-9_]*)/);if(O&&O[1].toLowerCase().includes(Y)){let E=new B$.Range(Q,0,Q,z.length);J.push(new B$.SymbolInformation(O[1],B$.SymbolKind.Interface,"",new B$.Location($.uri,E)))}let N=z.match(/^\s*(?:pub\s+)?type\s+([A-Z][a-zA-Z0-9_]*)/);if(N&&N[1].toLowerCase().includes(Y)){let E=new B$.Range(Q,0,Q,z.length);J.push(new B$.SymbolInformation(N[1],B$.SymbolKind.TypeParameter,"",new B$.Location($.uri,E)))}let U=z.match(/^\s*(?:pub\s+)?const\s+([A-Z_][A-Z0-9_]*)/);if(U&&U[1].toLowerCase().includes(Y)){let E=new B$.Range(Q,0,Q,z.length);J.push(new B$.SymbolInformation(U[1],B$.SymbolKind.Constant,"",new B$.Location($.uri,E)))}}return J}}class EK{prepareRename($,Z,J){let Y=$.getWordRangeAtPosition(Z);if(!Y)return null;let Q=$.getText(Y);if(["fn","let","const","struct","enum","trait","impl","if","else","while","for","match"].includes(Q))throw Error("Cannot rename keyword");return{range:Y,placeholder:Q}}async provideRenameEdits($,Z,J,Y){let Q=$.getWordRangeAtPosition(Z);if(!Q)return new B$.WorkspaceEdit;let X=$.getText(Q),z=new B$.WorkspaceEdit,B=await B$.workspace.findFiles("**/*.{home,hm}","**/node_modules/**");for(let j of B){if(Y.isCancellationRequested)break;let H=await B$.workspace.openTextDocument(j),O=H.getText(),N=new RegExp(`\\b${this.escapeRegex(X)}\\b`,"g"),U;while((U=N.exec(O))!==null){let E=H.positionAt(U.index),T=H.positionAt(U.index+X.length),C=new B$.Range(E,T);z.replace(j,C,J)}}return z}escapeRegex($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}function UK($){$.subscriptions.push(B$.languages.registerWorkspaceSymbolProvider(new OK)),$.subscriptions.push(B$.languages.registerRenameProvider({language:"home"},new EK))}var NJ,k9,N9,L9,oZ,IZ,wJ,v9,T4;function TO($){console.log("Home language extension is now active"),T4=$,k9=new W4,N9=new H4,L9=new E4,oZ=new U4,IZ=new w4,wJ=new N4,v9=new L4,$.subscriptions.push(f.commands.registerCommand("ion.restartServer",CO),f.commands.registerCommand("ion.run",SO),f.commands.registerCommand("ion.build",DO),f.commands.registerCommand("ion.check",bO),f.commands.registerCommand("ion.test",RO),f.commands.registerCommand("ion.format",yO),f.commands.registerCommand("ion.profiler.start",()=>k9.start()),f.commands.registerCommand("ion.profiler.stop",()=>k9.stop()),f.commands.registerCommand("ion.profiler.viewReport",()=>k9.viewReport()),f.commands.registerCommand("ion.cpu.start",()=>L9.start()),f.commands.registerCommand("ion.cpu.stop",()=>L9.stop()),f.commands.registerCommand("ion.cpu.flamegraph",()=>L9.generateFlameGraphHTML()),f.commands.registerCommand("ion.cpu.exportChrome",()=>L9.saveChromeProfile()),f.commands.registerCommand("ion.gc.start",()=>oZ.start()),f.commands.registerCommand("ion.gc.stop",()=>oZ.stop()),f.commands.registerCommand("ion.gc.report",()=>oZ.generateReport()),f.commands.registerCommand("ion.gc.analyzePressure",()=>{let J=oZ.detectGCPressure();if(J.hasPressure)f.window.showWarningMessage(`GC Pressure Detected (${J.severity}): ${J.issues.join(", ")}`,"View Recommendations").then((Y)=>{if(Y==="View Recommendations")oZ.generateReport()});else f.window.showInformationMessage("No GC pressure detected")}),f.commands.registerCommand("ion.memory.start",()=>IZ.start()),f.commands.registerCommand("ion.memory.stop",()=>{let J=IZ.stop();if(J.leaks.length>0)f.window.showWarningMessage(`Memory profiling stopped. ${J.leaks.length} potential leaks detected.`,"View Report").then((Y)=>{if(Y==="View Report")IZ.generateReport()});else f.window.showInformationMessage("Memory profiling stopped. No leaks detected.")}),f.commands.registerCommand("ion.memory.snapshot",()=>{let J=IZ.takeSnapshot();f.window.showInformationMessage(`Snapshot taken: ${J.allocations.length} allocations, ${(J.currentUsage/1024/1024).toFixed(2)} MB`)}),f.commands.registerCommand("ion.memory.findLeaks",()=>{let J=IZ.detectLeaks();if(J.length>0)f.window.showWarningMessage(`Found ${J.length} potential memory leaks`,"View Details").then((Y)=>{if(Y==="View Details")IZ.generateReport()});else f.window.showInformationMessage("No memory leaks detected")}),f.commands.registerCommand("ion.memory.report",()=>IZ.generateReport()),f.commands.registerCommand("ion.debug.stepBack",()=>{let J=v9.stepBack();if(J)f.window.showInformationMessage(`Stepped back to sequence ${J.sequenceNumber}`);else f.window.showInformationMessage("Already at beginning of execution history")}),f.commands.registerCommand("ion.debug.stepForward",()=>{let J=v9.stepForward();if(J)f.window.showInformationMessage(`Stepped forward to sequence ${J.sequenceNumber}`);else f.window.showInformationMessage("Already at end of execution history")}),f.commands.registerCommand("ion.debug.showTimeline",()=>{let J=v9.getTimeline(),Y=v9.getStatistics();f.window.showInformationMessage(`Timeline: ${Y.totalSnapshots} snapshots, position ${Y.currentPosition+1}/${Y.totalSnapshots}`)}),f.commands.registerCommand("ion.threads.showAll",()=>{let J=wJ.getAllThreads();f.window.showInformationMessage(`Active threads: ${J.length}`)}),f.commands.registerCommand("ion.threads.showDeadlocks",()=>{let J=wJ.getDeadlocks();if(J.length>0)f.window.showWarningMessage(`Detected ${J.length} deadlock(s)`,"View Details").then((Y)=>{if(Y==="View Details"){let Q=J[0];f.window.showErrorMessage(`Deadlock: ${Q.description}`,{modal:!0})}});else f.window.showInformationMessage("No deadlocks detected")}),f.commands.registerCommand("ion.threads.showRaces",()=>{let J=wJ.getRaceConditions();if(J.length>0)f.window.showWarningMessage(`Detected ${J.length} potential race condition(s)`,"View Details");else f.window.showInformationMessage("No race conditions detected")}),f.commands.registerCommand("ion.packageManager.search",()=>N9.searchPackages()),f.commands.registerCommand("ion.packageManager.install",()=>N9.installPackage()),f.commands.registerCommand("ion.packageManager.publish",()=>N9.publishPackage()),f.commands.registerCommand("ion.packageManager.update",()=>N9.updatePackages())),$.subscriptions.push(f.languages.registerDocumentFormattingEditProvider("home",{provideDocumentFormattingEdits(J){return q4(J)}})),$.subscriptions.push(f.languages.registerDocumentSemanticTokensProvider({language:"home"},new P4,F4)),$.subscriptions.push(f.languages.registerCodeActionsProvider({language:"home"},new u8,{providedCodeActionKinds:u8.providedCodeActionKinds}));let Z=f.workspace.getConfiguration("home");if(Z.get("inlayHints.enabled",!0))$.subscriptions.push(f.languages.registerInlayHintsProvider({language:"home"},new M4));if(Z.get("codelens.enabled"))$.subscriptions.push(f.languages.registerCodeLensProvider({language:"home"},new I4));UK($),$.subscriptions.push(f.workspace.onWillSaveTextDocument((J)=>{if(f.workspace.getConfiguration("home").get("format.onSave")&&J.document.languageId==="home")J.waitUntil(q4(J.document))})),LK($),$.subscriptions.push(k9),$.subscriptions.push(N9),$.subscriptions.push(L9),$.subscriptions.push(oZ),$.subscriptions.push(IZ)}function qO(){if(k9)k9.dispose();if(N9)N9.dispose();if(L9)L9.dispose();if(oZ)oZ.dispose();if(IZ)IZ.dispose();if(wJ)wJ.clear();if(v9)v9.clearHistory();if(!NJ)return;return NJ.stop()}function LK($){let Y={command:f.workspace.getConfiguration("home").get("path")||"home",args:["lsp"],options:{env:process.env}},Q={documentSelector:[{scheme:"file",language:"home"}],synchronize:{fileEvents:f.workspace.createFileSystemWatcher("**/*.home")}};NJ=new NK.LanguageClient("ionLanguageServer","Home Language Server",Y,Q),NJ.start(),f.window.showInformationMessage("Home Language Server started")}async function CO(){if(NJ)await NJ.stop();if(T4)LK(T4),f.window.showInformationMessage("Home Language Server restarted")}async function SO(){let $=f.window.activeTextEditor;if(!$||$.document.languageId!=="home"){f.window.showErrorMessage("No Home file is active");return}await $.document.save();let J=f.workspace.getConfiguration("home").get("path")||"home",Y=$.document.uri.fsPath,Q=f.window.createTerminal("Home Run");Q.show(),Q.sendText(`${J} run "${Y}"`)}async function DO(){let $=f.window.activeTextEditor;if(!$||$.document.languageId!=="home"){f.window.showErrorMessage("No Home file is active");return}await $.document.save();let J=f.workspace.getConfiguration("home").get("path")||"home",Y=$.document.uri.fsPath,Q=Y.replace(/\.home$/,""),X=f.window.createTerminal("Home Build");X.show(),X.sendText(`${J} build "${Y}" -o "${Q}"`)}async function bO(){let $=f.window.activeTextEditor;if(!$||$.document.languageId!=="home"){f.window.showErrorMessage("No Home file is active");return}await $.document.save();let J=f.workspace.getConfiguration("home").get("path")||"home",Y=$.document.uri.fsPath,Q=f.window.createTerminal("Home Check");Q.show(),Q.sendText(`${J} check "${Y}"`)}async function RO(){let $=f.workspace.workspaceFolders?.[0];if(!$){f.window.showErrorMessage("No workspace folder open");return}let J=f.workspace.getConfiguration("home").get("path")||"home",Y=f.window.createTerminal("Home Tests");Y.show(),Y.sendText(`cd "${$.uri.fsPath}" && ${J} test`)}async function yO(){let $=f.window.activeTextEditor;if(!$||$.document.languageId!=="home"){f.window.showErrorMessage("No Home file is active");return}let Z=await q4($.document),J=new f.WorkspaceEdit;Z.forEach((Y)=>J.replace($.document.uri,Y.range,Y.newText)),await f.workspace.applyEdit(J)}async function q4($){let J=f.workspace.getConfiguration("home").get("path")||"home";return new Promise((Y,Q)=>{let{spawn:X}=require("child_process"),z=X(J,["format","-"],{cwd:wK.dirname($.uri.fsPath)}),B="",j="";z.stdin.write($.getText()),z.stdin.end(),z.stdout.on("data",(H)=>{B+=H.toString()}),z.stderr.on("data",(H)=>{j+=H.toString()}),z.on("exit",(H)=>{if(H===0&&B){let O=new f.Range($.lineAt(0).range.start,$.lineAt($.lineCount-1).range.end);Y([f.TextEdit.replace(O,B)])}else{if(j)f.window.showErrorMessage(`Formatting failed: ${j}`);Y([])}}),z.on("error",(H)=>{f.window.showErrorMessage(`Formatting failed: ${H.message}`),Y([])})})}
