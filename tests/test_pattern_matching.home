// Test pattern matching with various pattern types

enum Option {
    None,
    Some(i32)
}

fn test_basic_patterns(): i32 {
    let x: i32 = 5;

    match x {
        5 => 100,
        _ => 0,
    }
}

fn test_enum_patterns(): i32 {
    let opt: Option = Option.Some(42);

    match opt {
        Option.Some(val) => val,
        Option.None => 0,
    }
}

fn test_range_pattern(): i32 {
    let x: i32 = 7;

    match x {
        1..5 => 1,    // exclusive range
        5..=10 => 2,  // inclusive range
        _ => 3,
    }
}

fn test_or_pattern(): i32 {
    let x: i32 = 3;

    match x {
        1 | 2 | 3 => 10,
        4 | 5 => 20,
        _ => 30,
    }
}

fn test_guard_pattern(): i32 {
    let x: i32 = 15;

    match x {
        val if val > 10 => 1,
        val if val > 5 => 2,
        _ => 3,
    }
}

fn main(): i32 {
    let result1: i32 = test_basic_patterns();
    if result1 != 100 {
        print("test_basic_patterns failed\n");
        return 1;
    }

    let result2: i32 = test_enum_patterns();
    if result2 != 42 {
        print("test_enum_patterns failed\n");
        return 2;
    }

    let result3: i32 = test_range_pattern();
    if result3 != 2 {
        print("test_range_pattern failed\n");
        return 3;
    }

    let result4: i32 = test_or_pattern();
    if result4 != 10 {
        print("test_or_pattern failed\n");
        return 4;
    }

    let result5: i32 = test_guard_pattern();
    if result5 != 1 {
        print("test_guard_pattern failed\n");
        return 5;
    }

    print("All pattern matching tests passed!\n");
    return 0;
}
