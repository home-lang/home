// Regular Expression Concepts Test Suite
// Testing pattern matching concepts using basic string operations

// ============================================================================
// BASIC MATCHING CONCEPTS
// ============================================================================

it("should match literal string with contains") {
    let text = "hello world";
    assert(text.contains("hello") == true);
    assert(text.contains("world") == true);
    assert(text.contains("xyz") == false);
}

it("should match at start with starts_with") {
    let text = "hello world";
    assert(text.starts_with("hello") == true);
    assert(text.starts_with("world") == false);
}

it("should match at end with ends_with") {
    let text = "hello world";
    assert(text.ends_with("world") == true);
    assert(text.ends_with("hello") == false);
}

it("should be case sensitive by default") {
    let text = "Hello World";
    assert(text.contains("Hello") == true);
    assert(text.contains("hello") == false);
}

// ============================================================================
// CASE INSENSITIVE MATCHING
// ============================================================================

it("should match case insensitive using lower") {
    let text = "Hello World";
    let lower_text = text.lower();
    assert(lower_text.contains("hello") == true);
    assert(lower_text.contains("world") == true);
}

it("should match case insensitive using upper") {
    let text = "Hello World";
    let upper_text = text.upper();
    assert(upper_text.contains("HELLO") == true);
    assert(upper_text.contains("WORLD") == true);
}

// ============================================================================
// CHARACTER CLASS CONCEPTS
// ============================================================================

it("should check for digit characters") {
    let text = "abc123def";
    // Simulate checking for digits
    let has_digit = text.contains("1") or text.contains("2") or text.contains("3");
    assert(has_digit == true);
}

it("should check for letter characters") {
    let text = "abc123";
    let has_letter = text.contains("a") or text.contains("b") or text.contains("c");
    assert(has_letter == true);
}

it("should check for whitespace") {
    let text = "hello world";
    let has_space = text.contains(" ");
    assert(has_space == true);
}

// ============================================================================
// SPLIT OPERATIONS (SIMULATING REGEX SPLIT)
// ============================================================================

it("should split by delimiter") {
    let text = "a,b,c";
    let parts = text.split(",");
    assert(parts.len() == 3);
    assert(parts[0] == "a");
    assert(parts[1] == "b");
    assert(parts[2] == "c");
}

it("should split by space") {
    let text = "hello world test";
    let parts = text.split(" ");
    assert(parts.len() == 3);
    assert(parts[0] == "hello");
    assert(parts[2] == "test");
}

it("should split by multiple characters") {
    let text = "a, b, c";
    let parts = text.split(", ");
    assert(parts.len() == 3);
}

// ============================================================================
// REPLACE OPERATIONS
// ============================================================================

it("should replace first occurrence") {
    let text = "hello world world";
    let result = text.replace("world", "there");
    // Note: basic replace may replace all or first depending on implementation
    assert(result.contains("there") == true);
}

it("should replace with empty string") {
    let text = "a1b2c3";
    let result = text.replace("1", "").replace("2", "").replace("3", "");
    assert(result == "abc");
}

// ============================================================================
// PATTERN VALIDATION CONCEPTS
// ============================================================================

it("should validate email-like pattern") {
    let email = "user@example.com";
    let has_at = email.contains("@");
    let has_dot = email.contains(".");
    let valid = has_at and has_dot;
    assert(valid == true);
}

it("should validate URL-like pattern") {
    let url = "https://example.com/path";
    let starts_http = url.starts_with("http://") or url.starts_with("https://");
    assert(starts_http == true);
}

it("should validate phone-like pattern") {
    let phone = "123-456-7890";
    let parts = phone.split("-");
    assert(parts.len() == 3);
    assert(parts[0].len() == 3);
    assert(parts[1].len() == 3);
    assert(parts[2].len() == 4);
}

it("should validate date-like pattern") {
    let date = "2023-12-25";
    let parts = date.split("-");
    assert(parts.len() == 3);
    assert(parts[0].len() == 4);
    assert(parts[1].len() == 2);
    assert(parts[2].len() == 2);
}

// ============================================================================
// ANCHOR SIMULATION
// ============================================================================

it("should check start anchor") {
    let text = "hello world";
    assert(text.starts_with("hello") == true);
    assert(text.starts_with("world") == false);
}

it("should check end anchor") {
    let text = "hello world";
    assert(text.ends_with("world") == true);
    assert(text.ends_with("hello") == false);
}

it("should check whole string match") {
    let text = "hello";
    let pattern = "hello";
    let exact_match = text == pattern;
    assert(exact_match == true);
}

// ============================================================================
// ALTERNATION SIMULATION
// ============================================================================

it("should match either pattern") {
    let text = "cat";
    let matches = text == "cat" or text == "dog";
    assert(matches == true);
}

it("should match multiple alternatives") {
    let color = "green";
    let is_primary = color == "red" or color == "green" or color == "blue";
    assert(is_primary == true);
}

// ============================================================================
// LENGTH VALIDATION
// ============================================================================

it("should validate minimum length") {
    let password = "secret123";
    let valid = password.len() >= 8;
    assert(valid == true);
}

it("should validate maximum length") {
    let username = "john";
    let valid = username.len() <= 20;
    assert(valid == true);
}

it("should validate exact length") {
    let code = "ABC123";
    let valid = code.len() == 6;
    assert(valid == true);
}

// ============================================================================
// FIND POSITION CONCEPTS
// ============================================================================

it("should find substring position") {
    let text = "hello world";
    // Simulate finding position by checking contains
    let found = text.contains("world");
    assert(found == true);
}

// ============================================================================
// EXTRACTION CONCEPTS
// ============================================================================

it("should extract first n characters") {
    let text = "hello world";
    // Using split and take first part
    let first_word = text.split(" ")[0];
    assert(first_word == "hello");
}

it("should extract last part") {
    let text = "path/to/file.txt";
    let parts = text.split("/");
    let filename = parts[parts.len() - 1];
    assert(filename == "file.txt");
}

it("should extract extension") {
    let filename = "document.txt";
    let parts = filename.split(".");
    let ext = parts[parts.len() - 1];
    assert(ext == "txt");
}

// ============================================================================
// TRIMMING AND CLEANING
// ============================================================================

it("should trim leading and trailing") {
    let text = "  hello  ";
    let trimmed = text.trim();
    assert(trimmed == "hello");
}

it("should trim only leading") {
    let text = "  hello";
    let trimmed = text.trim_start();
    assert(trimmed == "hello");
}

it("should trim only trailing") {
    let text = "hello  ";
    let trimmed = text.trim_end();
    assert(trimmed == "hello");
}

// ============================================================================
// WORD BOUNDARY SIMULATION
// ============================================================================

it("should check word at start") {
    let text = "word is here";
    let starts_with_word = text.starts_with("word ");
    assert(starts_with_word == true);
}

it("should check word at end") {
    let text = "here is word";
    let ends_with_word = text.ends_with(" word");
    assert(ends_with_word == true);
}

// ============================================================================
// REPETITION CONCEPTS
// ============================================================================

it("should repeat string") {
    let char = "a";
    let repeated = char.repeat(5);
    assert(repeated == "aaaaa");
    assert(repeated.len() == 5);
}

it("should check for repeated characters") {
    let text = "aaa";
    // Check if all same character
    let first = text.char_at(0);
    let all_same = text == first.repeat(text.len());
    assert(all_same == true);
}

// ============================================================================
// EMPTY AND NULL CHECKS
// ============================================================================

it("should check if empty") {
    let text = "";
    assert(text.is_empty() == true);
    assert(text.len() == 0);
}

it("should check if not empty") {
    let text = "hello";
    assert(text.is_empty() == false);
    assert(text.len() > 0);
}

// ============================================================================
// PRACTICAL PATTERNS
// ============================================================================

it("should validate hex color pattern") {
    let color = "#FF0000";
    let valid = color.starts_with("#") and color.len() == 7;
    assert(valid == true);
}

it("should extract domain from URL") {
    let url = "https://example.com/path";
    let without_protocol = url.replace("https://", "").replace("http://", "");
    let parts = without_protocol.split("/");
    let domain = parts[0];
    assert(domain == "example.com");
}

it("should validate IP-like pattern") {
    let ip = "192.168.1.1";
    let parts = ip.split(".");
    assert(parts.len() == 4);
}

// ============================================================================
// EDGE CASES
// ============================================================================

it("should handle empty pattern") {
    let text = "anything";
    let contains_empty = text.contains("");
    // Empty string is contained in any string
    assert(contains_empty == true);
}

it("should handle pattern longer than input") {
    let text = "short";
    let pattern = "verylongpattern";
    let found = text.contains(pattern);
    assert(found == false);
}
