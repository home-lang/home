// Math Concepts Test Suite

// ============================================================================
// BASIC ARITHMETIC
// ============================================================================

it("should add integers") {
    assert(1 + 1 == 2);
    assert(100 + 200 == 300);
    assert(-5 + 10 == 5);
}

it("should subtract integers") {
    assert(10 - 3 == 7);
    assert(5 - 10 == -5);
    assert(0 - 5 == -5);
}

it("should multiply integers") {
    assert(3 * 4 == 12);
    assert(-3 * 4 == -12);
    assert(-3 * -4 == 12);
}

it("should divide integers") {
    assert(10 / 2 == 5);
    assert(15 / 3 == 5);
    assert(17 / 5 == 3);  // Integer division truncates
}

it("should compute modulo") {
    assert(10 % 3 == 1);
    assert(15 % 5 == 0);
    assert(17 % 5 == 2);
}

// ============================================================================
// POWER OF INTEGERS
// ============================================================================

it("should compute powers manually") {
    // 2^10 = 1024
    let base = 2;
    let exp = 10;
    let mut result = 1;
    for (_ in 0..exp) {
        result = result * base;
    }
    assert(result == 1024);
}

it("should compute square") {
    let n = 7;
    let square = n * n;
    assert(square == 49);
}

it("should compute cube") {
    let n = 3;
    let cube = n * n * n;
    assert(cube == 27);
}

// ============================================================================
// ABSOLUTE VALUE
// ============================================================================

it("should compute absolute value") {
    let pos = 5;
    let neg = -5;

    let abs_pos = if (pos >= 0) { pos } else { -pos };
    let abs_neg = if (neg >= 0) { neg } else { -neg };

    assert(abs_pos == 5);
    assert(abs_neg == 5);
}

// ============================================================================
// MIN AND MAX
// ============================================================================

it("should find minimum of two") {
    let a = 10;
    let b = 5;
    let min = if (a < b) { a } else { b };
    assert(min == 5);
}

it("should find maximum of two") {
    let a = 10;
    let b = 5;
    let max = if (a > b) { a } else { b };
    assert(max == 10);
}

it("should clamp value") {
    let value = 150;
    let min_val = 0;
    let max_val = 100;

    let clamped = if (value < min_val) {
        min_val
    } else if (value > max_val) {
        max_val
    } else {
        value
    };

    assert(clamped == 100);
}

// ============================================================================
// SIGN
// ============================================================================

it("should get sign") {
    let pos = 10;
    let neg = -10;
    let zero = 0;

    let sign_pos = if (pos > 0) { 1 } else if (pos < 0) { -1 } else { 0 };
    let sign_neg = if (neg > 0) { 1 } else if (neg < 0) { -1 } else { 0 };
    let sign_zero = if (zero > 0) { 1 } else if (zero < 0) { -1 } else { 0 };

    assert(sign_pos == 1);
    assert(sign_neg == -1);
    assert(sign_zero == 0);
}

// ============================================================================
// DIVISIBILITY
// ============================================================================

it("should check if even") {
    assert(4 % 2 == 0);
    assert(100 % 2 == 0);
    assert(5 % 2 != 0);
}

it("should check if odd") {
    assert(5 % 2 == 1);
    assert(101 % 2 == 1);
    assert(4 % 2 != 1);
}

it("should check divisibility") {
    assert(15 % 3 == 0);  // 15 is divisible by 3
    assert(15 % 5 == 0);  // 15 is divisible by 5
    assert(15 % 7 != 0);  // 15 is not divisible by 7
}

// ============================================================================
// ROUNDING (Integer)
// ============================================================================

it("should round down (floor division)") {
    // For positive numbers, integer division is floor
    assert(7 / 3 == 2);
    assert(10 / 4 == 2);
}

it("should round to nearest") {
    // Round 7/3 to nearest integer
    let numerator = 7;
    let denominator = 3;
    let rounded = (numerator + denominator / 2) / denominator;
    assert(rounded == 2);  // 2.33... rounds to 2
}

it("should ceiling division") {
    // Ceiling of 7/3 = 3
    let numerator = 7;
    let denominator = 3;
    let ceiling = (numerator + denominator - 1) / denominator;
    assert(ceiling == 3);
}

// ============================================================================
// PERCENTAGE
// ============================================================================

it("should calculate percentage") {
    let total = 200;
    let part = 50;
    let percentage = (part * 100) / total;
    assert(percentage == 25);
}

it("should calculate percentage of value") {
    let value = 200;
    let percent = 15;
    let result = (value * percent) / 100;
    assert(result == 30);  // 15% of 200 = 30
}

// ============================================================================
// FACTORIAL
// ============================================================================

it("should calculate factorial") {
    let n = 6;
    let mut fact = 1;
    for (i in 1..(n + 1)) {
        fact = fact * i;
    }
    assert(fact == 720);  // 6! = 720
}

// ============================================================================
// FIBONACCI
// ============================================================================

it("should calculate fibonacci") {
    let mut fib = [0, 1];
    for (i in 2..10) {
        fib = fib.push(fib[i - 1] + fib[i - 2]);
    }
    assert(fib[9] == 34);  // 10th fibonacci number
}

// ============================================================================
// GCD AND LCM
// ============================================================================

it("should calculate GCD") {
    let mut a = 48;
    let mut b = 18;
    while (b != 0) {
        let temp = b;
        b = a % b;
        a = temp;
    }
    assert(a == 6);  // GCD(48, 18) = 6
}

it("should calculate LCM") {
    let a = 12;
    let b = 18;

    // First calculate GCD
    let mut x = a;
    let mut y = b;
    while (y != 0) {
        let temp = y;
        y = x % y;
        x = temp;
    }
    let gcd = x;

    // LCM = (a * b) / gcd
    let lcm = (a * b) / gcd;
    assert(lcm == 36);  // LCM(12, 18) = 36
}

// ============================================================================
// PRIME CHECK
// ============================================================================

it("should check prime") {
    let n = 17;
    let mut is_prime = n > 1;

    for (i in 2..n) {
        if (n % i == 0) {
            is_prime = false;
        }
    }

    assert(is_prime == true);
}

it("should check non-prime") {
    let n = 15;
    let mut is_prime = n > 1;

    for (i in 2..n) {
        if (n % i == 0) {
            is_prime = false;
        }
    }

    assert(is_prime == false);
}

// ============================================================================
// SUM FORMULAS
// ============================================================================

it("should sum natural numbers") {
    // Sum 1..n = n*(n+1)/2
    let n = 100;
    let sum = n * (n + 1) / 2;
    assert(sum == 5050);
}

it("should sum squares") {
    // Sum of 1^2 + 2^2 + ... + 5^2
    let mut sum = 0;
    for (i in 1..6) {
        sum = sum + i * i;
    }
    assert(sum == 55);  // 1 + 4 + 9 + 16 + 25 = 55
}
