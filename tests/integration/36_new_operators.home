// Integration tests for new operators
// Tests: Power (**), Integer Division (~/)

// ============================================
// POWER OPERATOR (**)
// ============================================

fn test_power_basic() {
    // Basic integer powers
    let result = 2 ** 3
    assert(result == 8)

    let square = 5 ** 2
    assert(square == 25)

    let cube = 3 ** 3
    assert(cube == 27)
}

fn test_power_zero() {
    // Any number to power 0 is 1
    let result = 10 ** 0
    assert(result == 1)

    let also_one = 999 ** 0
    assert(also_one == 1)
}

fn test_power_one() {
    // Any number to power 1 is itself
    let result = 42 ** 1
    assert(result == 42)
}

fn test_power_large() {
    // Larger exponents
    let big = 2 ** 10
    assert(big == 1024)
}

// ============================================
// INTEGER DIVISION (~/)
// ============================================

fn test_intdiv_basic() {
    // Basic integer division
    let result = 7 ~/ 2
    assert(result == 3)

    let another = 10 ~/ 3
    assert(another == 3)
}

fn test_intdiv_exact() {
    // Exact division
    let result = 10 ~/ 2
    assert(result == 5)

    let also_exact = 12 ~/ 4
    assert(also_exact == 3)
}

fn test_intdiv_truncates() {
    // Integer division truncates toward zero
    let result = 17 ~/ 5
    assert(result == 3)
}

// ============================================
// COMBINED TESTS
// ============================================

fn test_operators_combined() {
    // Power and integer division together
    let powered = 2 ** 5
    let divided = powered ~/ 10
    assert(divided == 3)  // 32 ~/ 10 = 3
}

// ============================================
// MAIN TEST RUNNER
// ============================================

fn main() {
    // Power operator tests
    test_power_basic()
    test_power_zero()
    test_power_one()
    test_power_large()

    // Integer division tests
    test_intdiv_basic()
    test_intdiv_exact()
    test_intdiv_truncates()

    // Combined tests
    test_operators_combined()

    print("All new operator tests passed!")
}
