// Comprehensive Type System Tests
// Tests: primitive types, compound types, type aliases, type compatibility

// ============================================
// Test 1: Primitive types
// ============================================
fn test_primitive_types(): i32 {
    // Integer types
    let i32_val: i32 = 2147483647;

    // Floating point types
    let f64_val: f64 = 3.141592653589793;

    // Boolean type
    let bool_val: bool = true;
    let bool_val2: bool = false;

    // String type
    let str_val: string = "Hello, World!";

    if (i32_val != 2147483647) { return 1; }
    if (bool_val != true) { return 2; }

    return 0;
}

// ============================================
// Test 2: Array types
// ============================================
fn test_array_types(): i32 {
    let int_array = [1, 2, 3, 4, 5];
    let str_array = ["a", "b", "c"];
    let bool_array = [true, false, true];

    if (int_array[0] != 1) { return 1; }
    if (int_array[4] != 5) { return 2; }

    return 0;
}

// ============================================
// Test 3: Struct as pair (tuple alternative)
// ============================================
struct Pair {
    first: i32,
    second: i32
}

fn test_pair_types(): i32 {
    let pair = Pair { first: 10, second: 20 };

    if (pair.first != 10) { return 1; }
    if (pair.second != 20) { return 2; }

    return 0;
}

// ============================================
// Test 4: Struct types
// ============================================
struct Point {
    x: i32,
    y: i32
}

struct Rectangle {
    width: i32,
    height: i32
}

struct Person {
    age: i32,
    active: bool
}

fn test_struct_types(): i32 {
    let p = Point { x: 10, y: 20 };
    let rect = Rectangle {
        width: 100,
        height: 50
    };

    if (p.x != 10) { return 1; }
    if (p.y != 20) { return 2; }
    if (rect.width != 100) { return 3; }

    return 0;
}

// ============================================
// Test 5: Function types
// ============================================
fn add(a: i32, b: i32): i32 {
    return a + b;
}

fn multiply(a: i32, b: i32): i32 {
    return a * b;
}

fn test_function_types(): i32 {
    let sum = add(5, 3);
    let product = multiply(5, 3);

    if (sum != 8) { return 1; }
    if (product != 15) { return 2; }

    return 0;
}

// ============================================
// Test 6: Nested types
// ============================================
struct Node {
    value: i32
}

fn test_nested_types(): i32 {
    let node = Node {
        value: 10
    };

    if (node.value != 10) { return 1; }

    return 0;
}

// ============================================
// Test 7: Type inference
// ============================================
fn test_type_inference(): i32 {
    // Type should be inferred as i32
    let a = 42;
    // Type should be inferred as f64
    let b = 3.14;
    // Type should be inferred as bool
    let c = true;
    // Type should be inferred as string
    let d = "hello";

    if (a != 42) { return 1; }
    if (c != true) { return 2; }

    return 0;
}

// ============================================
// Test 8: Numeric operations type safety
// ============================================
fn test_numeric_operations(): i32 {
    let a: i32 = 10;
    let b: i32 = 3;

    // Integer operations
    let sum = a + b;
    let diff = a - b;
    let prod = a * b;
    let quot = a / b;
    let rem = a % b;

    if (sum != 13) { return 1; }
    if (diff != 7) { return 2; }
    if (prod != 30) { return 3; }
    if (quot != 3) { return 4; }
    if (rem != 1) { return 5; }

    return 0;
}

// ============================================
// Main test runner
// ============================================
fn main(): i32 {
    let t1 = test_primitive_types();
    if (t1 != 0) {
        print("test_primitive_types failed\n");
        return 1;
    }

    let t2 = test_array_types();
    if (t2 != 0) {
        print("test_array_types failed\n");
        return 2;
    }

    let t3 = test_pair_types();
    if (t3 != 0) {
        print("test_pair_types failed\n");
        return 3;
    }

    let t4 = test_struct_types();
    if (t4 != 0) {
        print("test_struct_types failed\n");
        return 4;
    }

    let t5 = test_function_types();
    if (t5 != 0) {
        print("test_function_types failed\n");
        return 5;
    }

    let t6 = test_nested_types();
    if (t6 != 0) {
        print("test_nested_types failed\n");
        return 6;
    }

    let t7 = test_type_inference();
    if (t7 != 0) {
        print("test_type_inference failed\n");
        return 7;
    }

    let t8 = test_numeric_operations();
    if (t8 != 0) {
        print("test_numeric_operations failed\n");
        return 8;
    }

    print("All type system tests passed!\n");
    return 0;
}
