// Test type checking functionality

// Test 1: Function parameter type checking
fn add(x: i32, y: i32): i32 {
    return x + y;
}

fn test_param_types(): i32 {
    let result: i32 = add(5, 10);  // Should pass: i32 + i32
    return result;
}

// Test 2: Return type validation
fn get_number(): i32 {
    return 42;  // Should pass: returns i32
}

fn test_return_type(): i32 {
    let num: i32 = get_number();
    return num;
}

// Test 3: Type inference for let bindings
fn test_type_inference(): i32 {
    let x = 10;        // Inferred as i32
    let y = 20;        // Inferred as i32
    let sum = x + y;   // Inferred as i32
    return sum;
}

// Test 4: Array type checking
fn test_array_types(): i32 {
    let arr: [i32] = [1, 2, 3, 4, 5];
    let first: i32 = arr[0];
    return first;
}

// Test 5: Conditional type checking
fn test_conditionals(): i32 {
    let x: i32 = 10;

    if x > 5 {
        return 1;
    } else {
        return 0;
    }
}

// Test 6: Type checking in loops
fn test_loops(): i32 {
    let sum: i32 = 0;

    for i in 0..10 {
        sum = sum + i;
    }

    return sum;
}

// Test 7: Boolean type checking
fn test_booleans(): bool {
    let a: bool = true;
    let b: bool = false;
    let result: bool = a && b;
    return result;
}

// Test 8: String type checking
fn test_strings(): i32 {
    let greeting: string = "Hello, World!";
    let message: string = "Type checking works!";
    return 0;
}

// Main function
fn main(): i32 {
    // Run all tests
    let t1: i32 = test_param_types();
    if t1 != 15 {
        print("test_param_types failed\n");
        return 1;
    }

    let t2: i32 = test_return_type();
    if t2 != 42 {
        print("test_return_type failed\n");
        return 2;
    }

    let t3: i32 = test_type_inference();
    if t3 != 30 {
        print("test_type_inference failed\n");
        return 3;
    }

    let t4: i32 = test_array_types();
    if t4 != 1 {
        print("test_array_types failed\n");
        return 4;
    }

    let t5: i32 = test_conditionals();
    if t5 != 1 {
        print("test_conditionals failed\n");
        return 5;
    }

    let t6: i32 = test_loops();
    if t6 != 45 {
        print("test_loops failed\n");
        return 6;
    }

    let t7: bool = test_booleans();
    if t7 != false {
        print("test_booleans failed\n");
        return 7;
    }

    let t8: i32 = test_strings();
    if t8 != 0 {
        print("test_strings failed\n");
        return 8;
    }

    print("All type checking tests passed!\n");
    return 0;
}
